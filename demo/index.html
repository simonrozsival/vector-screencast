<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Vector screencast - DEMO</title>
		
		<!-- Libraries -->
		<link rel="stylesheet" media="screen" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">

		<!-- Open Sans font -->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

	</head>
	<body>
		<div class="container">
			<div class="row" id="title">
				<div class="col-xs-12">
					<h1>Khanova škola</h1>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-12">
					<div id="board">
						<object data="img/logo.svg" type="image/svg+xml" id="loading-logo">
							<!-- @todo fallback: img src="img/logo.png" / -->
						</object>
						<canvas id="board-canvas" width="1140" height="500"></canvas>

						<noscript>
							<!-- for browsers with no JavaScript support -->
							<p>Váš prohlížeč nepodporuje JavaScript, nebo ho máte vypnutný. Pro přehrávání videa je nutné mít JavaScript v prohlížeči zapnutý.</p>
						</noscript>

					</div>
				</div>
			</div>

			<!-- this will be generated by JS later: -->
			<div class="row">
				<div class="col-xs-12">
					<div id="controls">
						<div class="row">
							<!-- play/pause button -->
							<div class="col-xs-2 text-center">
								<button class="btn btn-danger" id="play-pause">
									<span class="glyphicon glyphicon-play"></span>
								</button>
							</div> 

							<!-- the progress axis -->
							<div class="col-xs-8" id="video-progress">
								<div class="progress">
									<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
								</div>
							</div>

							<!-- progress text -->
							<div class="col-xs-2" id="video-time">
								<strong id="current-time">0:00</strong>&nbsp;/&nbsp;<span id="total-time" data-toggle="tooltip" title="The maximum length of the clip is 15 minutes.">15:00</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- JS libraries: -->
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>



		<!--

			Khan Academy Vector Video Recorder
			==================================

		-->
		<!-- (in the production version, these JS files will be compressed into one) -->

		<!-- helpers: -->
		<script type="text/javascript" src="js/helpers/helper-functions.js"></script>
		<script type="text/javascript" src="js/helpers/video-timer.js"></script>
		<script type="text/javascript" src="js/helpers/cursor.js"></script>

		<!-- settings: -->
		<script type="text/javascript" src="js/settings/basic-settings.js"></script>
		<script type="text/javascript" src="js/settings/recording-settings.js"></script>

		<!-- data provider (recording -> user input): -->
		<script type="text/javascript" src="js/format-manipulators/khan-academy-vector-reader.js"></script>
		<script type="text/javascript" src="js/libs/xmllint.js"></script>
		<script type="text/javascript" src="js/format-manipulators/validator.js"></script>
		<script type="text/javascript" src="js/data-providers/base-data-provider.js"></script>
		<script type="text/javascript" src="js/data-providers/xml-data-provider.js"></script>

		<!-- line drawer type: -->
		<script type="text/javascript" src="js/drawers/basic-line-drawer.js"></script>

		<!-- the object that puts everything together: -->
		<script type="text/javascript" src="js/player.js"></script>

		<!-- this script will be refactored later and put into a separate file: -->
		<script type="text/javascript">
			$(function(){ // document.ready jQuery shortcut - all the JS files must be loaded before this script runs!!

				var settings = new BasicSettings();
				var dataProvider = new XmlDataProvider("/xml/khan-academy/demo.xml", settings);
				var lineDrawer = new BasicLineDrawer($("#board-canvas"), settings);
				var player = new KhanAcademyPlayer();
				dataProvider.whenReady(function() {
					player.init({
						board: "#board",
						canvas: "#board-canvas"
					}, lineDrawer, dataProvider);
				});

				var playing = false;
				var play = function() {
					// canvas and controls settings
					$("#loading-logo").hide();
					$("#board-canvas").addClass("active");
					$(this).children(".glyphicon").removeClass("glyphicon-play").addClass("glyphicon-pause");

					// start playing
					player.start();
				};

				var pause = function() {
					// inform the user about uploading that is in process
					$(this).removeClass("btn-danger").addClass("btn-default")
							.children(".glyphicon").removeClass("glyphicon-pause").addClass("glyphicon-play");

					//saveRecordedData(recorder);

					// inform the user that uploading has finished and he can record again
					$("#board-canvas").removeClass("active");
				};

				$("#play-pause").on("click", function(e) {
					e.preventDefault();

					// disable the button until the initialization is 
					$(this).attr("disabled", "disabled");

					// toggle recording
					playing == false ? play() : pause();
					playing = !playing;

					// the button can be pressed again
					$(this).removeAttr("disabled");
				});

			});
		</script>
	</body>
</html>