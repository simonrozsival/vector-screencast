{"version":3,"sources":["webpack:///player.js","webpack:///./src/VectorScreencast/Player.ts","webpack:///./src/VectorScreencast/Drawing/CanvasDrawer.ts","webpack:///./src/VectorScreencast/UI/PlayerUI.ts","webpack:///./src/VectorScreencast/UI/TimeLine.ts"],"names":["webpackJsonp","module","exports","__webpack_require__","AudioPlayer_1","VideoEvents_1","Errors_1","PlayerUI_1","VideoTimer_1","CanvasDrawer_1","Command_1","Chunk_1","File_1","IO_1","Player","id","settings","_this","this","lastMouseMoveState","events","container","document","getElementById","Report","ErrorType","Fatal","firstChild","removeChild","Localization","loc","NoJS","DataLoadingFailed","DataIsCorrupted","ControlPlayback","Play","Pause","Replay","TimeStatus","VolumeControl","VolumeUp","VolumeDown","Mute","Busy","timer","ui","UI","Timer","ShowControls","CreateControls","Autohide","drawer","DrawingStrategy","SetEvents","AcceptCanvas","CreateCanvas","appendChild","GetHTML","on","VideoEventType","Start","ReachEnd","ClearCanvas","color","ClearCavnas","ChangeColor","SetCurrentColor","JumpTo","progress","DrawSegment","DrawPath","path","drawnPath","DrawWholePath","busyLevel","Ready","SetBusyText","trigger","ReadFileAsync","Source","file","ProcessVideoData","MonitorResize","window","onresize","errStatusCode","Warning","Object","defineProperty","prototype","get","enumerable","configurable","rect","getBoundingClientRect","width","oldWidth","height","oldHeight","Stretch","scalingFactor","SetupOutputCorrection","video","Metadata","Width","Height","CanvasScalingFactor","RedrawCurrentScreen","data","reader","VideoFormat","LoadVideo","audio","AudioTracks","e","VideoInfoLoaded","RewindMinusOne","MoveToNextChunk","Autoplay","isPlaying","Resume","ticking","requestAnimationFrame","Tick","cancelAnimationFrame","Sync","CurrentChunk","undefined","CurrentCommand","CurrentTime","Length","ReachedEnd","Time","MoveCursor","Execute","MoveNextCommand","Draw","MoveNextChunk","ExecuteInitCommands","PathChunk","CreatePath","Path","Segments","Color","drawnSegment","PeekNextChunk","StartTime","Render","wasPlaying","time","videoTime","SetTime","startChunk","FastforwardErasedChunksUntil","RewindToLastEraseBefore","CurrentChunkNumber","SetCurrentChunkNumber","UpdateCurrentTime","StartDrawingPath","wasPlayingWhenBusy","value",27,"HTML_1","Path_1","CanvasDrawer","curved","canvas","CreateElement","context","getContext","parent","parentElement","clientWidth","clientHeight","originalHeight","originalWidth","SetAttributes","CanvasSize","sourceWidth","sourceHeight","wr","hr","min","Math","scale","fillStyle","CssValue","fillRect","currentColor","CanvasPath",32,"__extends","d","b","__","constructor","p","hasOwnProperty","create","HelperFunctions_1","BasicElements_1","Board_1","TimeLine_1","PlayerUI","_super","call","isBusy","tickingInterval","isMuted","AddClass","board","CreateBoard","AddChild","StartPlaying","PausePlaying","c","style","backgroundColor","reachedEnd","autohide","timeline","CreateTimeLine","hidingButton","IconOnlyButton","ToggleAutohiding","AddClasses","controls","Panel","AddChildren","CreateButtonsPanel","CreateTimeStatus","CreateAudioControls","meta","videoDuration","totalTime","textContent","millisecondsToString","BufferStatus","seconds","SetBuffer","BindKeyboardShortcuts","text","data-busy-string","spacebar","leftArrow","rightArrow","skipTime","onkeyup","keyCode","PlayPause","SkipTo","max","onclick","playPauseButton","H2","ChangeIcon","ChangeContent","setInterval","RemoveClass","clearInterval","currentTime","SimpleElement","volumeDownBtn","volumeUpBtn","volumeOffBtn","removeAttribute","disabled","HasClass",34,"TimeLine","length","classList","add","bar","progresbar","buffer","bufferbar","arrow","OnClick","onmousemove","OnMouseMove","set","clientX","clientLeft","left","right"],"mappings":"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","file":"player.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var AudioPlayer_1=__webpack_require__(11),VideoEvents_1=__webpack_require__(1),Errors_1=__webpack_require__(8),PlayerUI_1=__webpack_require__(32),VideoTimer_1=__webpack_require__(18),CanvasDrawer_1=__webpack_require__(27),Command_1=__webpack_require__(10),Chunk_1=__webpack_require__(9),File_1=__webpack_require__(15),IO_1=__webpack_require__(25),Player=function(){function e(e,t){var i=this;this.settings=t,this.lastMouseMoveState=null,this.events=new VideoEvents_1[\"default\"];var n=document.getElementById(e);for(n||Errors_1[\"default\"].Report(Errors_1.ErrorType.Fatal,\"Container #\"+e+\" doesn't exist. Video Player couldn't be initialised.\");n.firstChild;)n.removeChild(n.firstChild);if(!t.Localization){var r={NoJS:\"Your browser does not support JavaScript or it is turned off. Video can't be recorded without enabled JavaScript in your browser.\",DataLoadingFailed:\"Unfortunatelly, downloading data failed.\",DataIsCorrupted:\"This video can't be played, the data is corrupted.\",ControlPlayback:\"Play/Pause video\",Play:\"Play\",Pause:\"Pause\",Replay:\"Replay\",TimeStatus:\"Video progress\",VolumeControl:\"Volume controls\",VolumeUp:\"Volume up\",VolumeDown:\"Volume down\",Mute:\"Mute\",Busy:\"Loading...\"};t.Localization=r}this.timer=new VideoTimer_1[\"default\"](!1),this.ui=t.UI?t.UI:new PlayerUI_1[\"default\"](e,this.events),this.ui.Timer=this.timer,this.ui.Localization=t.Localization,t.ShowControls&&this.ui.CreateControls(!!t.Autohide),this.drawer=t.DrawingStrategy?t.DrawingStrategy:new CanvasDrawer_1[\"default\"](!0),this.drawer.SetEvents(this.events),this.ui.AcceptCanvas(this.drawer.CreateCanvas()),n.appendChild(this.ui.GetHTML()),this.events.on(VideoEvents_1.VideoEventType.Start,function(){return i.Play()}),this.events.on(VideoEvents_1.VideoEventType.Pause,function(){return i.Pause()}),this.events.on(VideoEvents_1.VideoEventType.ReachEnd,function(){return i.Pause()}),this.events.on(VideoEvents_1.VideoEventType.ClearCanvas,function(e){return i.ClearCavnas(e)}),this.events.on(VideoEvents_1.VideoEventType.ChangeColor,function(e){return i.drawer.SetCurrentColor(e)}),this.events.on(VideoEvents_1.VideoEventType.JumpTo,function(e){return i.JumpTo(e)}),this.events.on(VideoEvents_1.VideoEventType.DrawSegment,function(){return i.DrawSegment()}),this.events.on(VideoEvents_1.VideoEventType.DrawPath,function(e){i.drawnPath.DrawWholePath(),i.drawnPath=null}),this.busyLevel=0,this.events.on(VideoEvents_1.VideoEventType.Busy,function(){return i.Busy()}),this.events.on(VideoEvents_1.VideoEventType.Ready,function(){return i.Ready()}),this.ui.SetBusyText(t.Localization.Busy),this.events.trigger(VideoEvents_1.VideoEventType.Busy),File_1[\"default\"].ReadFileAsync(t.Source,function(e){i.ProcessVideoData(e),i.MonitorResize(n),window.onresize=function(){return i.MonitorResize(n)}},function(e){Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,i.settings.Localization.DataLoadingFailed),i.ui.SetBusyText(t.Localization.DataLoadingFailed)})}return Object.defineProperty(e.prototype,\"Events\",{get:function(){return this.events},enumerable:!0,configurable:!0}),e.prototype.MonitorResize=function(e){var t=e.getBoundingClientRect();if(t.width!==this.oldWidth||t.height!==this.oldHeight){this.drawer.Stretch();var i=this.drawer.SetupOutputCorrection(this.video.Metadata.Width,this.video.Metadata.Height);this.events.trigger(VideoEvents_1.VideoEventType.CanvasScalingFactor,i),this.video&&this.RedrawCurrentScreen(),this.oldWidth=t.width,this.oldHeight=t.height}},e.prototype.ProcessVideoData=function(e){try{var t=this.settings.VideoFormat?this.settings.VideoFormat:new IO_1[\"default\"];this.video=t.LoadVideo(this.events,e),t=null,this.audio=new AudioPlayer_1[\"default\"](this.events,this.video.Metadata.AudioTracks)}catch(i){return t=null,this.video=null,this.audio=null,void this.ui.SetBusyText(this.settings.Localization.DataIsCorrupted)}this.events.trigger(VideoEvents_1.VideoEventType.VideoInfoLoaded,this.video.Metadata),this.video.RewindMinusOne(),this.MoveToNextChunk(),this.events.trigger(VideoEvents_1.VideoEventType.Ready),this.settings.Autoplay&&this.events.trigger(VideoEvents_1.VideoEventType.Start)},e.prototype.Play=function(){var e=this;this.isPlaying=!0,this.timer.Resume(),!!this.audio&&this.audio.Play(),this.ticking=requestAnimationFrame(function(){return e.Tick()})},e.prototype.Pause=function(){this.timer.Pause(),this.isPlaying=!1,!!this.audio&&this.audio.Pause(),cancelAnimationFrame(this.ticking)},e.prototype.Tick=function(){var e=this;this.Sync(),this.ticking=requestAnimationFrame(function(){return e.Tick()})},e.prototype.Sync=function(){for(;this.video.CurrentChunk;){if(void 0===this.video.CurrentChunk.CurrentCommand&&(this.MoveToNextChunk(),!this.video.CurrentChunk||!this.video.CurrentChunk.CurrentCommand)){this.timer.CurrentTime()>=this.video.Metadata.Length&&this.ReachedEnd();break}if(this.video.CurrentChunk.CurrentCommand.Time>this.timer.CurrentTime())break;this.video.CurrentChunk.CurrentCommand instanceof Command_1.MoveCursor?this.lastMouseMoveState=this.video.CurrentChunk.CurrentCommand:this.video.CurrentChunk.CurrentCommand.Execute(this.events),this.video.CurrentChunk.MoveNextCommand()}null!==this.lastMouseMoveState&&(this.lastMouseMoveState.Execute(this.events),this.lastMouseMoveState=null),null!==this.drawnPath&&this.drawnPath.Draw()},e.prototype.MoveToNextChunk=function(){for(;;){if(this.video.MoveNextChunk(),!this.video.CurrentChunk){this.ReachedEnd();break}if(this.video.CurrentChunk.ExecuteInitCommands(this.events),this.video.CurrentChunk instanceof Chunk_1.PathChunk){this.drawnPath=this.drawer.CreatePath(this.events);var e=this.video.CurrentChunk.Path;this.drawnPath.Segments=e.Segments,this.drawnPath.Color=e.Color,this.drawnSegment=0,e=this.drawnPath}else this.drawnPath=null;if(!(this.video.PeekNextChunk()&&this.video.PeekNextChunk().StartTime<=this.timer.CurrentTime()))break;this.video.CurrentChunk.Render(this.events)}},e.prototype.JumpTo=function(e){var t=this.isPlaying,i=e*this.video.Metadata.Length,n=this.timer.CurrentTime();this.timer.SetTime(i),this.audio.JumpTo(e),this.isPlaying&&this.events.trigger(VideoEvents_1.VideoEventType.Pause);var r=0;r=i>=n?this.video.FastforwardErasedChunksUntil(i):this.video.RewindToLastEraseBefore(i),r!==this.video.CurrentChunkNumber&&(this.video.SetCurrentChunkNumber=r-1,this.MoveToNextChunk()),this.Sync(),this.ui.UpdateCurrentTime(),t===!0&&this.events.trigger(VideoEvents_1.VideoEventType.Start)},e.prototype.RedrawCurrentScreen=function(){var e=this.isPlaying;this.isPlaying&&this.events.trigger(VideoEvents_1.VideoEventType.Pause);var t=0;t=this.video.RewindToLastEraseBefore(this.timer.CurrentTime()),this.video.SetCurrentChunkNumber=t-1,this.MoveToNextChunk(),this.Sync(),e===!0&&this.events.trigger(VideoEvents_1.VideoEventType.Start)},e.prototype.ReachedEnd=function(){this.events.trigger(VideoEvents_1.VideoEventType.ReachEnd)},e.prototype.ClearCavnas=function(e){this.drawer.ClearCanvas(e)},e.prototype.DrawSegment=function(){0===this.drawnSegment?(this.drawnPath.StartDrawingPath(this.drawnPath.Segments[0]),this.drawnSegment++):this.drawnPath.DrawSegment(this.drawnPath.Segments[this.drawnSegment++])},e.prototype.Busy=function(){this.busyLevel++,this.wasPlayingWhenBusy=this.wasPlayingWhenBusy||this.isPlaying,this.events.trigger(VideoEvents_1.VideoEventType.Pause),this.ui.Busy()},e.prototype.Ready=function(){0===--this.busyLevel&&(this.wasPlayingWhenBusy===!0&&(this.events.trigger(VideoEvents_1.VideoEventType.Start),this.wasPlayingWhenBusy=!1),this.ui.Ready())},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Player;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n\n/***/ 27:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var VideoEvents_1=__webpack_require__(1),HTML_1=__webpack_require__(2),Path_1=__webpack_require__(12),CanvasDrawer=function(){function t(t){void 0===t&&(t=!0),this.curved=t}return t.prototype.SetEvents=function(t){this.events=t},t.prototype.CreateCanvas=function(){return this.canvas=HTML_1[\"default\"].CreateElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.canvas},t.prototype.Stretch=function(){var t=this.canvas.parentElement,e=t.clientWidth,i=t.clientHeight;this.originalHeight=i,this.originalWidth=e,HTML_1[\"default\"].SetAttributes(this.canvas,{width:e,height:i}),this.events.trigger(VideoEvents_1.VideoEventType.CanvasSize,e,i)},t.prototype.SetupOutputCorrection=function(t,e){var i=this.canvas.width/t,n=this.canvas.height/e,r=Math.min(i,n);return this.context.scale(r,r),r},t.prototype.ClearCanvas=function(t){this.context.fillStyle=t.CssValue,this.context.fillRect(0,0,this.originalWidth,this.originalHeight)},t.prototype.SetCurrentColor=function(t){this.currentColor=t},t.prototype.CreatePath=function(t){return new Path_1.CanvasPath(t,this.curved,this.currentColor.CssValue,this.context)},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=CanvasDrawer;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n\n/***/ 32:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},VideoEvents_1=__webpack_require__(1),HTML_1=__webpack_require__(2),HelperFunctions_1=__webpack_require__(6),BasicElements_1=__webpack_require__(5),Board_1=__webpack_require__(19),TimeLine_1=__webpack_require__(34),PlayerUI=function(t){function e(e,i){var n=this;t.call(this,\"div\",e+\"-player\"),this.id=e,this.events=i,this.isBusy=!1,this.tickingInterval=200,this.isMuted=!1,this.AddClass(\"vector-video-wrapper\"),this.board=this.CreateBoard(),this.AddChild(this.board),this.events.on(VideoEvents_1.VideoEventType.Start,function(){return n.StartPlaying()}),this.events.on(VideoEvents_1.VideoEventType.Pause,function(){return n.PausePlaying()}),this.events.on(VideoEvents_1.VideoEventType.ReachEnd,function(){return n.ReachedEnd()}),this.events.on(VideoEvents_1.VideoEventType.JumpTo,function(){return n.JumpTo()}),this.events.on(VideoEvents_1.VideoEventType.ClearCanvas,function(t){return n.GetHTML().style.backgroundColor=t.CssValue}),this.isPlaying=!1,this.reachedEnd=!1}return __extends(e,t),e.prototype.CreateControls=function(t){var e=this;this.timeline=this.CreateTimeLine(),this.hidingButton=new BasicElements_1.IconOnlyButton(t?\"icon-show\":\"icon-hide\",\"\",function(t){return e.ToggleAutohiding()}).AddClasses(\"autohiding-toggle\"),this.controls=new BasicElements_1.Panel(\"div\",this.id+\"-controls\").AddClasses(\"ui-controls\",\"ui-control\").AddChildren(this.CreateButtonsPanel(),this.timeline,this.CreateTimeStatus(),this.CreateAudioControls()),!!t&&this.controls.AddClass(\"autohide\"),this.AddChildren(new BasicElements_1.Panel(\"div\").AddClass(\"ui-controls-wrapper\").AddChildren(this.controls,this.hidingButton)),this.events.on(VideoEvents_1.VideoEventType.VideoInfoLoaded,function(t){e.videoDuration=t.Length,e.totalTime.GetHTML().textContent=HelperFunctions_1.millisecondsToString(t.Length),e.timeline.Length=t.Length}),this.events.on(VideoEvents_1.VideoEventType.BufferStatus,function(t){return e.timeline.SetBuffer(1e3*t)}),this.BindKeyboardShortcuts()},e.prototype.SetBusyText=function(t){HTML_1[\"default\"].SetAttributes(this.GetHTML(),{\"data-busy-string\":t})},e.prototype.BindKeyboardShortcuts=function(){var t=this,e=32,i=37,n=39,s=5e3;window.onkeyup=function(o){switch(o.keyCode){case e:t.PlayPause();break;case i:t.timeline.SkipTo(Math.max(0,t.Timer.CurrentTime()-s));break;case n:t.timeline.SkipTo(Math.min(t.Timer.CurrentTime()+s,t.videoDuration))}}},e.prototype.AcceptCanvas=function(t){this.board.GetHTML().appendChild(t)},e.prototype.CreateBoard=function(){var t=this,e=new Board_1[\"default\"](this.id+\"-board\",this.events);return e.GetHTML().onclick=function(){return t.PlayPause()},e},e.prototype.CreateButtonsPanel=function(){var t=this;return this.playPauseButton=new BasicElements_1.IconOnlyButton(\"icon-play\",this.Localization.Play,function(e){return t.PlayPause()}),new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.ControlPlayback),this.playPauseButton).AddClass(\"ui-controls-panel\")},e.prototype.PlayPause=function(){return!this.isBusy&&this.controls?this.reachedEnd?(this.reachedEnd=!1,this.timeline.SkipTo(0),void this.events.trigger(VideoEvents_1.VideoEventType.Start)):void(this.isPlaying===!0?(this.PausePlaying(),this.events.trigger(VideoEvents_1.VideoEventType.Pause)):(this.StartPlaying(),this.events.trigger(VideoEvents_1.VideoEventType.Start))):void 0},e.prototype.JumpTo=function(){this.controls&&this.reachedEnd===!0&&(this.reachedEnd=!1,this.playPauseButton.ChangeIcon(\"icon-play\"))},e.prototype.StartPlaying=function(){var t=this;this.controls&&this.isPlaying===!1&&(this.isPlaying=!0,this.playPauseButton.ChangeIcon(\"icon-pause\"),this.playPauseButton.ChangeContent(this.Localization.Pause),this.AddClass(\"playing\"),this.ticking=setInterval(function(){return t.UpdateCurrentTime()},this.tickingInterval))},e.prototype.PausePlaying=function(){this.controls&&(this.isPlaying=!1,this.playPauseButton.ChangeIcon(\"icon-play\"),this.playPauseButton.ChangeContent(this.Localization.Play),this.RemoveClass(\"playing\"),clearInterval(this.ticking))},e.prototype.CreateTimeLine=function(){return new TimeLine_1[\"default\"](this.id+\"-timeline\",this.events)},e.prototype.CreateTimeStatus=function(){return this.currentTime=new BasicElements_1.SimpleElement(\"span\",\"0:00\"),this.totalTime=new BasicElements_1.SimpleElement(\"span\",\"0:00\"),new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.TimeStatus),new BasicElements_1.Panel(\"div\").AddChildren(this.currentTime,new BasicElements_1.SimpleElement(\"span\",\" / \"),this.totalTime).AddClass(\"ui-time\")).AddClass(\"ui-controls-panel\")},e.prototype.UpdateCurrentTime=function(t){this.currentTime.GetHTML().textContent=HelperFunctions_1.millisecondsToString(t?t:this.Timer.CurrentTime()),this.timeline.Sync(t?t:this.Timer.CurrentTime())},e.prototype.ReachedEnd=function(){this.controls&&(this.PausePlaying(),this.playPauseButton.ChangeIcon(\"icon-replay\").ChangeContent(this.Localization.Replay),this.reachedEnd=!0,this.UpdateCurrentTime())},e.prototype.Busy=function(){this.AddClass(\"busy\"),this.isBusy=!0},e.prototype.Ready=function(){this.RemoveClass(\"busy\"),this.isBusy=!1},e.prototype.CreateAudioControls=function(){var t=this;return new BasicElements_1.Panel(\"div\",this.id+\"-audio\").AddChildren(new BasicElements_1.H2(this.Localization.VolumeControl),new BasicElements_1.Panel(\"div\",this.id+\"-audio-controls\").AddChildren(this.volumeDownBtn=new BasicElements_1.IconOnlyButton(\"icon-volume-down\",this.Localization.VolumeDown,function(e){return t.VolumeDown()}),this.volumeUpBtn=new BasicElements_1.IconOnlyButton(\"icon-volume-up\",this.Localization.VolumeUp,function(e){return t.VolumeUp()}),this.volumeOffBtn=new BasicElements_1.IconOnlyButton(\"icon-volume-off\",this.Localization.Mute,function(e){return t.Mute()})).AddClass(\"btn-group\")).AddClasses(\"ui-controls-panel\",\"vector-video-audio-controls\")},e.prototype.VolumeUp=function(){this.events.trigger(VideoEvents_1.VideoEventType.VolumeUp)},e.prototype.VolumeDown=function(){this.events.trigger(VideoEvents_1.VideoEventType.VolumeDown)},e.prototype.Mute=function(){this.isMuted?(this.volumeDownBtn.GetHTML().removeAttribute(\"disabled\"),this.volumeUpBtn.GetHTML().removeAttribute(\"disabled\"),this.volumeOffBtn.RemoveClass(\"active\")):(HTML_1[\"default\"].SetAttributes(this.volumeDownBtn.GetHTML(),{disabled:\"disabled\"}),HTML_1[\"default\"].SetAttributes(this.volumeUpBtn.GetHTML(),{disabled:\"disabled\"}),this.volumeOffBtn.AddClass(\"active\")),this.isMuted=!this.isMuted,this.events.trigger(VideoEvents_1.VideoEventType.Mute)},e.prototype.ToggleAutohiding=function(){this.controls.HasClass(\"autohide\")?(this.controls.RemoveClass(\"autohide\"),this.hidingButton.ChangeIcon(\"icon-hide\")):(this.controls.AddClass(\"autohide\"),this.hidingButton.ChangeIcon(\"icon-show\"))},e}(BasicElements_1.Panel);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=PlayerUI;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n\n/***/ 34:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},VideoEvents_1=__webpack_require__(1),BasicElements_1=__webpack_require__(5),HelperFunctions_1=__webpack_require__(6),TimeLine=function(t){function e(e,i){var n=this;t.call(this,\"div\",e),this.events=i,this.length=0,this.GetHTML().classList.add(\"ui-progressbar\");var s=new BasicElements_1.Panel(\"div\");s.AddClass(\"ui-progress\"),s.AddChild(new BasicElements_1.SimpleElement(\"div\").AddClass(\"ui-current-time\")),this.progresbar=s,this.AddChild(s),s=null;var r=new BasicElements_1.SimpleElement(\"div\");r.AddClass(\"ui-buffer\"),this.bufferbar=r,this.AddChild(r),r=null,this.arrow=new BasicElements_1.SimpleElement(\"div\",\"0:00\"),this.arrow.AddClass(\"ui-arrow\"),this.AddChild(this.arrow),this.Sync(0),this.GetHTML().onclick=function(t){return n.OnClick(t)},this.GetHTML().onmousemove=function(t){return n.OnMouseMove(t)}}return __extends(e,t),Object.defineProperty(e.prototype,\"Length\",{set:function(t){this.length=t},enumerable:!0,configurable:!0}),e.prototype.OnClick=function(t){var e=(t.clientX-this.GetHTML().clientLeft)/this.GetHTML().clientWidth*this.length;this.SkipTo(e)},e.prototype.OnMouseMove=function(t){var e=(t.clientX-this.GetHTML().clientLeft)/this.GetHTML().clientWidth,i=HelperFunctions_1.millisecondsToString(e*this.length);this.arrow.GetHTML().textContent=i,this.arrow.GetHTML().style.left=100*e+\"%\";var n=this.arrow.GetHTML().getBoundingClientRect();n.left<0?this.arrow.GetHTML().style.left=n.width/2+\"px\":n.right>this.GetHTML().getBoundingClientRect().right&&(this.arrow.GetHTML().style.left=this.GetHTML().getBoundingClientRect().right-n.width/2+\"px\")},e.prototype.Sync=function(t){this.progresbar.GetHTML().style.width=this.length>0?t/this.length*100+\"%\":\"O%\"},e.prototype.SetBuffer=function(t){this.bufferbar.GetHTML().style.width=this.length>0?t/this.length*100+\"%\":\"O%\"},e.prototype.SkipTo=function(t){this.events.trigger(VideoEvents_1.VideoEventType.JumpTo,t/this.length),this.Sync(t)},e}(BasicElements_1.Panel);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=TimeLine;\n\t//# sourceMappingURL=out.map.js\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** player.js\n **/","'use strict';\n\nvar AudioPlayer_1 = require('./AudioData/AudioPlayer');\nvar VideoEvents_1 = require('./Helpers/VideoEvents');\nvar Errors_1 = require('./Helpers/Errors');\nvar PlayerUI_1 = require('./UI/PlayerUI');\nvar VideoTimer_1 = require('./Helpers/VideoTimer');\nvar CanvasDrawer_1 = require('./Drawing/CanvasDrawer');\nvar Command_1 = require('./VideoData/Command');\nvar Chunk_1 = require('./VideoData/Chunk');\nvar File_1 = require('./Helpers/File');\nvar IO_1 = require('./VideoFormat/SVGAnimation/IO');\nvar Player = (function () {\n    function Player(id, settings) {\n        var _this = this;\n        this.settings = settings;\n        this.lastMouseMoveState = null;\n        this.events = new VideoEvents_1['default']();\n        var container = document.getElementById(id);\n        if (!container) {\n            Errors_1['default'].Report(Errors_1.ErrorType.Fatal, \"Container #\" + id + \" doesn't exist. Video Player couldn't be initialised.\");\n        }\n        while (!!container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n        if (!settings.Localization) {\n            var loc = {\n                NoJS: \"Your browser does not support JavaScript or it is turned off. Video can't be recorded without enabled JavaScript in your browser.\",\n                DataLoadingFailed: \"Unfortunatelly, downloading data failed.\",\n                DataIsCorrupted: \"This video can't be played, the data is corrupted.\",\n                ControlPlayback: \"Play/Pause video\",\n                Play: \"Play\",\n                Pause: \"Pause\",\n                Replay: \"Replay\",\n                TimeStatus: \"Video progress\",\n                VolumeControl: \"Volume controls\",\n                VolumeUp: \"Volume up\",\n                VolumeDown: \"Volume down\",\n                Mute: \"Mute\",\n                Busy: \"Loading...\"\n            };\n            settings.Localization = loc;\n        }\n        this.timer = new VideoTimer_1['default'](false);\n        this.ui = !!settings.UI ? settings.UI : new PlayerUI_1['default'](id, this.events);\n        this.ui.Timer = this.timer;\n        this.ui.Localization = settings.Localization;\n        if (!!settings.ShowControls) {\n            this.ui.CreateControls(!!settings.Autohide);\n        }\n        this.drawer = !!settings.DrawingStrategy ? settings.DrawingStrategy : new CanvasDrawer_1['default'](true);\n        this.drawer.SetEvents(this.events);\n        this.ui.AcceptCanvas(this.drawer.CreateCanvas());\n        container.appendChild(this.ui.GetHTML());\n        this.events.on(VideoEvents_1.VideoEventType.Start, function () {\n            return _this.Play();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Pause, function () {\n            return _this.Pause();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ReachEnd, function () {\n            return _this.Pause();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ClearCanvas, function (color) {\n            return _this.ClearCavnas(color);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ChangeColor, function (color) {\n            return _this.drawer.SetCurrentColor(color);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.JumpTo, function (progress) {\n            return _this.JumpTo(progress);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.DrawSegment, function () {\n            return _this.DrawSegment();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.DrawPath, function (path) {\n            _this.drawnPath.DrawWholePath();\n            _this.drawnPath = null;\n        });\n        this.busyLevel = 0;\n        this.events.on(VideoEvents_1.VideoEventType.Busy, function () {\n            return _this.Busy();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Ready, function () {\n            return _this.Ready();\n        });\n        this.ui.SetBusyText(settings.Localization.Busy);\n        this.events.trigger(VideoEvents_1.VideoEventType.Busy);\n        File_1['default'].ReadFileAsync(settings.Source, function (file) {\n            _this.ProcessVideoData(file);\n            _this.MonitorResize(container);\n            window.onresize = function () {\n                return _this.MonitorResize(container);\n            };\n        }, function (errStatusCode) {\n            Errors_1['default'].Report(Errors_1.ErrorType.Warning, _this.settings.Localization.DataLoadingFailed);\n            _this.ui.SetBusyText(settings.Localization.DataLoadingFailed);\n        });\n    }\n    Object.defineProperty(Player.prototype, \"Events\", {\n        get: function get() {\n            return this.events;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Player.prototype.MonitorResize = function (container) {\n        var rect = container.getBoundingClientRect();\n        if (rect.width !== this.oldWidth || rect.height !== this.oldHeight) {\n            this.drawer.Stretch();\n            var scalingFactor = this.drawer.SetupOutputCorrection(this.video.Metadata.Width, this.video.Metadata.Height);\n            this.events.trigger(VideoEvents_1.VideoEventType.CanvasScalingFactor, scalingFactor);\n            if (!!this.video) {\n                this.RedrawCurrentScreen();\n            }\n            this.oldWidth = rect.width;\n            this.oldHeight = rect.height;\n        }\n    };\n    Player.prototype.ProcessVideoData = function (data) {\n        try {\n            var reader = !!this.settings.VideoFormat ? this.settings.VideoFormat : new IO_1['default']();\n            this.video = reader.LoadVideo(this.events, data);\n            reader = null;\n            this.audio = new AudioPlayer_1['default'](this.events, this.video.Metadata.AudioTracks);\n        } catch (e) {\n            reader = null;\n            this.video = null;\n            this.audio = null;\n            this.ui.SetBusyText(this.settings.Localization.DataIsCorrupted);\n            return;\n        }\n        this.events.trigger(VideoEvents_1.VideoEventType.VideoInfoLoaded, this.video.Metadata);\n        this.video.RewindMinusOne();\n        this.MoveToNextChunk();\n        this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n        if (!!this.settings.Autoplay) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    Player.prototype.Play = function () {\n        var _this = this;\n        this.isPlaying = true;\n        this.timer.Resume();\n        !!this.audio && this.audio.Play();\n        this.ticking = requestAnimationFrame(function () {\n            return _this.Tick();\n        });\n    };\n    Player.prototype.Pause = function () {\n        this.timer.Pause();\n        this.isPlaying = false;\n        !!this.audio && this.audio.Pause();\n        cancelAnimationFrame(this.ticking);\n    };\n    Player.prototype.Tick = function () {\n        var _this = this;\n        this.Sync();\n        this.ticking = requestAnimationFrame(function () {\n            return _this.Tick();\n        });\n    };\n    Player.prototype.Sync = function () {\n        while (!!this.video.CurrentChunk) {\n            if (this.video.CurrentChunk.CurrentCommand === undefined) {\n                this.MoveToNextChunk();\n                if (!this.video.CurrentChunk || !this.video.CurrentChunk.CurrentCommand) {\n                    if (this.timer.CurrentTime() >= this.video.Metadata.Length) {\n                        this.ReachedEnd();\n                    }\n                    break;\n                }\n            }\n            if (this.video.CurrentChunk.CurrentCommand.Time > this.timer.CurrentTime()) {\n                break;\n            }\n            if (this.video.CurrentChunk.CurrentCommand instanceof Command_1.MoveCursor) {\n                this.lastMouseMoveState = this.video.CurrentChunk.CurrentCommand;\n            } else {\n                this.video.CurrentChunk.CurrentCommand.Execute(this.events);\n            }\n            this.video.CurrentChunk.MoveNextCommand();\n        }\n        if (this.lastMouseMoveState !== null) {\n            this.lastMouseMoveState.Execute(this.events);\n            this.lastMouseMoveState = null;\n        }\n        if (this.drawnPath !== null) {\n            this.drawnPath.Draw();\n        }\n    };\n    Player.prototype.MoveToNextChunk = function () {\n        do {\n            this.video.MoveNextChunk();\n            if (!this.video.CurrentChunk) {\n                this.ReachedEnd();\n                break;\n            }\n            this.video.CurrentChunk.ExecuteInitCommands(this.events);\n            if (this.video.CurrentChunk instanceof Chunk_1.PathChunk) {\n                this.drawnPath = this.drawer.CreatePath(this.events);\n                var path = this.video.CurrentChunk.Path;\n                this.drawnPath.Segments = path.Segments;\n                this.drawnPath.Color = path.Color;\n                this.drawnSegment = 0;\n                path = this.drawnPath;\n            } else {\n                this.drawnPath = null;\n            }\n            if (this.video.PeekNextChunk() && this.video.PeekNextChunk().StartTime <= this.timer.CurrentTime()) {\n                this.video.CurrentChunk.Render(this.events);\n            } else {\n                break;\n            }\n        } while (true);\n    };\n    Player.prototype.JumpTo = function (progress) {\n        var wasPlaying = this.isPlaying;\n        var time = progress * this.video.Metadata.Length;\n        var videoTime = this.timer.CurrentTime();\n        this.timer.SetTime(time);\n        this.audio.JumpTo(progress);\n        if (this.isPlaying) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        }\n        var startChunk = 0;\n        if (time >= videoTime) {\n            startChunk = this.video.FastforwardErasedChunksUntil(time);\n        } else {\n            startChunk = this.video.RewindToLastEraseBefore(time);\n        }\n        if (startChunk !== this.video.CurrentChunkNumber) {\n            this.video.SetCurrentChunkNumber = startChunk - 1;\n            this.MoveToNextChunk();\n        }\n        this.Sync();\n        this.ui.UpdateCurrentTime();\n        if (wasPlaying === true) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    Player.prototype.RedrawCurrentScreen = function () {\n        var wasPlaying = this.isPlaying;\n        if (this.isPlaying) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        }\n        var startChunk = 0;\n        startChunk = this.video.RewindToLastEraseBefore(this.timer.CurrentTime());\n        this.video.SetCurrentChunkNumber = startChunk - 1;\n        this.MoveToNextChunk();\n        this.Sync();\n        if (wasPlaying === true) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    Player.prototype.ReachedEnd = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.ReachEnd);\n    };\n    Player.prototype.ClearCavnas = function (color) {\n        this.drawer.ClearCanvas(color);\n    };\n    Player.prototype.DrawSegment = function () {\n        if (this.drawnSegment === 0) {\n            this.drawnPath.StartDrawingPath(this.drawnPath.Segments[0]);\n            this.drawnSegment++;\n        } else {\n            this.drawnPath.DrawSegment(this.drawnPath.Segments[this.drawnSegment++]);\n        }\n    };\n    Player.prototype.Busy = function () {\n        this.busyLevel++;\n        this.wasPlayingWhenBusy = this.wasPlayingWhenBusy || this.isPlaying;\n        this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        this.ui.Busy();\n    };\n    Player.prototype.Ready = function () {\n        if (--this.busyLevel === 0) {\n            if (this.wasPlayingWhenBusy === true) {\n                this.events.trigger(VideoEvents_1.VideoEventType.Start);\n                this.wasPlayingWhenBusy = false;\n            }\n            this.ui.Ready();\n        }\n    };\n    return Player;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Player;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Player.ts\n **/","'use strict';\n\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar Path_1 = require('./Path');\nvar CanvasDrawer = (function () {\n    function CanvasDrawer(curved) {\n        if (curved === void 0) {\n            curved = true;\n        }\n        this.curved = curved;\n    }\n    CanvasDrawer.prototype.SetEvents = function (events) {\n        this.events = events;\n    };\n    CanvasDrawer.prototype.CreateCanvas = function () {\n        this.canvas = HTML_1['default'].CreateElement(\"canvas\");\n        this.context = this.canvas.getContext(\"2d\");\n        return this.canvas;\n    };\n    CanvasDrawer.prototype.Stretch = function () {\n        var parent = this.canvas.parentElement;\n        var width = parent.clientWidth;\n        var height = parent.clientHeight;\n        this.originalHeight = height;\n        this.originalWidth = width;\n        HTML_1['default'].SetAttributes(this.canvas, {\n            width: width,\n            height: height\n        });\n        this.events.trigger(VideoEvents_1.VideoEventType.CanvasSize, width, height);\n    };\n    CanvasDrawer.prototype.SetupOutputCorrection = function (sourceWidth, sourceHeight) {\n        var wr = this.canvas.width / sourceWidth;\n        var hr = this.canvas.height / sourceHeight;\n        var min = Math.min(wr, hr);\n        this.context.scale(min, min);\n        return min;\n    };\n    CanvasDrawer.prototype.ClearCanvas = function (color) {\n        this.context.fillStyle = color.CssValue;\n        this.context.fillRect(0, 0, this.originalWidth, this.originalHeight);\n    };\n    CanvasDrawer.prototype.SetCurrentColor = function (color) {\n        this.currentColor = color;\n    };\n    CanvasDrawer.prototype.CreatePath = function (events) {\n        return new Path_1.CanvasPath(events, this.curved, this.currentColor.CssValue, this.context);\n    };\n    return CanvasDrawer;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = CanvasDrawer;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Drawing/CanvasDrawer.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar HelperFunctions_1 = require('../Helpers/HelperFunctions');\nvar BasicElements_1 = require('./BasicElements');\nvar Board_1 = require('./Board');\nvar TimeLine_1 = require('./TimeLine');\nvar PlayerUI = (function (_super) {\n    __extends(PlayerUI, _super);\n    function PlayerUI(id, events) {\n        var _this = this;\n        _super.call(this, \"div\", id + \"-player\");\n        this.id = id;\n        this.events = events;\n        this.isBusy = false;\n        this.tickingInterval = 200;\n        this.isMuted = false;\n        this.AddClass(\"vector-video-wrapper\");\n        this.board = this.CreateBoard();\n        this.AddChild(this.board);\n        this.events.on(VideoEvents_1.VideoEventType.Start, function () {\n            return _this.StartPlaying();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Pause, function () {\n            return _this.PausePlaying();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ReachEnd, function () {\n            return _this.ReachedEnd();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.JumpTo, function () {\n            return _this.JumpTo();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ClearCanvas, function (c) {\n            return _this.GetHTML().style.backgroundColor = c.CssValue;\n        });\n        this.isPlaying = false;\n        this.reachedEnd = false;\n    }\n    PlayerUI.prototype.CreateControls = function (autohide) {\n        var _this = this;\n        this.timeline = this.CreateTimeLine();\n        this.hidingButton = new BasicElements_1.IconOnlyButton(autohide ? \"icon-show\" : \"icon-hide\", \"\", function (e) {\n            return _this.ToggleAutohiding();\n        }).AddClasses(\"autohiding-toggle\");\n        this.controls = new BasicElements_1.Panel(\"div\", this.id + \"-controls\").AddClasses(\"ui-controls\", \"ui-control\").AddChildren(this.CreateButtonsPanel(), this.timeline, this.CreateTimeStatus(), this.CreateAudioControls());\n        !!autohide && this.controls.AddClass(\"autohide\");\n        this.AddChildren(new BasicElements_1.Panel(\"div\").AddClass(\"ui-controls-wrapper\").AddChildren(this.controls, this.hidingButton));\n        this.events.on(VideoEvents_1.VideoEventType.VideoInfoLoaded, function (meta) {\n            _this.videoDuration = meta.Length;\n            _this.totalTime.GetHTML().textContent = HelperFunctions_1.millisecondsToString(meta.Length);\n            _this.timeline.Length = meta.Length;\n        });\n        this.events.on(VideoEvents_1.VideoEventType.BufferStatus, function (seconds) {\n            return _this.timeline.SetBuffer(seconds * 1000);\n        });\n        this.BindKeyboardShortcuts();\n    };\n    PlayerUI.prototype.SetBusyText = function (text) {\n        HTML_1['default'].SetAttributes(this.GetHTML(), { \"data-busy-string\": text });\n    };\n    PlayerUI.prototype.BindKeyboardShortcuts = function () {\n        var _this = this;\n        var spacebar = 32;\n        var leftArrow = 37;\n        var rightArrow = 39;\n        var skipTime = 5000;\n        window.onkeyup = function (e) {\n            switch (e.keyCode) {\n                case spacebar:\n                    _this.PlayPause();\n                    break;\n                case leftArrow:\n                    _this.timeline.SkipTo(Math.max(0, _this.Timer.CurrentTime() - skipTime));\n                    break;\n                case rightArrow:\n                    _this.timeline.SkipTo(Math.min(_this.Timer.CurrentTime() + skipTime, _this.videoDuration));\n                    break;\n            }\n        };\n    };\n    PlayerUI.prototype.AcceptCanvas = function (canvas) {\n        this.board.GetHTML().appendChild(canvas);\n    };\n    PlayerUI.prototype.CreateBoard = function () {\n        var _this = this;\n        var board = new Board_1['default'](this.id + \"-board\", this.events);\n        board.GetHTML().onclick = function () {\n            return _this.PlayPause();\n        };\n        return board;\n    };\n    PlayerUI.prototype.CreateButtonsPanel = function () {\n        var _this = this;\n        this.playPauseButton = new BasicElements_1.IconOnlyButton(\"icon-play\", this.Localization.Play, function (e) {\n            return _this.PlayPause();\n        });\n        return new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.ControlPlayback), this.playPauseButton).AddClass(\"ui-controls-panel\");\n    };\n    PlayerUI.prototype.PlayPause = function () {\n        if (this.isBusy || !this.controls) return;\n        if (this.reachedEnd) {\n            this.reachedEnd = false;\n            this.timeline.SkipTo(0);\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n            return;\n        }\n        if (this.isPlaying === true) {\n            this.PausePlaying();\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        } else {\n            this.StartPlaying();\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    PlayerUI.prototype.JumpTo = function () {\n        if (!this.controls) return;\n        if (this.reachedEnd === true) {\n            this.reachedEnd = false;\n            this.playPauseButton.ChangeIcon(\"icon-play\");\n        }\n    };\n    PlayerUI.prototype.StartPlaying = function () {\n        var _this = this;\n        if (!this.controls) return;\n        if (this.isPlaying === false) {\n            this.isPlaying = true;\n            this.playPauseButton.ChangeIcon(\"icon-pause\");\n            this.playPauseButton.ChangeContent(this.Localization.Pause);\n            this.AddClass(\"playing\");\n            this.ticking = setInterval(function () {\n                return _this.UpdateCurrentTime();\n            }, this.tickingInterval);\n        }\n    };\n    PlayerUI.prototype.PausePlaying = function () {\n        if (!this.controls) return;\n        this.isPlaying = false;\n        this.playPauseButton.ChangeIcon(\"icon-play\");\n        this.playPauseButton.ChangeContent(this.Localization.Play);\n        this.RemoveClass(\"playing\");\n        clearInterval(this.ticking);\n    };\n    PlayerUI.prototype.CreateTimeLine = function () {\n        return new TimeLine_1['default'](this.id + \"-timeline\", this.events);\n    };\n    PlayerUI.prototype.CreateTimeStatus = function () {\n        this.currentTime = new BasicElements_1.SimpleElement(\"span\", \"0:00\");\n        this.totalTime = new BasicElements_1.SimpleElement(\"span\", \"0:00\");\n        return new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.TimeStatus), new BasicElements_1.Panel(\"div\").AddChildren(this.currentTime, new BasicElements_1.SimpleElement(\"span\", \" / \"), this.totalTime).AddClass(\"ui-time\")).AddClass(\"ui-controls-panel\");\n    };\n    PlayerUI.prototype.UpdateCurrentTime = function (time) {\n        this.currentTime.GetHTML().textContent = HelperFunctions_1.millisecondsToString(!!time ? time : this.Timer.CurrentTime());\n        this.timeline.Sync(!!time ? time : this.Timer.CurrentTime());\n    };\n    PlayerUI.prototype.ReachedEnd = function () {\n        if (!this.controls) return;\n        this.PausePlaying();\n        this.playPauseButton.ChangeIcon(\"icon-replay\").ChangeContent(this.Localization.Replay);\n        this.reachedEnd = true;\n        this.UpdateCurrentTime();\n    };\n    PlayerUI.prototype.Busy = function () {\n        this.AddClass(\"busy\");\n        this.isBusy = true;\n    };\n    PlayerUI.prototype.Ready = function () {\n        this.RemoveClass(\"busy\");\n        this.isBusy = false;\n    };\n    PlayerUI.prototype.CreateAudioControls = function () {\n        var _this = this;\n        return new BasicElements_1.Panel(\"div\", this.id + \"-audio\").AddChildren(new BasicElements_1.H2(this.Localization.VolumeControl), new BasicElements_1.Panel(\"div\", this.id + \"-audio-controls\").AddChildren(this.volumeDownBtn = new BasicElements_1.IconOnlyButton(\"icon-volume-down\", this.Localization.VolumeDown, function (e) {\n            return _this.VolumeDown();\n        }), this.volumeUpBtn = new BasicElements_1.IconOnlyButton(\"icon-volume-up\", this.Localization.VolumeUp, function (e) {\n            return _this.VolumeUp();\n        }), this.volumeOffBtn = new BasicElements_1.IconOnlyButton(\"icon-volume-off\", this.Localization.Mute, function (e) {\n            return _this.Mute();\n        })).AddClass(\"btn-group\")).AddClasses(\"ui-controls-panel\", \"vector-video-audio-controls\");\n    };\n    PlayerUI.prototype.VolumeUp = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.VolumeUp);\n    };\n    PlayerUI.prototype.VolumeDown = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.VolumeDown);\n    };\n    PlayerUI.prototype.Mute = function () {\n        if (!this.isMuted) {\n            HTML_1['default'].SetAttributes(this.volumeDownBtn.GetHTML(), { disabled: \"disabled\" });\n            HTML_1['default'].SetAttributes(this.volumeUpBtn.GetHTML(), { disabled: \"disabled\" });\n            this.volumeOffBtn.AddClass(\"active\");\n        } else {\n            this.volumeDownBtn.GetHTML().removeAttribute(\"disabled\");\n            this.volumeUpBtn.GetHTML().removeAttribute(\"disabled\");\n            this.volumeOffBtn.RemoveClass(\"active\");\n        }\n        this.isMuted = !this.isMuted;\n        this.events.trigger(VideoEvents_1.VideoEventType.Mute);\n    };\n    PlayerUI.prototype.ToggleAutohiding = function () {\n        if (this.controls.HasClass(\"autohide\")) {\n            this.controls.RemoveClass(\"autohide\");\n            this.hidingButton.ChangeIcon(\"icon-hide\");\n        } else {\n            this.controls.AddClass(\"autohide\");\n            this.hidingButton.ChangeIcon(\"icon-show\");\n        }\n    };\n    return PlayerUI;\n})(BasicElements_1.Panel);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = PlayerUI;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/PlayerUI.ts\n **/","/// <references path=\"BasicElements\" />\n/// <references path=\"../Helpers/VideoEvents\" />\n/// <reference path=\"./BasicElements\" />\n'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar BasicElements_1 = require('./BasicElements');\nvar HelperFunctions_1 = require('../Helpers/HelperFunctions');\nvar TimeLine = (function (_super) {\n    __extends(TimeLine, _super);\n    function TimeLine(id, events) {\n        var _this = this;\n        _super.call(this, \"div\", id);\n        this.events = events;\n        this.length = 0;\n        this.GetHTML().classList.add(\"ui-progressbar\");\n        var bar = new BasicElements_1.Panel(\"div\");\n        bar.AddClass(\"ui-progress\");\n        bar.AddChild(new BasicElements_1.SimpleElement(\"div\").AddClass(\"ui-current-time\"));\n        this.progresbar = bar;\n        this.AddChild(bar);\n        bar = null;\n        var buffer = new BasicElements_1.SimpleElement(\"div\");\n        buffer.AddClass(\"ui-buffer\");\n        this.bufferbar = buffer;\n        this.AddChild(buffer);\n        buffer = null;\n        this.arrow = new BasicElements_1.SimpleElement(\"div\", \"0:00\");\n        this.arrow.AddClass(\"ui-arrow\");\n        this.AddChild(this.arrow);\n        this.Sync(0);\n        this.GetHTML().onclick = function (e) {\n            return _this.OnClick(e);\n        };\n        this.GetHTML().onmousemove = function (e) {\n            return _this.OnMouseMove(e);\n        };\n    }\n    Object.defineProperty(TimeLine.prototype, \"Length\", {\n        set: function set(length) {\n            this.length = length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TimeLine.prototype.OnClick = function (e) {\n        var time = (e.clientX - this.GetHTML().clientLeft) / this.GetHTML().clientWidth * this.length;\n        this.SkipTo(time);\n    };\n    TimeLine.prototype.OnMouseMove = function (e) {\n        var progress = (e.clientX - this.GetHTML().clientLeft) / this.GetHTML().clientWidth;\n        var time = HelperFunctions_1.millisecondsToString(progress * this.length);\n        this.arrow.GetHTML().textContent = time;\n        this.arrow.GetHTML().style.left = progress * 100 + \"%\";\n        var rect = this.arrow.GetHTML().getBoundingClientRect();\n        if (rect.left < 0) {\n            this.arrow.GetHTML().style.left = rect.width / 2 + \"px\";\n        } else if (rect.right > this.GetHTML().getBoundingClientRect().right) {\n            this.arrow.GetHTML().style.left = this.GetHTML().getBoundingClientRect().right - rect.width / 2 + \"px\";\n        }\n    };\n    TimeLine.prototype.Sync = function (time) {\n        this.progresbar.GetHTML().style.width = this.length > 0 ? time / this.length * 100 + \"%\" : \"O%\";\n    };\n    TimeLine.prototype.SetBuffer = function (time) {\n        this.bufferbar.GetHTML().style.width = this.length > 0 ? time / this.length * 100 + \"%\" : \"O%\";\n    };\n    TimeLine.prototype.SkipTo = function (time) {\n        this.events.trigger(VideoEvents_1.VideoEventType.JumpTo, time / this.length);\n        this.Sync(time);\n    };\n    return TimeLine;\n})(BasicElements_1.Panel);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = TimeLine;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/TimeLine.ts\n **/"],"sourceRoot":""}