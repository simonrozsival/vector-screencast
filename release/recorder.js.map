{"version":3,"sources":["webpack:///recorder.js","webpack:///./src/VectorScreencast/Recorder.ts","webpack:///./src/VectorScreencast/VideoData/PointingDevice.ts","webpack:///./src/VectorScreencast/VideoData/Mouse.ts","webpack:///./src/VectorScreencast/VideoData/Touch.ts","webpack:///./src/VectorScreencast/AudioData/AudioRecorder.ts","webpack:///./src/VectorScreencast/Drawing/DynaDraw.ts","webpack:///./src/VectorScreencast/Drawing/SVGDrawer.ts","webpack:///./src/VectorScreencast/UI/Buttons.ts","webpack:///./src/VectorScreencast/UI/RecorderUI.ts","webpack:///./src/VectorScreencast/VideoData/AppleForceTouch.ts","webpack:///./src/VectorScreencast/VideoData/Pointer.ts","webpack:///./src/VectorScreencast/VideoData/WacomTablet.ts"],"names":["webpackJsonp","module","exports","__webpack_require__","Video_1","DynaDraw_1","SVGDrawer_1","PointingDevice_1","Chunk_1","Command_1","AudioRecorder_1","Errors_1","VideoEvents_1","VideoTimer_1","Metadata_1","RecorderUI_1","Color_1","Brush_1","File_1","IO_1","Recorder","id","settings","_this","this","events","isRecording","timer","recordingBlocked","data","lastEraseData","recordAllRawData","undefined","RecordAllRawData","DefaultBackgroundColor","BackgroundColor","DefaultBrushColor","ForegroundColor","container","document","getElementById","Report","ErrorType","Fatal","firstChild","removeChild","ColorPallete","length","colors","push","indexOf","BrushSizes","brushes","Localization","loc","NoJS","Busy","RecPause","Record","Pause","Upload","UploadInProgress","ChangeColor","ChangeSize","Erase","EraseAll","WaitingText","UploadWasSuccessful","RedirectPrompt","UploadFailure","FailureApology","AudioRecording","AudioRecordingAvailable","AudioRecordingUnavailable","on","VideoEventType","ChangeBrushSize","size","color","CursorState","state","ProcessCursorState","ClearCanvas","Start","StartUpload","busyLevel","Ready","StartPath","path","PushChunk","PathChunk","CurrentTime","CurrentChunk","PushCommand","DrawNextSegment","DrawSegment","min","reduce","previousValue","currentValue","index","arr","Size","max","drawer","DrawingStrategy","SetEvents","dynaDraw","CreatePath","DisableDynamicLineWidth","ui","UI","Timer","SetBusyText","CreateHTML","Autohide","canvas","CreateCanvas","AcceptCanvas","appendChild","GetHTML","Stretch","pointer","SelectBestMethod","Audio","audioRecorder","Init","trigger","Object","defineProperty","prototype","get","enumerable","configurable","VoidChunk","Resume","info","Length","Width","Height","AudioTracks","Metadata","Stop","files","UploadData","FinishRecording","SetBrushSize","ChangeBrushColor","SetCurrentColor","MoveCursor","X","Y","Pressure","ObserveCursorMovement","time","EraseChunk","chunk","wasRecordingWhenBusy","writer","VideoFormat","videoBlob","SaveVideo","console","log","DownloadData","Download","GetExtension","formData","FormData","append","req","XMLHttpRequest","open","UploadURL","onerror","e","onload","response","JSON","parse","status","hasOwnProperty","success","url","redirect","send","confirm","window","location","replace","alert","value","State_1","WacomTablet_1","Pointer_1","AppleForceTouch_1","Touch_1","PointingDevice","board","isHoveringOverUIControl","device","wacomApi","IsAvailable","isAvailable","InitControlsAvoiding","getCursor","cursor","controls","getElementsByClassName","i","element","onmouseover","onmouseout","GetPressure","isDown","isInside","onMove","getCursorPosition","ReportAction","onDown","onUp","onLeave","onOver","onLooseFocus","clientX","clientY","x","y","__extends","d","b","__","constructor","p","create","Mouse","_super","call","onmousemove","onMouseMove","onmousedown","onMouseDown","onmouseup","onMouseUp","onmouseleave","onMouseLeave","onmouseenter","onMouseEnter","onMouseOver","buttons","Mouse_1","TouchEventsAPI","addEventListener","ev","TouchStart","TouchEnd","TouchLeave","TouchMove","event","preventDefault","touches","changedTouches","touch","currentTouch","identifier","filterTouch","touchList","AudioPlayer_1","AudioRecorder","config","recording","initSuccessful","doNotStartRecording","host","port","recordingWorkerPath","muted","MuteAudioRecording","error","msg","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","context","AudioContext","video","audio","localMediaStream","input","createMediaStreamSource","bufferSize","scriptProcessorNode","createScriptProcessor","onaudioprocess","processData","connect","destination","CreateAudioProcessor","RegisterRecordingTool","err","name","Warning","processorType","cfg","Worker","recordingWorker","onmessage","ReceiveMessageFromWorker","postMessage","cmd","AudioProcessorType","Continue","left","inputBuffer","getChannelData","type","WorkerNetworkError","WorkerFinished","terminate","RecordingToolFinished","sources","file","source","AudioSource","StringToType","Vector_1","DynaDraw","pathFactory","slowSimulation","minBrushSize","maxBrushSize","minMass","maxMass","minFriction","maxFriction","oneFrame","BrushTip","requestAnimationFrame","lastAnimationTime","Tick","TickWhile","currentBrushSize","interpolateMass","brushSize","interpolateFriction","GetBrush","BrushInstance","nextPoint","lastState","NextPoint","EndPath","position","pressure","Reset","d2","step","ApplyForce","Draw","Threshold","mass","friction","Velocity","calculateSpeed","brush","clone","startPosition","previousPosition","previousPressure","mousePosition","acceleration","velocity","firstSegment","mouse","force","subtract","scale","Mass","add","Friction","getSizeSq","angle","getNormal","relativeSpeed","getSize","width","getRadius","InitPath","ExtendPath","pt","speed","interpolatedPressure","interpolatePressure","radius","speedFactor","mousePressure","d1","distanceTo","Math","threshold","SVG_1","Path_1","SVGDrawer","curved","svg","CreateElement","backgroundLayer","bg","parent","parentElement","clientWidth","height","clientHeight","SetAttributes","CanvasSize","fill","CssValue","currentColor","SvgPath","SetupOutputCorrection","sourceWidth","sourceHeight","wr","hr","viewBox","CursorOffset","BasicElements_1","HTML_1","ChangeColorButton","callback","SetColor","onclick","active","classList","remove","class","data-color","style","Button","ChangeBrushSizeButton","dot","Unit","data-size","HelperFunctions_1","Buttons_1","Board_1","RecorderUI","tickingInterval","AddClass","isBusy","micIsMuted","autohide","colorPallete","brushSizes","CreateBoard","Panel","AddChildren","CreateButtonsPanel","CreateColorsPanel","CreateBrushSizesPanel","CreateEraserPanel","CreateEraseAllPanel","CreateMicPanel","AddClasses","AddChild","RemoveClass","text","data-busy-string","buttonsPanel","recPauseButton","IconButton","RecordPause","uploadButton","InitializeUpload","disabled","H2","PauseRecording","removeAttribute","StartRecording","ChangeIcon","IsRecording","ticking","setInterval","clearInterval","ChangeContent","millisecondsToString","colorsGroup","btn","sizesGroup","switchToEraserButton","panel","title","eraseAllButton","micButton","IconOnlyButton","MuteMic","AppleForceTouch","checkForce","webkitForce","forceLevel","MouseEvent","PointerEventsAPI","onPointerMove","onPointerDown","onPointerUp","onPointerLeave","onPointerOver","currentEvent","pointerType","onpointerover","onpointerout","onPointerEnter","WacomPointerType","OutOfProximity","Pen","Eraseer","WacomTablet","penApi","Factory","api","plugin","body","version","penAPI"],"mappings":"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","file":"recorder.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var Video_1=__webpack_require__(24),DynaDraw_1=__webpack_require__(28),SVGDrawer_1=__webpack_require__(29),PointingDevice_1=__webpack_require__(13),Chunk_1=__webpack_require__(9),Command_1=__webpack_require__(10),AudioRecorder_1=__webpack_require__(26),Errors_1=__webpack_require__(8),VideoEvents_1=__webpack_require__(1),VideoTimer_1=__webpack_require__(18),Metadata_1=__webpack_require__(21),RecorderUI_1=__webpack_require__(33),Color_1=__webpack_require__(7),Brush_1=__webpack_require__(20),File_1=__webpack_require__(15),IO_1=__webpack_require__(25),Recorder=function(){function e(e,t){var i=this;this.id=e,this.settings=t,this.events=new VideoEvents_1[\"default\"],this.isRecording=!1,this.timer=new VideoTimer_1[\"default\"](!1),this.recordingBlocked=!1,this.data=new Video_1[\"default\"],this.lastEraseData=0,this.recordAllRawData=void 0!==t.RecordAllRawData?!!t.RecordAllRawData:!0,t.DefaultBackgroundColor&&(Color_1[\"default\"].BackgroundColor=t.DefaultBackgroundColor),t.DefaultBrushColor&&(Color_1[\"default\"].ForegroundColor=t.DefaultBrushColor);var r=document.getElementById(e);if(!r)return void Errors_1[\"default\"].Report(Errors_1.ErrorType.Fatal,\"Container #\"+e+\" doesn't exist. Video Recorder couldn't be initialised.\");for(;r.firstChild;)r.removeChild(r.firstChild);if(!t.ColorPallete||0===t.ColorPallete.length){var o=[];o.push(new Color_1[\"default\"](\"#ffffff\")),o.push(new Color_1[\"default\"](\"#fa5959\")),o.push(new Color_1[\"default\"](\"#8cfa59\")),o.push(new Color_1[\"default\"](\"#59a0fa\")),o.push(new Color_1[\"default\"](\"#fbff06\")),o.push(Color_1[\"default\"].BackgroundColor),t.ColorPallete=o}if(o.indexOf(Color_1[\"default\"].BackgroundColor)||o.push(Color_1[\"default\"].BackgroundColor),!t.BrushSizes||0===t.BrushSizes.length){var n=[];n.push(new Brush_1[\"default\"](2)),n.push(new Brush_1[\"default\"](3)),n.push(new Brush_1[\"default\"](4)),n.push(new Brush_1[\"default\"](6)),n.push(new Brush_1[\"default\"](8)),n.push(new Brush_1[\"default\"](10)),n.push(new Brush_1[\"default\"](15)),n.push(new Brush_1[\"default\"](80)),t.BrushSizes=n}if(!t.Localization){var s={NoJS:\"Your browser does not support JavaScript or it is turned off. Video can't be recorded without enabled JavaScript in your browser.\",Busy:\"Preparing recording studio...\",RecPause:\"Control recording\",Record:\"Start\",Pause:\"Pause recording\",Upload:\"Upload\",UploadInProgress:\"Uploading data...\",ChangeColor:\"Change brush color\",ChangeSize:\"Change brush size\",Erase:\"Eraser\",EraseAll:\"Erase everything\",WaitingText:\"Please be patient. Uploading video usually takes some times - up to a few minutes if your video is over ten minutes long. Do not close this tab or browser window.\",UploadWasSuccessful:\"Upload was successful\",RedirectPrompt:\"Upload was successful - press OK to continue\",UploadFailure:\"Upload failed.\",FailureApology:\"We are sorry, but upload failed. Do you want to download your data to your computer instead?\",AudioRecording:\"Audio recording\",AudioRecordingAvailable:\"Audio recording is available\",AudioRecordingUnavailable:\"Audio recording is unavailable\"};t.Localization=s}this.events.on(VideoEvents_1.VideoEventType.ChangeBrushSize,function(e){return i.ChangeBrushSize(e)}),this.events.on(VideoEvents_1.VideoEventType.ChangeColor,function(e){return i.ChangeColor(e)}),this.events.on(VideoEvents_1.VideoEventType.CursorState,function(e){return i.ProcessCursorState(e)}),this.events.on(VideoEvents_1.VideoEventType.ClearCanvas,function(e){return i.ClearCanvas(e)}),this.events.on(VideoEvents_1.VideoEventType.Start,function(){return i.Start()}),this.events.on(VideoEvents_1.VideoEventType.Pause,function(){return i.Pause()}),this.events.on(VideoEvents_1.VideoEventType.StartUpload,function(){return i.StartUpload()}),this.busyLevel=0,this.events.on(VideoEvents_1.VideoEventType.Busy,function(){return i.Busy()}),this.events.on(VideoEvents_1.VideoEventType.Ready,function(){return i.Ready()}),this.events.on(VideoEvents_1.VideoEventType.StartPath,function(e){i.PushChunk(new Chunk_1.PathChunk(e,i.timer.CurrentTime(),i.lastEraseData)),i.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(i.timer.CurrentTime()))}),this.events.on(VideoEvents_1.VideoEventType.DrawSegment,function(){return i.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(i.timer.CurrentTime()))});var a=n.reduce(function(e,t,i,r){return e.Size<t.Size?e:t}).Size,u=n.reduce(function(e,t,i,r){return e.Size>t.Size?e:t}).Size;this.drawer=t.DrawingStrategy?t.DrawingStrategy:new SVGDrawer_1[\"default\"](!0),this.drawer.SetEvents(this.events),this.dynaDraw=new DynaDraw_1[\"default\"](this.events,function(){return i.drawer.CreatePath(i.events)},!t.DisableDynamicLineWidth,a,u,this.timer),this.ui=t.UI?t.UI:new RecorderUI_1[\"default\"](e,this.events),this.ui.Timer=this.timer,this.ui.Localization=t.Localization,this.ui.SetBusyText(t.Localization.Busy),this.ui.CreateHTML(!!t.Autohide,t.ColorPallete,t.BrushSizes);var d=this.drawer.CreateCanvas();this.ui.AcceptCanvas(d),r.appendChild(this.ui.GetHTML()),this.drawer.Stretch(),this.pointer=PointingDevice_1[\"default\"].SelectBestMethod(this.events,this.ui.GetHTML(),d,this.timer),t.Audio&&(this.audioRecorder=new AudioRecorder_1[\"default\"](t.Audio,this.events),this.audioRecorder.Init()),this.ClearCanvas(Color_1[\"default\"].BackgroundColor),this.events.trigger(VideoEvents_1.VideoEventType.ChangeColor,Color_1[\"default\"].ForegroundColor),this.events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize,new Brush_1[\"default\"](5))}return Object.defineProperty(e.prototype,\"Events\",{get:function(){return this.events},enumerable:!0,configurable:!0}),e.prototype.Start=function(){this.isRecording===!1&&(this.isRecording=!0,this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(),this.lastEraseData)),this.timer.Resume(),this.audioRecorder&&this.audioRecorder.Start())},e.prototype.Pause=function(){this.isRecording===!0&&(this.isRecording=!1,this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(),this.lastEraseData)),this.timer.Pause(),this.audioRecorder&&this.audioRecorder.Pause())},e.prototype.StartUpload=function(){var e=this;this.recordingBlocked=!0;var t=new Metadata_1[\"default\"];t.Length=this.timer.CurrentTime(),t.Width=this.ui.Width,t.Height=this.ui.Height,t.AudioTracks=[],this.data.Metadata=t,this.audioRecorder&&this.audioRecorder.isRecording()?this.audioRecorder.Stop(function(t){e.data.Metadata.AudioTracks=t,e.UploadData()},function(){e.FinishRecording(!1)}):this.UploadData()},e.prototype.ChangeBrushSize=function(e){!this.recordingBlocked&&this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushSize(e,this.timer.CurrentTime())),this.dynaDraw.SetBrushSize(e)},e.prototype.ChangeColor=function(e){!this.recordingBlocked&&this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushColor(e,this.timer.CurrentTime())),this.drawer.SetCurrentColor(e)},e.prototype.ProcessCursorState=function(e){!this.recordingBlocked&&(this.recordAllRawData||this.isRecording)&&this.data.CurrentChunk.PushCommand(new Command_1.MoveCursor(e.X,e.Y,this.recordAllRawData?e.Pressure:0,this.timer.CurrentTime())),this.dynaDraw.ObserveCursorMovement(e)},e.prototype.ClearCanvas=function(e){var t=this.timer.CurrentTime();this.lastEraseData=this.PushChunk(new Chunk_1.EraseChunk(e,t,this.lastEraseData)),this.data.CurrentChunk.PushCommand(new Command_1.ClearCanvas(e,t)),this.drawer.ClearCanvas(e)},e.prototype.PushChunk=function(e){return this.data.PushChunk(e)},e.prototype.Busy=function(){this.busyLevel++,this.wasRecordingWhenBusy=this.wasRecordingWhenBusy||this.isRecording,this.events.trigger(VideoEvents_1.VideoEventType.Pause),this.ui.Busy()},e.prototype.Ready=function(){0===--this.busyLevel&&(this.wasRecordingWhenBusy===!0&&(this.events.trigger(VideoEvents_1.VideoEventType.Start),this.wasRecordingWhenBusy=!1),this.ui.Ready())},e.prototype.UploadData=function(){var e=this,t=this.settings.VideoFormat?this.settings.VideoFormat:new IO_1[\"default\"],i=t.SaveVideo(this.data);console.log(i),this.events.on(VideoEvents_1.VideoEventType.DownloadData,function(){File_1[\"default\"].Download(i,\"recorded-animation.\"+t.GetExtension())}),this.ui.SetBusyText(this.settings.Localization.UploadInProgress),this.events.trigger(VideoEvents_1.VideoEventType.Busy);var r=new FormData;r.append(\"extension\",t.GetExtension()),r.append(\"file\",i);var o=new XMLHttpRequest;o.open(\"POST\",this.settings.UploadURL,!0),o.onerror=function(t){return e.FinishRecording(!1)},o.onload=function(t){var i=JSON.parse(o.response);if(200===o.status&&i.hasOwnProperty(\"success\")&&i.success===!0){var r=i.hasOwnProperty(\"redirect\")?i.redirect:!1;e.FinishRecording(!0,r)}else e.FinishRecording(!1)},o.send(r)},e.prototype.FinishRecording=function(e,t){e===!0?(this.ui.SetBusyText(this.settings.Localization.UploadWasSuccessful),\"string\"==typeof t?confirm(this.settings.Localization.RedirectPrompt)&&window.location.replace(t):alert(this.settings.Localization.UploadWasSuccessful)):(this.ui.SetBusyText(this.settings.Localization.UploadFailure),confirm(this.settings.Localization.FailureApology)&&this.events.trigger(VideoEvents_1.VideoEventType.DownloadData))},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Recorder;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var VideoEvents_1=__webpack_require__(1),State_1=__webpack_require__(17),WacomTablet_1=__webpack_require__(37),Pointer_1=__webpack_require__(36),AppleForceTouch_1=__webpack_require__(35),Touch_1=__webpack_require__(23),PointingDevice=function(){function e(e,o,t){this.events=e,this.board=o,this.timer=t,this.isHoveringOverUIControl=!1}return e.SelectBestMethod=function(e,o,t,i){var r,n=WacomTablet_1[\"default\"].IsAvailable();return null!==n?(r=new WacomTablet_1[\"default\"](e,o,i,n),console.log(\"Wacom WebPAPI is used\")):window.hasOwnProperty(\"PointerEvent\")?(r=new Pointer_1[\"default\"](e,o,i),console.log(\"Pointer Events API is used\")):AppleForceTouch_1[\"default\"].isAvailable()?(r=new AppleForceTouch_1[\"default\"](e,o,t,i),console.log(\"Apple Force Touch Events over Touch Events API is used\")):(r=new Touch_1[\"default\"](e,o,t,i),console.log(\"Touch Events API are used.\")),r.InitControlsAvoiding(),r},e.prototype.getCursor=function(){return this.cursor},e.prototype.InitControlsAvoiding=function(){for(var e=this,o=document.getElementsByClassName(\"ui-control-panel\"),t=0;t<o.length;t++){var i=o[t];i.onmouseover=function(o){return e.isHoveringOverUIControl=!0},i.onmouseout=function(o){return e.isHoveringOverUIControl=!1}}},e.prototype.GetPressure=function(){return this.isDown===!0&&this.isInside===!0?1:0},e.prototype.onMove=function(e){this.cursor=this.getCursorPosition(e),this.ReportAction()},e.prototype.onDown=function(e){this.isHoveringOverUIControl===!1&&(this.isDown=!0,this.cursor=this.getCursorPosition(e),this.ReportAction())},e.prototype.onUp=function(e){this.isDown=!1,this.cursor=this.getCursorPosition(e),this.ReportAction()},e.prototype.onLeave=function(e){this.GetPressure()>0&&(this.onMove(e),this.isDown=!1,this.onMove(e),this.isDown=!0),this.isInside=!1},e.prototype.onOver=function(e){this.isInside=!0},e.prototype.onLooseFocus=function(e){this.isInside=!1,this.isDown=!1},e.prototype.getCursorPosition=function(e){return(void 0==e.clientX||void 0==e.clientY)&&console.log(\"Wrong 'getCursorPosition' parameter. Event data required.\"),{x:e.clientX,y:e.clientY}},e.prototype.ReportAction=function(){var e=new State_1.CursorState(this.timer.CurrentTime(),this.cursor.x,this.cursor.y,this.GetPressure());this.events.trigger(VideoEvents_1.VideoEventType.CursorState,e)},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=PointingDevice;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(o,n){function e(){this.constructor=o}for(var t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);o.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)},PointingDevice_1=__webpack_require__(13),Mouse=function(o){function n(n,e,t){var r=this;o.call(this,n,e,t),this.board.onmousemove=function(o){return r.onMouseMove(o)},this.board.onmousedown=function(o){return r.onMouseDown(o)},this.board.onmouseup=function(o){return r.onMouseUp(o)},this.board.onmouseleave=function(o){return r.onMouseLeave(o)},this.board.onmouseenter=function(o){return r.onMouseEnter(o)},this.board.onmouseover=function(o){return r.onMouseOver(o)}}return __extends(n,o),n.prototype.InitControlsAvoiding=function(){for(var o=this,n=document.getElementsByClassName(\"ui-control\"),e=0;e<n.length;e++){var t=n[e];t.onmouseover=function(n){return o.isHoveringOverUIControl=!0},t.onmouseout=function(n){return o.isHoveringOverUIControl=!1}}},n.prototype.onMouseMove=function(o){this.onMove(o)},n.prototype.onMouseDown=function(o){this.onDown(o)},n.prototype.onMouseUp=function(o){this.onUp(o)},n.prototype.onMouseLeave=function(o){this.onLeave(o)},n.prototype.onMouseEnter=function(o){0===o.buttons&&(this.isDown=!1)},n.prototype.onMouseOver=function(o){this.isInside=!0},n}(PointingDevice_1[\"default\"]);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Mouse;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Mouse_1=__webpack_require__(22),TouchEventsAPI=function(e){function t(t,n,o,u){var r=this;e.call(this,t,n,u),this.canvas=o,o.addEventListener(\"touchstart\",function(e){return r.TouchStart(e)}),o.addEventListener(\"touchend\",function(e){return r.TouchEnd(e)}),o.addEventListener(\"touchcancel\",function(e){return r.TouchEnd(e)}),o.addEventListener(\"touchleave\",function(e){return r.TouchLeave(e)}),o.addEventListener(\"touchmove\",function(e){return r.TouchMove(e)})}return __extends(t,e),t.prototype.TouchStart=function(e){e.preventDefault();var t=e.changedTouches,n=t[0];this.currentTouch=n.identifier,this.isInside=!0,this.isHoveringOverUIControl=!1,this.onMouseDown(n)},t.prototype.TouchLeave=function(e){e.preventDefault();var t=this.filterTouch(e.changedTouches);null!==t&&this.onMouseLeave(t)},t.prototype.TouchEnd=function(e){var t=this.filterTouch(e.changedTouches);null!==t&&(this.onMouseUp(t),this.currentTouch=null)},t.prototype.TouchMove=function(e){e.preventDefault();var t=this.filterTouch(e.changedTouches);null!==t&&this.onMouseMove(t)},t.prototype.filterTouch=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.identifier===this.currentTouch)return n}return null},t}(Mouse_1[\"default\"]);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=TouchEventsAPI;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 24 */,\n/* 25 */,\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var VideoEvents_1=__webpack_require__(1),Errors_1=__webpack_require__(8),AudioPlayer_1=__webpack_require__(11),AudioRecorder=function(){function e(e,r){var o=this;this.events=r,this.recording=!1,this.initSuccessful=!1,this.doNotStartRecording=!1,this.settings={host:\"http://localhost\",port:4e3,path:\"/upload/audio\",recordingWorkerPath:\"/js/workers/RecordingWorker.js\"},e.host&&(this.settings.host=e.host),e.port&&(this.settings.port=e.port),e.path&&(this.settings.path=e.path),this.recording=!1,this.muted=!1,this.events.on(VideoEvents_1.VideoEventType.MuteAudioRecording,function(){return o.muted=!o.muted}),this.error=function(e){return console.log(\"AudioRecorder error: \",e)},this.success=function(e){return console.log(\"AudioRecorder success: \",e)}}return e.prototype.Init=function(e){var r=this;if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia&&window.hasOwnProperty(\"AudioContext\")){var o=new AudioContext||null;this.events.trigger(VideoEvents_1.VideoEventType.Busy),navigator.getUserMedia({video:!1,audio:!0},function(t){if(r.doNotStartRecording===!1){r.input=o.createMediaStreamSource(t);var i=2048;r.scriptProcessorNode=o.createScriptProcessor(i,1,1),r.scriptProcessorNode.onaudioprocess=function(e){return r.processData(e)},r.input.connect(r.scriptProcessorNode),r.scriptProcessorNode.connect(o.destination),r.initSuccessful=!0,r.CreateAudioProcessor(\"web-socket\",r.settings,function(){return console.log(\"Audio recording is ready.\")}),e&&e(),r.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingAvailable),r.events.trigger(VideoEvents_1.VideoEventType.RegisterRecordingTool,\"audio-recorder\"),r.events.trigger(VideoEvents_1.VideoEventType.Ready)}},function(e){\"PermissionDeniedError\"===e.name&&Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"User didn't allow microphone recording.\"),Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"Can't record audio\",e),r.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable),r.events.trigger(VideoEvents_1.VideoEventType.Ready)})}else console.log(\"getUserMedia not supported by the browser\"),Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"getUserMedia not supported by the browser\"),this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable)},e.prototype.CreateAudioProcessor=function(e,r,o,t){var i=this;Worker?(this.recordingWorker=new Worker(r.recordingWorkerPath),this.recordingWorker.onmessage=function(e){return i.ReceiveMessageFromWorker(e)},this.recordingWorker.postMessage({cmd:\"init\",AudioProcessorType:e||\"web-sockets\",port:r.port,host:r.host,path:r.path}),o&&o()):(Errors_1[\"default\"].Report(Errors_1.ErrorType.Fatal,\"No web workers support - this feature is not supported by the browser.\"),t&&t())},e.prototype.Start=function(){return this.initSuccessful===!0?this.recordingWorker?(this.recording=!0,!0):(Errors_1[\"default\"].Report(Errors_1.ErrorType.Fatal,\"No audio processor was set.\"),!1):(this.doNotStartRecording=!0,!1)},e.prototype.Continue=function(){return this.initSuccessful?this.recordingWorker?(this.recording=!0,!0):(Errors_1[\"default\"].Report(Errors_1.ErrorType.Fatal,\"No audio processor was set.\"),!1):!1},e.prototype.Pause=function(){return this.initSuccessful?(this.recording=!1,!0):!1},e.prototype.Stop=function(e,r){this.success=e,this.error=r,this.initSuccessful===!0?this.Pause()&&this.recordingWorker&&this.recordingWorker.postMessage({cmd:\"finish\"}):(Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"Can't stop AudioRecorder - it wasn't ever initialised.\"),r())},e.prototype.isRecording=function(){return this.initSuccessful},e.prototype.processData=function(e){if(this.recording!==!1){var r=e.inputBuffer.getChannelData(0);if(this.muted)for(var o=0;o<r.length;o++)r[o]=0;this.recordingWorker&&this.recordingWorker.postMessage({cmd:\"pushData\",data:r})}},e.prototype.ReceiveMessageFromWorker=function(e){var r=e.data;if(!r.hasOwnProperty(\"type\"))return console.log(\"Worker response is invalid (missing property 'type')\",e.data),void this.error(\"AudioRecorder received invalid message from the worker.\");switch(r.type){case\"error\":this.error(r.msg);case\"network-error\":this.WorkerNetworkError();break;case\"finished\":this.WorkerFinished(r);break;default:console.log(\"Unknown message type: \",r.type,r)}},e.prototype.WorkerFinished=function(e){this.recordingWorker.terminate(),this.recordingWorker=null,this.events.trigger(VideoEvents_1.VideoEventType.RecordingToolFinished,\"audio-recorder\");for(var r=[],o=0;o<e.files.length;o++){var t=e.files[o],i=new AudioPlayer_1.AudioSource(t.url,AudioPlayer_1.AudioSource.StringToType(t.type));r.push(i)}this.success(r)},e.prototype.WorkerNetworkError=function(){this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable)},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=AudioRecorder;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 27 */,\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var Vector_1=__webpack_require__(4),VideoEvents_1=__webpack_require__(1),DynaDraw=function(){function t(t,i,s,e,r,o){var n=this;this.events=t,this.pathFactory=i,this.slowSimulation=s,this.minBrushSize=e,this.maxBrushSize=r,this.minMass=1,this.maxMass=10,this.minFriction=.4,this.maxFriction=.6,this.brushes={},this.oneFrame=1e3/60,this.cursor=new BrushTip(!0,o),s===!0?requestAnimationFrame(function(t){n.lastAnimationTime=t,n.Tick(t)}):requestAnimationFrame(function(){return n.TickWhile()})}return t.prototype.SetBrushSize=function(t){this.currentBrushSize=t},t.prototype.interpolateMass=function(t){return this.minMass+(this.maxMass-this.minMass)*(t-this.minBrushSize)/(this.maxBrushSize-this.minBrushSize)},t.prototype.interpolateFriction=function(t){return this.maxFriction-(this.maxFriction-this.minFriction)*(t-this.minBrushSize)/(this.maxBrushSize-this.minBrushSize)},t.prototype.GetBrush=function(t){return this.brushes[t]||(this.brushes[t]=new BrushInstance(this.interpolateMass(t),this.interpolateFriction(t),t)),this.brushes[t]},t.prototype.ObserveCursorMovement=function(t){try{var i=new Vector_1[\"default\"](t.X,t.Y);t.Pressure>0?this.lastState&&0!==this.lastState.Pressure?this.NextPoint(i,t.Pressure):(this.path=this.pathFactory(),this.events.trigger(VideoEvents_1.VideoEventType.StartPath,this.path),this.StartPath(i,t.Pressure)):this.lastState&&this.lastState.Pressure>0&&this.EndPath(i,this.lastState.Pressure)}catch(s){console.log(\"ProcessNewState error: \",s)}this.lastState=t},t.prototype.StartPath=function(t,i){this.cursor.Reset(t,this.GetBrush(this.currentBrushSize.Size)),this.position=t,this.pressure=i,this.cursor.StartPath(this.path,t,i)},t.prototype.NextPoint=function(t,i){this.position=t,this.pressure=i},t.prototype.EndPath=function(t,i){this.position=t},t.prototype.TickWhile=function(){var t=this;if(this.position){var i=0,s=0;do i=this.cursor.ApplyForce(this.position),s+=i,s>this.currentBrushSize.Size&&(this.cursor.Draw(this.path,this.pressure),s=0);while(i>0);s>0&&this.cursor.Draw(this.path,this.pressure),this.position=null}requestAnimationFrame(function(i){return t.TickWhile()})},t.prototype.Tick=function(t){var i=this;this.path&&(this.cursor.ApplyForce(this.position)>0?this.cursor.Draw(this.path,this.pressure):this.position||(this.path=null)),this.lastAnimationTime=t,requestAnimationFrame(function(t){return i.Tick(t)})},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=DynaDraw;var BrushInstance=function(){function t(t,i,s){this.mass=t,this.friction=i,this.size=s}return Object.defineProperty(t.prototype,\"Mass\",{get:function(){return this.mass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Friction\",{get:function(){return this.friction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Size\",{get:function(){return this.size},enumerable:!0,configurable:!0}),t}(),Threshold;!function(t){t[t.Velocity=1]=\"Velocity\"}(Threshold||(Threshold={}));var BrushTip=function(){function t(t,i){this.calculateSpeed=t,this.timer=i}return t.prototype.Reset=function(t,i){this.brush=i,this.position=t.clone(),this.startPosition=t.clone(),this.previousPosition=t.clone(),this.previousPressure=-1,this.mousePosition=t.clone(),this.acceleration=new Vector_1[\"default\"](0,0),this.velocity=new Vector_1[\"default\"](0,0),this.firstSegment=!0},t.prototype.ApplyForce=function(t){if(null!==t){var i=t.clone().subtract(this.position);this.acceleration=i.clone().scale(1/this.brush.Mass),this.velocity.add(this.acceleration),this.mousePosition=t}return this.velocity.scale(1-this.brush.Friction),this.velocity.getSizeSq()<1?0:(t=null,i=null,this.acceleration=null,this.angle=this.velocity.getNormal(),this.position.add(this.velocity),this.velocity.getSizeSq())},t.prototype.Draw=function(t,i){var s=this.calculateSpeed===!0?this.velocity.getSize()/(this.brush.Size*this.brush.Size):0,e=this.getRadius(i,s);this.angle.scale(e),this.firstSegment&&(t.InitPath(this.startPosition.clone().add(this.angle),this.startPosition.clone().subtract(this.angle)),this.firstSegment=!1),t.ExtendPath(this.position.clone().add(this.angle),this.position.clone().subtract(this.angle)),t.Draw()},t.prototype.StartPath=function(t,i,s){t.StartPath(i,this.getRadius(s,0))},t.prototype.getRadius=function(t,i){this.previousPressure<0&&(this.previousPressure=t);var s=this.interpolatePressure(t),e=this.speedFactor(i)*this.brush.Size*s/2;return this.previousPosition=this.position.clone(),this.previousPressure=s,e},t.prototype.interpolatePressure=function(t){var i=this.position.distanceTo(this.previousPosition),s=this.position.distanceTo(this.mousePosition);return 0===i&&0===s?t:i/(i+s)*(t-this.previousPressure)+this.previousPressure},t.prototype.speedFactor=function(t){return Math.max(1-t,.4)},t.threshold=.001,t}();\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var SVG_1=__webpack_require__(3),VideoEvents_1=__webpack_require__(1),Vector_1=__webpack_require__(4),Path_1=__webpack_require__(12),SVGDrawer=function(){function t(t){void 0===t&&(t=!0),this.curved=t}return t.prototype.SetEvents=function(t){this.events=t},t.prototype.CreateCanvas=function(){this.svg=SVG_1[\"default\"].CreateElement(\"svg\");var t=SVG_1[\"default\"].CreateElement(\"g\");return this.bg=SVG_1[\"default\"].CreateElement(\"rect\",{id:\"background\"}),t.appendChild(this.bg),this.svg.appendChild(t),this.canvas=SVG_1[\"default\"].CreateElement(\"g\",{id:\"canvas\"}),this.svg.appendChild(this.canvas),this.svg},t.prototype.Stretch=function(){var t=this.svg.parentElement,e=t.clientWidth,i=t.clientHeight;SVG_1[\"default\"].SetAttributes(this.svg,{width:e,height:i}),SVG_1[\"default\"].SetAttributes(this.bg,{width:e,height:i}),this.events.trigger(VideoEvents_1.VideoEventType.CanvasSize,e,i)},t.prototype.ClearCanvas=function(t){for(;this.canvas.firstChild;)this.canvas.removeChild(this.canvas.firstChild);SVG_1[\"default\"].SetAttributes(this.bg,{fill:t.CssValue})},t.prototype.SetCurrentColor=function(t){this.currentColor=t},t.prototype.CreatePath=function(t){return new Path_1.SvgPath(t,this.curved,this.currentColor.CssValue,this.canvas)},t.prototype.SetupOutputCorrection=function(t,e){var i=this.svg.clientWidth/t,r=this.svg.clientHeight/e,s=Math.min(i,r);return SVG_1[\"default\"].SetAttributes(this.svg,{viewBox:\"0 0 \"+t+\" \"+e}),s===i?this.events.trigger(VideoEvents_1.VideoEventType.CursorOffset,new Vector_1[\"default\"](0,(this.svg.clientHeight-e*s)/2)):this.events.trigger(VideoEvents_1.VideoEventType.CursorOffset,new Vector_1[\"default\"]((this.svg.clientWidth-t*s)/2,0)),s},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=SVGDrawer;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BasicElements_1=__webpack_require__(5),VideoEvents_1=__webpack_require__(1),HTML_1=__webpack_require__(2),ChangeColorButton=function(t){function e(e,i,s){var n=this;t.call(this,\"\"),this.events=e,this.SetColor(i),this.GetHTML().onclick=function(t){return s?s():n.ChangeColor(t)}}return __extends(e,t),e.prototype.ChangeColor=function(t){e.active&&e.active.GetHTML().classList.remove(\"active\"),this.GetHTML().classList.add(\"active\"),e.active=this,this.events.trigger(VideoEvents_1.VideoEventType.ChangeColor,this.color)},e.prototype.SetColor=function(t){this.color=t,HTML_1[\"default\"].SetAttributes(this.GetHTML(),{\"class\":\"option\",\"data-color\":t.CssValue,style:\"background-color: \"+t.CssValue})},e}(BasicElements_1.Button);exports.ChangeColorButton=ChangeColorButton;var ChangeBrushSizeButton=function(t){function e(e,i){var s=this;t.call(this,\"\"),this.events=e,this.size=i;var n=HTML_1[\"default\"].CreateElement(\"span\",{style:\"width: \"+i.CssValue+\";\t\\n\t\t\t\t\t\theight: \"+i.CssValue+\";\\n\t\t\t\t\t\tborder-radius: \"+i.Size/2+i.Unit+\"; \\n\t\t\t\t\t\tdisplay: inline-block;\\n\t\t\t\t\t\tbackground: black;\\n\t\t\t\t\t\tmargin-top: \"+-i.Size/2+i.Unit+\";\",\"class\":\"dot\",\"data-size\":i.Size});this.GetHTML().appendChild(n),HTML_1[\"default\"].SetAttributes(this.GetHTML(),{\"class\":\"option\",\"data-size\":i.Size}),this.GetHTML().onclick=function(t){return s.ChangeSize(t)}}return __extends(e,t),e.prototype.ChangeSize=function(t){t.preventDefault(),e.active&&e.active.GetHTML().classList.remove(\"active\"),this.GetHTML().classList.add(\"active\"),e.active=this,this.events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize,this.size)},e}(BasicElements_1.Button);exports.ChangeBrushSizeButton=ChangeBrushSizeButton;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 31 */,\n/* 32 */,\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},VideoEvents_1=__webpack_require__(1),HTML_1=__webpack_require__(2),HelperFunctions_1=__webpack_require__(6),BasicElements_1=__webpack_require__(5),Buttons_1=__webpack_require__(30),Board_1=__webpack_require__(19),Color_1=__webpack_require__(7),RecorderUI=function(e){function t(t,i){e.call(this,\"div\",t+\"-recorder\"),this.id=t,this.events=i,this.tickingInterval=100,this.AddClass(\"vector-video-wrapper\"),this.isRecording=!1,this.isBusy=!1,this.micIsMuted=!1}return __extends(t,e),Object.defineProperty(t.prototype,\"Width\",{get:function(){return this.board.Width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Height\",{get:function(){return this.board.Height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"BackgroundColor\",{get:function(){return Color_1[\"default\"].BackgroundColor.CssValue},enumerable:!0,configurable:!0}),t.prototype.CreateHTML=function(e,t,i){this.board=this.CreateBoard(),this.controls=new BasicElements_1.Panel(\"div\",this.id+\"-controls\").AddChildren(this.CreateButtonsPanel().AddClass(\"ui-controls-panel\"),this.CreateColorsPanel(t).AddClass(\"ui-controls-panel\"),this.CreateBrushSizesPanel(i).AddClass(\"ui-controls-panel\"),this.CreateEraserPanel().AddClass(\"ui-controls-panel\"),this.CreateEraseAllPanel().AddClass(\"ui-controls-panel\"),this.CreateMicPanel().AddClass(\"ui-controls-panel\")).AddClasses(\"ui-controls\",\"ui-control\"),!!e&&this.controls.AddClass(\"autohide\"),this.AddChildren(this.board,new BasicElements_1.Panel(\"div\").AddClass(\"ui-controls-wrapper\").AddChild(this.controls))},t.prototype.Busy=function(){this.AddClass(\"busy\"),this.isBusy=!0},t.prototype.Ready=function(){this.RemoveClass(\"busy\"),this.isBusy=!1},t.prototype.SetBusyText=function(e){HTML_1[\"default\"].SetAttributes(this.GetHTML(),{\"data-busy-string\":e})},t.prototype.AcceptCanvas=function(e){this.board.GetHTML().appendChild(e)},t.prototype.CreateBoard=function(){var e=new Board_1[\"default\"](this.id+\"-board\",this.events);return e},t.prototype.CreateButtonsPanel=function(){var e=this,t=new BasicElements_1.Panel(\"div\",this.id+\"-panels\");return this.recPauseButton=new BasicElements_1.IconButton(\"icon-rec\",this.Localization.Record,function(t){return e.RecordPause()}),this.uploadButton=new BasicElements_1.IconButton(\"icon-upload\",this.Localization.Upload,function(t){return e.InitializeUpload()}),HTML_1[\"default\"].SetAttributes(this.uploadButton.GetHTML(),{disabled:\"disabled\"}),t.AddChildren(new BasicElements_1.H2(this.Localization.RecPause),new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\").AddChildren(this.recPauseButton,this.uploadButton)),t},t.prototype.RecordPause=function(){this.isRecording===!0?(this.PauseRecording(),this.uploadButton.GetHTML().removeAttribute(\"disabled\"),this.RemoveClass(\"recording\")):(this.StartRecording(),HTML_1[\"default\"].SetAttributes(this.uploadButton.GetHTML(),{disabled:\"disabled\"}),this.AddClass(\"recording\"))},t.prototype.StartRecording=function(){var e=this;this.isRecording===!1&&(this.isRecording=!0,this.recPauseButton.ChangeIcon(\"icon-pause\"),this.board.IsRecording=!0,this.ticking=setInterval(function(){return e.Tick()},this.tickingInterval),this.events.trigger(VideoEvents_1.VideoEventType.Start))},t.prototype.PauseRecording=function(){this.isRecording===!0&&(this.isRecording=!1,this.recPauseButton.ChangeIcon(\"icon-rec\"),this.board.IsRecording=!1,clearInterval(this.ticking),this.events.trigger(VideoEvents_1.VideoEventType.Pause))},t.prototype.Tick=function(){this.recPauseButton.ChangeContent(HelperFunctions_1.millisecondsToString(this.Timer.CurrentTime()))},t.prototype.InitializeUpload=function(){HTML_1[\"default\"].SetAttributes(this.recPauseButton.GetHTML(),{disabled:\"disabled\"}),HTML_1[\"default\"].SetAttributes(this.uploadButton.GetHTML(),{disabled:\"disabled\"}),this.events.trigger(VideoEvents_1.VideoEventType.StartUpload)},t.prototype.CreateColorsPanel=function(e){for(var t=new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\"),i=0;i<e.length;i++){var n=new Buttons_1.ChangeColorButton(this.events,e[i]);t.AddChild(n)}return new BasicElements_1.Panel(\"div\").AddClass(\"color-pallete\").AddChildren(new BasicElements_1.H2(this.Localization.ChangeColor),t)},t.prototype.CreateBrushSizesPanel=function(e){for(var t=new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\"),i=0;i<e.length;i++)t.AddChild(new Buttons_1.ChangeBrushSizeButton(this.events,e[i]));return new BasicElements_1.Panel(\"div\").AddClass(\"brush-sizes\").AddChildren(new BasicElements_1.H2(this.Localization.ChangeSize),t)},t.prototype.CreateEraserPanel=function(){return this.switchToEraserButton=new Buttons_1.ChangeColorButton(this.events,Color_1[\"default\"].BackgroundColor),new BasicElements_1.Panel(\"div\",this.id+\"-erase\").AddChildren(new BasicElements_1.H2(this.Localization.Erase),this.switchToEraserButton)},t.prototype.CreateEraseAllPanel=function(){var e=this,t=new BasicElements_1.Panel(\"div\",this.id+\"-erase\"),i=new BasicElements_1.H2(this.Localization.EraseAll);return t.AddChild(i),this.eraseAllButton=new Buttons_1.ChangeColorButton(this.events,Color_1[\"default\"].BackgroundColor,function(){return e.EraseAll()}),this.events.on(VideoEvents_1.VideoEventType.ChangeColor,function(t){e.currentColor=t,e.eraseAllButton.SetColor(t)}),t.AddChild(this.eraseAllButton),t},t.prototype.EraseAll=function(){this.events.trigger(VideoEvents_1.VideoEventType.ClearCanvas,this.currentColor),this.switchToEraserButton.SetColor(this.currentColor)},t.prototype.CreateMicPanel=function(){var e=this;return this.micButton=new BasicElements_1.IconOnlyButton(\"icon-mic-off\",this.Localization.AudioRecordingUnavailable,function(){return e.MuteMic()}),HTML_1[\"default\"].SetAttributes(this.micButton.GetHTML(),{disabled:\"disabled\"}),this.events.on(VideoEvents_1.VideoEventType.AudioRecordingAvailable,function(){e.micButton.GetHTML().removeAttribute(\"disabled\"),e.micIsMuted||e.micButton.ChangeIcon(\"icon-mic\").ChangeContent(e.Localization.AudioRecordingAvailable)}),this.events.on(VideoEvents_1.VideoEventType.AudioRecordingUnavailable,function(){e.micButton.ChangeIcon(\"icon-mic-off\").ChangeContent(e.Localization.AudioRecordingUnavailable),HTML_1[\"default\"].SetAttributes(e.micButton.GetHTML(),{disabled:\"disabled\"})}),new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.AudioRecording),this.micButton)},t.prototype.MuteMic=function(){this.events.trigger(VideoEvents_1.VideoEventType.MuteAudioRecording),this.micIsMuted=!this.micIsMuted,this.micIsMuted?this.micButton.ChangeIcon(\"icon-mic-off\"):this.micButton.ChangeIcon(\"icon-mic\")},t}(BasicElements_1.Panel);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=RecorderUI;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 34 */,\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Touch_1=__webpack_require__(23),AppleForceTouch=function(e){function t(t,o,r,c){var n=this;e.call(this,t,o,r,c),this.board.onmousemove=function(e){return n.checkForce(e.webkitForce)},this.forceLevel=0}return __extends(t,e),t.isAvailable=function(){return\"WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN\"in MouseEvent},t.prototype.GetPressure=function(){return this.forceLevel},t.prototype.checkForce=function(e){this.forceLevel=Math.min(1,e)},t}(Touch_1[\"default\"]);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=AppleForceTouch;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,n){function e(){this.constructor=t}for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)},PointingDevice_1=__webpack_require__(13),PointerEventsAPI=function(t){function n(n,e,o){var r=this;t.call(this,n,e,o),this.board.addEventListener(\"pointermove\",function(t){return r.onPointerMove(t)}),this.board.addEventListener(\"pointerdown\",function(t){return r.onPointerDown(t)}),this.board.addEventListener(\"pointerup\",function(t){return r.onPointerUp(t)}),this.board.addEventListener(\"pointerleave\",function(t){return r.onPointerLeave(t)}),this.board.addEventListener(\"pointerenter\",function(t){return r.onPointerLeave(t)}),this.board.addEventListener(\"pointerover\",function(t){return r.onPointerOver(t)}),this.currentEvent=null,this.isDown=!1}return __extends(n,t),n.prototype.GetPressure=function(){return this.isDown===!1||null===this.currentEvent?0:\"pen\"===this.currentEvent.pointerType?this.currentEvent.pressure:1},n.prototype.InitControlsAvoiding=function(){for(var t=this,n=document.getElementsByClassName(\"ui-control\"),e=0;e<n.length;e++){var o=n[e];o.onpointerover=function(n){return t.isHoveringOverUIControl=!0},o.onpointerout=function(n){return t.isHoveringOverUIControl=!1}}},n.prototype.onPointerMove=function(t){this.onMove(t),this.currentEvent=t},n.prototype.onPointerDown=function(t){this.onDown(t),this.currentEvent=t},n.prototype.onPointerUp=function(t){this.onUp(t),this.currentEvent=t},n.prototype.onPointerLeave=function(t){this.onLeave(t),this.currentEvent=t},n.prototype.onPointerEnter=function(t){0===t.buttons&&(this.isDown=!1),this.currentEvent=t},n.prototype.onPointerOver=function(t){this.isInside=!0,this.currentEvent=t},n}(PointingDevice_1[\"default\"]);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=PointerEventsAPI;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Mouse_1=__webpack_require__(22),HTML_1=__webpack_require__(2),WacomPointerType;!function(e){e[e.OutOfProximity=0]=\"OutOfProximity\",e[e.Pen=1]=\"Pen\",e[e.Mouse=2]=\"Mouse\",e[e.Eraseer=3]=\"Eraseer\"}(WacomPointerType||(WacomPointerType={}));var WacomTablet=function(e){function t(t,n,o,r){e.call(this,t,n,o),this.penApi=r}return __extends(t,e),t.Factory=function(e){return function(n,o,r){return new t(n,o,r,e)}},t.prototype.GetPressure=function(){return this.isDown===!1||this.isInside===!1?0:this.penApi&&this.penApi.pointerType==WacomPointerType.Pen?this.isInside===!0?this.penApi.pressure:0:e.prototype.GetPressure.call(this)},t.IsAvailable=function(){var e=HTML_1[\"default\"].CreateElement(\"object\",{type:\"application/x-wacomtabletplugin\"});return document.body.appendChild(e),!!e.version==!0?(console.log(\"Wacom tablet is connected and plugin installed. Plugin version is \"+e.version+\".\"),e.penAPI):null},t}(Mouse_1[\"default\"]);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=WacomTablet;\n\t//# sourceMappingURL=out.map.js\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** recorder.js\n **/","'use strict';\n\nvar Video_1 = require('./VideoData/Video');\nvar DynaDraw_1 = require('./Drawing/DynaDraw');\nvar SVGDrawer_1 = require('./Drawing/SVGDrawer');\nvar PointingDevice_1 = require('./VideoData/PointingDevice');\nvar Chunk_1 = require('./VideoData/Chunk');\nvar Command_1 = require('./VideoData/Command');\nvar AudioRecorder_1 = require('./AudioData/AudioRecorder');\nvar Errors_1 = require('./Helpers/Errors');\nvar VideoEvents_1 = require('./Helpers/VideoEvents');\nvar VideoTimer_1 = require('./Helpers/VideoTimer');\nvar Metadata_1 = require('./VideoData/Metadata');\nvar RecorderUI_1 = require('./UI/RecorderUI');\nvar Color_1 = require('./UI/Color');\nvar Brush_1 = require('./UI/Brush');\nvar File_1 = require('./Helpers/File');\nvar IO_1 = require('./VideoFormat/SVGAnimation/IO');\nvar Recorder = (function () {\n    function Recorder(id, settings) {\n        var _this = this;\n        this.id = id;\n        this.settings = settings;\n        this.events = new VideoEvents_1['default']();\n        this.isRecording = false;\n        this.timer = new VideoTimer_1['default'](false);\n        this.recordingBlocked = false;\n        this.data = new Video_1['default']();\n        this.lastEraseData = 0;\n        this.recordAllRawData = settings.RecordAllRawData !== undefined ? !!settings.RecordAllRawData : true;\n        if (!!settings.DefaultBackgroundColor) Color_1['default'].BackgroundColor = settings.DefaultBackgroundColor;\n        if (!!settings.DefaultBrushColor) Color_1['default'].ForegroundColor = settings.DefaultBrushColor;\n        var container = document.getElementById(id);\n        if (!container) {\n            Errors_1['default'].Report(Errors_1.ErrorType.Fatal, \"Container #\" + id + \" doesn't exist. Video Recorder couldn't be initialised.\");\n            return;\n        }\n        while (!!container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n        if (!settings.ColorPallete || settings.ColorPallete.length === 0) {\n            var colors = [];\n            colors.push(new Color_1['default'](\"#ffffff\"));\n            colors.push(new Color_1['default'](\"#fa5959\"));\n            colors.push(new Color_1['default'](\"#8cfa59\"));\n            colors.push(new Color_1['default'](\"#59a0fa\"));\n            colors.push(new Color_1['default'](\"#fbff06\"));\n            colors.push(Color_1['default'].BackgroundColor);\n            settings.ColorPallete = colors;\n        }\n        if (!colors.indexOf(Color_1['default'].BackgroundColor)) {\n            colors.push(Color_1['default'].BackgroundColor);\n        }\n        if (!settings.BrushSizes || settings.BrushSizes.length === 0) {\n            var brushes = [];\n            brushes.push(new Brush_1['default'](2));\n            brushes.push(new Brush_1['default'](3));\n            brushes.push(new Brush_1['default'](4));\n            brushes.push(new Brush_1['default'](6));\n            brushes.push(new Brush_1['default'](8));\n            brushes.push(new Brush_1['default'](10));\n            brushes.push(new Brush_1['default'](15));\n            brushes.push(new Brush_1['default'](80));\n            settings.BrushSizes = brushes;\n        }\n        if (!settings.Localization) {\n            var loc = {\n                NoJS: \"Your browser does not support JavaScript or it is turned off. Video can't be recorded without enabled JavaScript in your browser.\",\n                Busy: \"Preparing recording studio...\",\n                RecPause: \"Control recording\",\n                Record: \"Start\",\n                Pause: \"Pause recording\",\n                Upload: \"Upload\",\n                UploadInProgress: \"Uploading data...\",\n                ChangeColor: \"Change brush color\",\n                ChangeSize: \"Change brush size\",\n                Erase: \"Eraser\",\n                EraseAll: \"Erase everything\",\n                WaitingText: \"Please be patient. Uploading video usually takes some times - up to a few minutes if your video is over ten minutes long. Do not close this tab or browser window.\",\n                UploadWasSuccessful: \"Upload was successful\",\n                RedirectPrompt: \"Upload was successful - press OK to continue\",\n                UploadFailure: \"Upload failed.\",\n                FailureApology: \"We are sorry, but upload failed. Do you want to download your data to your computer instead?\",\n                AudioRecording: \"Audio recording\",\n                AudioRecordingAvailable: \"Audio recording is available\",\n                AudioRecordingUnavailable: \"Audio recording is unavailable\"\n            };\n            settings.Localization = loc;\n        }\n        this.events.on(VideoEvents_1.VideoEventType.ChangeBrushSize, function (size) {\n            return _this.ChangeBrushSize(size);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ChangeColor, function (color) {\n            return _this.ChangeColor(color);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.CursorState, function (state) {\n            return _this.ProcessCursorState(state);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ClearCanvas, function (color) {\n            return _this.ClearCanvas(color);\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Start, function () {\n            return _this.Start();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Pause, function () {\n            return _this.Pause();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.StartUpload, function () {\n            return _this.StartUpload();\n        });\n        this.busyLevel = 0;\n        this.events.on(VideoEvents_1.VideoEventType.Busy, function () {\n            return _this.Busy();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.Ready, function () {\n            return _this.Ready();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.StartPath, function (path) {\n            _this.PushChunk(new Chunk_1.PathChunk(path, _this.timer.CurrentTime(), _this.lastEraseData));\n            _this.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(_this.timer.CurrentTime()));\n        });\n        this.events.on(VideoEvents_1.VideoEventType.DrawSegment, function () {\n            return _this.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(_this.timer.CurrentTime()));\n        });\n        var min = brushes.reduce(function (previousValue, currentValue, index, arr) {\n            return previousValue.Size < currentValue.Size ? previousValue : currentValue;\n        }).Size;\n        var max = brushes.reduce(function (previousValue, currentValue, index, arr) {\n            return previousValue.Size > currentValue.Size ? previousValue : currentValue;\n        }).Size;\n        this.drawer = !!settings.DrawingStrategy ? settings.DrawingStrategy : new SVGDrawer_1['default'](true);\n        this.drawer.SetEvents(this.events);\n        this.dynaDraw = new DynaDraw_1['default'](this.events, function () {\n            return _this.drawer.CreatePath(_this.events);\n        }, !settings.DisableDynamicLineWidth, min, max, this.timer);\n        this.ui = !!settings.UI ? settings.UI : new RecorderUI_1['default'](id, this.events);\n        this.ui.Timer = this.timer;\n        this.ui.Localization = settings.Localization;\n        this.ui.SetBusyText(settings.Localization.Busy);\n        this.ui.CreateHTML(!!settings.Autohide, settings.ColorPallete, settings.BrushSizes);\n        var canvas = this.drawer.CreateCanvas();\n        this.ui.AcceptCanvas(canvas);\n        container.appendChild(this.ui.GetHTML());\n        this.drawer.Stretch();\n        this.pointer = PointingDevice_1['default'].SelectBestMethod(this.events, this.ui.GetHTML(), canvas, this.timer);\n        if (!!settings.Audio) {\n            this.audioRecorder = new AudioRecorder_1['default'](settings.Audio, this.events);\n            this.audioRecorder.Init();\n        }\n        this.ClearCanvas(Color_1['default'].BackgroundColor);\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeColor, Color_1['default'].ForegroundColor);\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize, new Brush_1['default'](5));\n    }\n    Object.defineProperty(Recorder.prototype, \"Events\", {\n        get: function get() {\n            return this.events;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Recorder.prototype.Start = function () {\n        if (this.isRecording === false) {\n            this.isRecording = true;\n            this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(), this.lastEraseData));\n            this.timer.Resume();\n            if (this.audioRecorder) {\n                this.audioRecorder.Start();\n            }\n        }\n    };\n    Recorder.prototype.Pause = function () {\n        if (this.isRecording === true) {\n            this.isRecording = false;\n            this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(), this.lastEraseData));\n            this.timer.Pause();\n            if (this.audioRecorder) {\n                this.audioRecorder.Pause();\n            }\n        }\n    };\n    Recorder.prototype.StartUpload = function () {\n        var _this = this;\n        this.recordingBlocked = true;\n        var info = new Metadata_1['default']();\n        info.Length = this.timer.CurrentTime();\n        info.Width = this.ui.Width;\n        info.Height = this.ui.Height;\n        info.AudioTracks = [];\n        this.data.Metadata = info;\n        if (!!this.audioRecorder && this.audioRecorder.isRecording()) {\n            this.audioRecorder.Stop(function (files) {\n                _this.data.Metadata.AudioTracks = files;\n                _this.UploadData();\n            }, function () {\n                _this.FinishRecording(false);\n            });\n        } else {\n            this.UploadData();\n        }\n    };\n    Recorder.prototype.ChangeBrushSize = function (size) {\n        !this.recordingBlocked && this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushSize(size, this.timer.CurrentTime()));\n        this.dynaDraw.SetBrushSize(size);\n    };\n    Recorder.prototype.ChangeColor = function (color) {\n        !this.recordingBlocked && this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushColor(color, this.timer.CurrentTime()));\n        this.drawer.SetCurrentColor(color);\n    };\n    Recorder.prototype.ProcessCursorState = function (state) {\n        !this.recordingBlocked && (this.recordAllRawData || this.isRecording) && this.data.CurrentChunk.PushCommand(new Command_1.MoveCursor(state.X, state.Y, this.recordAllRawData ? state.Pressure : 0, this.timer.CurrentTime()));\n        this.dynaDraw.ObserveCursorMovement(state);\n    };\n    Recorder.prototype.ClearCanvas = function (color) {\n        var time = this.timer.CurrentTime();\n        this.lastEraseData = this.PushChunk(new Chunk_1.EraseChunk(color, time, this.lastEraseData));\n        this.data.CurrentChunk.PushCommand(new Command_1.ClearCanvas(color, time));\n        this.drawer.ClearCanvas(color);\n    };\n    Recorder.prototype.PushChunk = function (chunk) {\n        return this.data.PushChunk(chunk);\n    };\n    Recorder.prototype.Busy = function () {\n        this.busyLevel++;\n        this.wasRecordingWhenBusy = this.wasRecordingWhenBusy || this.isRecording;\n        this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        this.ui.Busy();\n    };\n    Recorder.prototype.Ready = function () {\n        if (--this.busyLevel === 0) {\n            if (this.wasRecordingWhenBusy === true) {\n                this.events.trigger(VideoEvents_1.VideoEventType.Start);\n                this.wasRecordingWhenBusy = false;\n            }\n            this.ui.Ready();\n        }\n    };\n    Recorder.prototype.UploadData = function () {\n        var _this = this;\n        var writer = !!this.settings.VideoFormat ? this.settings.VideoFormat : new IO_1['default']();\n        var videoBlob = writer.SaveVideo(this.data);\n        console.log(videoBlob);\n        this.events.on(VideoEvents_1.VideoEventType.DownloadData, function () {\n            File_1['default'].Download(videoBlob, \"recorded-animation.\" + writer.GetExtension());\n        });\n        this.ui.SetBusyText(this.settings.Localization.UploadInProgress);\n        this.events.trigger(VideoEvents_1.VideoEventType.Busy);\n        var formData = new FormData();\n        formData.append(\"extension\", writer.GetExtension());\n        formData.append(\"file\", videoBlob);\n        var req = new XMLHttpRequest();\n        req.open(\"POST\", this.settings.UploadURL, true);\n        req.onerror = function (e) {\n            return _this.FinishRecording(false);\n        };\n        req.onload = function (e) {\n            var response = JSON.parse(req.response);\n            if (req.status === 200 && response.hasOwnProperty(\"success\") && response.success === true) {\n                var url = response.hasOwnProperty(\"redirect\") ? response.redirect : false;\n                _this.FinishRecording(true, url);\n            } else {\n                _this.FinishRecording(false);\n            }\n        };\n        req.send(formData);\n    };\n    Recorder.prototype.FinishRecording = function (success, url) {\n        if (success === true) {\n            this.ui.SetBusyText(this.settings.Localization.UploadWasSuccessful);\n            if (typeof url === \"string\") {\n                if (confirm(this.settings.Localization.RedirectPrompt)) {\n                    window.location.replace(url);\n                }\n            } else {\n                alert(this.settings.Localization.UploadWasSuccessful);\n            }\n        } else {\n            this.ui.SetBusyText(this.settings.Localization.UploadFailure);\n            if (confirm(this.settings.Localization.FailureApology)) {\n                this.events.trigger(VideoEvents_1.VideoEventType.DownloadData);\n            }\n        }\n    };\n    return Recorder;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Recorder;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Recorder.ts\n **/","'use strict';\n\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar State_1 = require('../Helpers/State');\nvar WacomTablet_1 = require('./WacomTablet');\nvar Pointer_1 = require('./Pointer');\nvar AppleForceTouch_1 = require('./AppleForceTouch');\nvar Touch_1 = require('./Touch');\nvar PointingDevice = (function () {\n    function PointingDevice(events, board, timer) {\n        this.events = events;\n        this.board = board;\n        this.timer = timer;\n        this.isHoveringOverUIControl = false;\n    }\n    PointingDevice.SelectBestMethod = function (events, board, canvas, timer) {\n        var device;\n        var wacomApi = WacomTablet_1['default'].IsAvailable();\n        if (wacomApi !== null) {\n            device = new WacomTablet_1['default'](events, board, timer, wacomApi);\n            console.log(\"Wacom WebPAPI is used\");\n        } else if (window.hasOwnProperty(\"PointerEvent\")) {\n            device = new Pointer_1['default'](events, board, timer);\n            console.log(\"Pointer Events API is used\");\n        } else if (AppleForceTouch_1['default'].isAvailable()) {\n            device = new AppleForceTouch_1['default'](events, board, canvas, timer);\n            console.log(\"Apple Force Touch Events over Touch Events API is used\");\n        } else {\n            device = new Touch_1['default'](events, board, canvas, timer);\n            console.log(\"Touch Events API are used.\");\n        }\n        device.InitControlsAvoiding();\n        return device;\n    };\n    PointingDevice.prototype.getCursor = function () {\n        return this.cursor;\n    };\n    PointingDevice.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control-panel\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onmouseover = function (e) {\n                return _this.isHoveringOverUIControl = true;\n            };\n            element.onmouseout = function (e) {\n                return _this.isHoveringOverUIControl = false;\n            };\n        }\n    };\n    PointingDevice.prototype.GetPressure = function () {\n        return this.isDown === true && this.isInside === true ? 1 : 0;\n    };\n    PointingDevice.prototype.onMove = function (e) {\n        this.cursor = this.getCursorPosition(e);\n        this.ReportAction();\n    };\n    PointingDevice.prototype.onDown = function (e) {\n        if (this.isHoveringOverUIControl === false) {\n            this.isDown = true;\n            this.cursor = this.getCursorPosition(e);\n            this.ReportAction();\n        }\n    };\n    PointingDevice.prototype.onUp = function (e) {\n        this.isDown = false;\n        this.cursor = this.getCursorPosition(e);\n        this.ReportAction();\n    };\n    PointingDevice.prototype.onLeave = function (e) {\n        if (this.GetPressure() > 0) {\n            this.onMove(e);\n            this.isDown = false;\n            this.onMove(e);\n            this.isDown = true;\n        }\n        this.isInside = false;\n    };\n    PointingDevice.prototype.onOver = function (e) {\n        this.isInside = true;\n    };\n    PointingDevice.prototype.onLooseFocus = function (e) {\n        this.isInside = false;\n        this.isDown = false;\n    };\n    PointingDevice.prototype.getCursorPosition = function (e) {\n        if (e.clientX == undefined || e.clientY == undefined) {\n            console.log(\"Wrong 'getCursorPosition' parameter. Event data required.\");\n        }\n        return {\n            x: e.clientX,\n            y: e.clientY\n        };\n    };\n    PointingDevice.prototype.ReportAction = function () {\n        var state = new State_1.CursorState(this.timer.CurrentTime(), this.cursor.x, this.cursor.y, this.GetPressure());\n        this.events.trigger(VideoEvents_1.VideoEventType.CursorState, state);\n    };\n    return PointingDevice;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = PointingDevice;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/PointingDevice.ts\n **/","\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar PointingDevice_1 = require('./PointingDevice');\nvar Mouse = (function (_super) {\n    __extends(Mouse, _super);\n    function Mouse(events, board, timer) {\n        var _this = this;\n        _super.call(this, events, board, timer);\n        this.board.onmousemove = function (e) {\n            return _this.onMouseMove(e);\n        };\n        this.board.onmousedown = function (e) {\n            return _this.onMouseDown(e);\n        };\n        this.board.onmouseup = function (e) {\n            return _this.onMouseUp(e);\n        };\n        this.board.onmouseleave = function (e) {\n            return _this.onMouseLeave(e);\n        };\n        this.board.onmouseenter = function (e) {\n            return _this.onMouseEnter(e);\n        };\n        this.board.onmouseover = function (e) {\n            return _this.onMouseOver(e);\n        };\n    }\n    Mouse.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onmouseover = function (e) {\n                return _this.isHoveringOverUIControl = true;\n            };\n            element.onmouseout = function (e) {\n                return _this.isHoveringOverUIControl = false;\n            };\n        }\n    };\n    Mouse.prototype.onMouseMove = function (e) {\n        this.onMove(e);\n    };\n    Mouse.prototype.onMouseDown = function (e) {\n        this.onDown(e);\n    };\n    Mouse.prototype.onMouseUp = function (e) {\n        this.onUp(e);\n    };\n    Mouse.prototype.onMouseLeave = function (e) {\n        this.onLeave(e);\n    };\n    Mouse.prototype.onMouseEnter = function (e) {\n        if (e.buttons === 0) {\n            this.isDown = false;\n        }\n    };\n    Mouse.prototype.onMouseOver = function (e) {\n        this.isInside = true;\n    };\n    return Mouse;\n})(PointingDevice_1[\"default\"]);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Mouse;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Mouse.ts\n **/","\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Mouse_1 = require('./Mouse');\nvar TouchEventsAPI = (function (_super) {\n    __extends(TouchEventsAPI, _super);\n    function TouchEventsAPI(events, container, canvas, timer) {\n        var _this = this;\n        _super.call(this, events, container, timer);\n        this.canvas = canvas;\n        canvas.addEventListener(\"touchstart\", function (ev) {\n            return _this.TouchStart(ev);\n        });\n        canvas.addEventListener(\"touchend\", function (ev) {\n            return _this.TouchEnd(ev);\n        });\n        canvas.addEventListener(\"touchcancel\", function (ev) {\n            return _this.TouchEnd(ev);\n        });\n        canvas.addEventListener(\"touchleave\", function (ev) {\n            return _this.TouchLeave(ev);\n        });\n        canvas.addEventListener(\"touchmove\", function (ev) {\n            return _this.TouchMove(ev);\n        });\n    }\n    TouchEventsAPI.prototype.TouchStart = function (event) {\n        event.preventDefault();\n        var touches = event.changedTouches;\n        var touch = touches[0];\n        this.currentTouch = touch.identifier;\n        this.isInside = true;\n        this.isHoveringOverUIControl = false;\n        this.onMouseDown(touch);\n    };\n    TouchEventsAPI.prototype.TouchLeave = function (event) {\n        event.preventDefault();\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseLeave(touch);\n    };\n    TouchEventsAPI.prototype.TouchEnd = function (event) {\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseUp(touch);\n        this.currentTouch = null;\n    };\n    TouchEventsAPI.prototype.TouchMove = function (event) {\n        event.preventDefault();\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseMove(touch);\n    };\n    TouchEventsAPI.prototype.filterTouch = function (touchList) {\n        for (var i = 0; i < touchList.length; i++) {\n            var element = touchList[i];\n            if (element.identifier === this.currentTouch) {\n                return element;\n            }\n        }\n        return null;\n    };\n    return TouchEventsAPI;\n})(Mouse_1[\"default\"]);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = TouchEventsAPI;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Touch.ts\n **/","/// <reference path=\"audio.d.ts\" />\n'use strict';\n\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Errors_1 = require('../Helpers/Errors');\nvar AudioPlayer_1 = require('./AudioPlayer');\nvar AudioRecorder = (function () {\n    function AudioRecorder(config, events) {\n        var _this = this;\n        this.events = events;\n        this.recording = false;\n        this.initSuccessful = false;\n        this.doNotStartRecording = false;\n        this.settings = {\n            host: \"http://localhost\",\n            port: 4000,\n            path: \"/upload/audio\",\n            recordingWorkerPath: \"/js/workers/RecordingWorker.js\"\n        };\n        if (!!config.host) this.settings.host = config.host;\n        if (!!config.port) this.settings.port = config.port;\n        if (!!config.path) this.settings.path = config.path;\n        this.recording = false;\n        this.muted = false;\n        this.events.on(VideoEvents_1.VideoEventType.MuteAudioRecording, function () {\n            return _this.muted = !_this.muted;\n        });\n        this.error = function (msg) {\n            return console.log(\"AudioRecorder error: \", msg);\n        };\n        this.success = function (msg) {\n            return console.log(\"AudioRecorder success: \", msg);\n        };\n    }\n    AudioRecorder.prototype.Init = function (success) {\n        var _this = this;\n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        if (!!navigator.getUserMedia && window.hasOwnProperty(\"AudioContext\")) {\n            var context = new AudioContext() || null;\n            this.events.trigger(VideoEvents_1.VideoEventType.Busy);\n            navigator.getUserMedia({\n                video: false,\n                audio: true\n            }, function (localMediaStream) {\n                if (_this.doNotStartRecording === false) {\n                    _this.input = context.createMediaStreamSource(localMediaStream);\n                    var bufferSize = 2048;\n                    _this.scriptProcessorNode = context.createScriptProcessor(bufferSize, 1, 1);\n                    _this.scriptProcessorNode.onaudioprocess = function (data) {\n                        return _this.processData(data);\n                    };\n                    _this.input.connect(_this.scriptProcessorNode);\n                    _this.scriptProcessorNode.connect(context.destination);\n                    _this.initSuccessful = true;\n                    _this.CreateAudioProcessor(\"web-socket\", _this.settings, function () {\n                        return console.log(\"Audio recording is ready.\");\n                    });\n                    if (!!success) {\n                        success();\n                    }\n                    _this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingAvailable);\n                    _this.events.trigger(VideoEvents_1.VideoEventType.RegisterRecordingTool, \"audio-recorder\");\n                    _this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n                }\n            }, function (err) {\n                if (err.name === \"PermissionDeniedError\") {\n                    Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"User didn't allow microphone recording.\");\n                }\n                Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"Can't record audio\", err);\n                _this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n                _this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n            });\n        } else {\n            console.log(\"getUserMedia not supported by the browser\");\n            Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"getUserMedia not supported by the browser\");\n            this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n        }\n    };\n    AudioRecorder.prototype.CreateAudioProcessor = function (processorType, cfg, success, error) {\n        var _this = this;\n        if (Worker) {\n            this.recordingWorker = new Worker(cfg.recordingWorkerPath);\n            this.recordingWorker.onmessage = function (e) {\n                return _this.ReceiveMessageFromWorker(e);\n            };\n            this.recordingWorker.postMessage({\n                cmd: \"init\",\n                AudioProcessorType: processorType || \"web-sockets\",\n                port: cfg.port,\n                host: cfg.host,\n                path: cfg.path\n            });\n            if (!!success) {\n                success();\n            }\n        } else {\n            Errors_1['default'].Report(Errors_1.ErrorType.Fatal, \"No web workers support - this feature is not supported by the browser.\");\n            if (!!error) {\n                error();\n            }\n        }\n    };\n    AudioRecorder.prototype.Start = function () {\n        if (this.initSuccessful === true) {\n            if (!this.recordingWorker) {\n                Errors_1['default'].Report(Errors_1.ErrorType.Fatal, \"No audio processor was set.\");\n                return false;\n            } else {\n                this.recording = true;\n                return true;\n            }\n        } else {\n            this.doNotStartRecording = true;\n            return false;\n        }\n    };\n    AudioRecorder.prototype.Continue = function () {\n        if (this.initSuccessful) {\n            if (!this.recordingWorker) {\n                Errors_1['default'].Report(Errors_1.ErrorType.Fatal, \"No audio processor was set.\");\n                return false;\n            } else {\n                this.recording = true;\n                return true;\n            }\n        } else {}\n        return false;\n    };\n    AudioRecorder.prototype.Pause = function () {\n        if (this.initSuccessful) {\n            this.recording = false;\n            return true;\n        } else {}\n        return false;\n    };\n    AudioRecorder.prototype.Stop = function (success, error) {\n        this.success = success;\n        this.error = error;\n        if (this.initSuccessful === true) {\n            if (this.Pause()) {\n                if (this.recordingWorker) {\n                    this.recordingWorker.postMessage({\n                        cmd: \"finish\"\n                    });\n                }\n            }\n        } else {\n            Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"Can't stop AudioRecorder - it wasn't ever initialised.\");\n            error();\n        }\n    };\n    AudioRecorder.prototype.isRecording = function () {\n        return this.initSuccessful;\n    };\n    AudioRecorder.prototype.processData = function (data) {\n        if (this.recording === false) {\n            return;\n        }\n        var left = data.inputBuffer.getChannelData(0);\n        if (this.muted) {\n            for (var i = 0; i < left.length; i++) {\n                left[i] = 0;\n            }\n        }\n        if (this.recordingWorker) {\n            this.recordingWorker.postMessage({\n                cmd: \"pushData\",\n                data: left\n            });\n        }\n    };\n    AudioRecorder.prototype.ReceiveMessageFromWorker = function (e) {\n        var msg = e.data;\n        if (!msg.hasOwnProperty(\"type\")) {\n            console.log(\"Worker response is invalid (missing property 'type')\", e.data);\n            this.error(\"AudioRecorder received invalid message from the worker.\");\n            return;\n        }\n        switch (msg.type) {\n            case \"error\":\n                this.error(msg.msg);\n            case \"network-error\":\n                this.WorkerNetworkError();\n                break;\n            case \"finished\":\n                this.WorkerFinished(msg);\n                break;\n            default:\n                console.log(\"Unknown message type: \", msg.type, msg);\n                break;\n        }\n    };\n    AudioRecorder.prototype.WorkerFinished = function (msg) {\n        this.recordingWorker.terminate();\n        this.recordingWorker = null;\n        this.events.trigger(VideoEvents_1.VideoEventType.RecordingToolFinished, \"audio-recorder\");\n        var sources = [];\n        for (var i = 0; i < msg.files.length; i++) {\n            var file = msg.files[i];\n            var source = new AudioPlayer_1.AudioSource(file.url, AudioPlayer_1.AudioSource.StringToType(file.type));\n            sources.push(source);\n        }\n        this.success(sources);\n    };\n    AudioRecorder.prototype.WorkerNetworkError = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n    };\n    return AudioRecorder;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = AudioRecorder;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/AudioData/AudioRecorder.ts\n **/","'use strict';\n\nvar Vector_1 = require('../Helpers/Vector');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar DynaDraw = (function () {\n    function DynaDraw(events, pathFactory, slowSimulation, minBrushSize, maxBrushSize, timer) {\n        var _this = this;\n        this.events = events;\n        this.pathFactory = pathFactory;\n        this.slowSimulation = slowSimulation;\n        this.minBrushSize = minBrushSize;\n        this.maxBrushSize = maxBrushSize;\n        this.minMass = 1;\n        this.maxMass = 10;\n        this.minFriction = 0.4;\n        this.maxFriction = 0.6;\n        this.brushes = {};\n        this.oneFrame = 1000 / 60;\n        this.cursor = new BrushTip(true, timer);\n        if (slowSimulation === true) {\n            requestAnimationFrame(function (time) {\n                _this.lastAnimationTime = time;\n                _this.Tick(time);\n            });\n        } else {\n            requestAnimationFrame(function () {\n                return _this.TickWhile();\n            });\n        }\n    }\n    DynaDraw.prototype.SetBrushSize = function (size) {\n        this.currentBrushSize = size;\n    };\n    DynaDraw.prototype.interpolateMass = function (brushSize) {\n        return this.minMass + (this.maxMass - this.minMass) * (brushSize - this.minBrushSize) / (this.maxBrushSize - this.minBrushSize);\n    };\n    DynaDraw.prototype.interpolateFriction = function (brushSize) {\n        return this.maxFriction - (this.maxFriction - this.minFriction) * (brushSize - this.minBrushSize) / (this.maxBrushSize - this.minBrushSize);\n    };\n    DynaDraw.prototype.GetBrush = function (brushSize) {\n        if (!this.brushes[brushSize]) {\n            this.brushes[brushSize] = new BrushInstance(this.interpolateMass(brushSize), this.interpolateFriction(brushSize), brushSize);\n        }\n        return this.brushes[brushSize];\n    };\n    DynaDraw.prototype.ObserveCursorMovement = function (cursor) {\n        try {\n            var nextPoint = new Vector_1['default'](cursor.X, cursor.Y);\n            if (cursor.Pressure > 0) {\n                if (!this.lastState || this.lastState.Pressure === 0) {\n                    this.path = this.pathFactory();\n                    this.events.trigger(VideoEvents_1.VideoEventType.StartPath, this.path);\n                    this.StartPath(nextPoint, cursor.Pressure);\n                } else {\n                    this.NextPoint(nextPoint, cursor.Pressure);\n                }\n            } else if (this.lastState && this.lastState.Pressure > 0) {\n                this.EndPath(nextPoint, this.lastState.Pressure);\n            }\n        } catch (err) {\n            console.log(\"ProcessNewState error: \", err);\n        }\n        this.lastState = cursor;\n    };\n    DynaDraw.prototype.StartPath = function (position, pressure) {\n        this.cursor.Reset(position, this.GetBrush(this.currentBrushSize.Size));\n        this.position = position;\n        this.pressure = pressure;\n        this.cursor.StartPath(this.path, position, pressure);\n    };\n    DynaDraw.prototype.NextPoint = function (position, pressure) {\n        this.position = position;\n        this.pressure = pressure;\n    };\n    DynaDraw.prototype.EndPath = function (position, pressure) {\n        this.position = position;\n    };\n    DynaDraw.prototype.TickWhile = function () {\n        var _this = this;\n        if (!!this.position) {\n            var d2 = 0;\n            var step = 0;\n            do {\n                d2 = this.cursor.ApplyForce(this.position);\n                step += d2;\n                if (step > this.currentBrushSize.Size) {\n                    this.cursor.Draw(this.path, this.pressure);\n                    step = 0;\n                }\n            } while (d2 > 0);\n            if (step > 0) {\n                this.cursor.Draw(this.path, this.pressure);\n            }\n            this.position = null;\n        }\n        requestAnimationFrame(function (time) {\n            return _this.TickWhile();\n        });\n    };\n    DynaDraw.prototype.Tick = function (time) {\n        var _this = this;\n        if (!!this.path) {\n            if (this.cursor.ApplyForce(this.position) > 0) {\n                this.cursor.Draw(this.path, this.pressure);\n            } else {\n                if (!this.position) {\n                    this.path = null;\n                }\n            }\n        }\n        this.lastAnimationTime = time;\n        requestAnimationFrame(function (time) {\n            return _this.Tick(time);\n        });\n    };\n    return DynaDraw;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = DynaDraw;\nvar BrushInstance = (function () {\n    function BrushInstance(mass, friction, size) {\n        this.mass = mass;\n        this.friction = friction;\n        this.size = size;\n    }\n    Object.defineProperty(BrushInstance.prototype, \"Mass\", {\n        get: function get() {\n            return this.mass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushInstance.prototype, \"Friction\", {\n        get: function get() {\n            return this.friction;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushInstance.prototype, \"Size\", {\n        get: function get() {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return BrushInstance;\n})();\nvar Threshold;\n(function (Threshold) {\n    Threshold[Threshold[\"Velocity\"] = 1] = \"Velocity\";\n})(Threshold || (Threshold = {}));\nvar BrushTip = (function () {\n    function BrushTip(calculateSpeed, timer) {\n        this.calculateSpeed = calculateSpeed;\n        this.timer = timer;\n    }\n    BrushTip.prototype.Reset = function (position, brush) {\n        this.brush = brush;\n        this.position = position.clone();\n        this.startPosition = position.clone();\n        this.previousPosition = position.clone();\n        this.previousPressure = -1;\n        this.mousePosition = position.clone();\n        this.acceleration = new Vector_1['default'](0, 0);\n        this.velocity = new Vector_1['default'](0, 0);\n        this.firstSegment = true;\n    };\n    BrushTip.prototype.ApplyForce = function (mouse) {\n        if (mouse !== null) {\n            var force = mouse.clone().subtract(this.position);\n            this.acceleration = force.clone().scale(1 / this.brush.Mass);\n            this.velocity.add(this.acceleration);\n            this.mousePosition = mouse;\n        }\n        this.velocity.scale(1 - this.brush.Friction);\n        if (this.velocity.getSizeSq() < 1) {\n            return 0;\n        }\n        mouse = null;\n        force = null;\n        this.acceleration = null;\n        this.angle = this.velocity.getNormal();\n        this.position.add(this.velocity);\n        return this.velocity.getSizeSq();\n    };\n    BrushTip.prototype.Draw = function (path, pressure) {\n        var relativeSpeed = this.calculateSpeed === true ? this.velocity.getSize() / (this.brush.Size * this.brush.Size) : 0;\n        var width = this.getRadius(pressure, relativeSpeed);\n        this.angle.scale(width);\n        if (this.firstSegment) {\n            path.InitPath(this.startPosition.clone().add(this.angle), this.startPosition.clone().subtract(this.angle));\n            this.firstSegment = false;\n        }\n        path.ExtendPath(this.position.clone().add(this.angle), this.position.clone().subtract(this.angle));\n        path.Draw();\n    };\n    BrushTip.prototype.StartPath = function (path, pt, pressure) {\n        path.StartPath(pt, this.getRadius(pressure, 0));\n    };\n    BrushTip.prototype.getRadius = function (pressure, speed) {\n        if (this.previousPressure < 0) this.previousPressure = pressure;\n        var interpolatedPressure = this.interpolatePressure(pressure);\n        var radius = this.speedFactor(speed) * this.brush.Size * interpolatedPressure / 2;\n        this.previousPosition = this.position.clone();\n        this.previousPressure = interpolatedPressure;\n        return radius;\n    };\n    BrushTip.prototype.interpolatePressure = function (mousePressure) {\n        var d1 = this.position.distanceTo(this.previousPosition);\n        var d2 = this.position.distanceTo(this.mousePosition);\n        if (d1 === 0 && d2 === 0) {\n            return mousePressure;\n        }\n        return d1 / (d1 + d2) * (mousePressure - this.previousPressure) + this.previousPressure;\n    };\n    BrushTip.prototype.speedFactor = function (speed) {\n        return Math.max(1 - speed, 0.4);\n    };\n    BrushTip.threshold = 0.001;\n    return BrushTip;\n})();\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Drawing/DynaDraw.ts\n **/","'use strict';\n\nvar SVG_1 = require('../Helpers/SVG');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Vector_1 = require('../Helpers/Vector');\nvar Path_1 = require('./Path');\nvar SVGDrawer = (function () {\n    function SVGDrawer(curved) {\n        if (curved === void 0) {\n            curved = true;\n        }\n        this.curved = curved;\n    }\n    SVGDrawer.prototype.SetEvents = function (events) {\n        this.events = events;\n    };\n    SVGDrawer.prototype.CreateCanvas = function () {\n        this.svg = SVG_1['default'].CreateElement(\"svg\");\n        var backgroundLayer = SVG_1['default'].CreateElement(\"g\");\n        this.bg = SVG_1['default'].CreateElement(\"rect\", {\n            id: \"background\"\n        });\n        backgroundLayer.appendChild(this.bg);\n        this.svg.appendChild(backgroundLayer);\n        this.canvas = SVG_1['default'].CreateElement(\"g\", {\n            id: \"canvas\"\n        });\n        this.svg.appendChild(this.canvas);\n        return this.svg;\n    };\n    SVGDrawer.prototype.Stretch = function () {\n        var parent = this.svg.parentElement;\n        var width = parent.clientWidth;\n        var height = parent.clientHeight;\n        SVG_1['default'].SetAttributes(this.svg, {\n            width: width,\n            height: height\n        });\n        SVG_1['default'].SetAttributes(this.bg, {\n            width: width,\n            height: height\n        });\n        this.events.trigger(VideoEvents_1.VideoEventType.CanvasSize, width, height);\n    };\n    SVGDrawer.prototype.ClearCanvas = function (color) {\n        while (!!this.canvas.firstChild) {\n            this.canvas.removeChild(this.canvas.firstChild);\n        }\n        SVG_1['default'].SetAttributes(this.bg, { fill: color.CssValue });\n    };\n    SVGDrawer.prototype.SetCurrentColor = function (color) {\n        this.currentColor = color;\n    };\n    SVGDrawer.prototype.CreatePath = function (events) {\n        return new Path_1.SvgPath(events, this.curved, this.currentColor.CssValue, this.canvas);\n    };\n    SVGDrawer.prototype.SetupOutputCorrection = function (sourceWidth, sourceHeight) {\n        var wr = this.svg.clientWidth / sourceWidth;\n        var hr = this.svg.clientHeight / sourceHeight;\n        var min = Math.min(wr, hr);\n        SVG_1['default'].SetAttributes(this.svg, {\n            \"viewBox\": \"0 0 \" + sourceWidth + \" \" + sourceHeight\n        });\n        if (min === wr) {\n            this.events.trigger(VideoEvents_1.VideoEventType.CursorOffset, new Vector_1['default'](0, (this.svg.clientHeight - sourceHeight * min) / 2));\n        } else {\n            this.events.trigger(VideoEvents_1.VideoEventType.CursorOffset, new Vector_1['default']((this.svg.clientWidth - sourceWidth * min) / 2, 0));\n        }\n        return min;\n    };\n    return SVGDrawer;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = SVGDrawer;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Drawing/SVGDrawer.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar BasicElements_1 = require('./BasicElements');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar ChangeColorButton = (function (_super) {\n    __extends(ChangeColorButton, _super);\n    function ChangeColorButton(events, color, callback) {\n        var _this = this;\n        _super.call(this, \"\");\n        this.events = events;\n        this.SetColor(color);\n        this.GetHTML().onclick = function (e) {\n            return !!callback ? callback() : _this.ChangeColor(e);\n        };\n    }\n    ChangeColorButton.prototype.ChangeColor = function (e) {\n        if (!!ChangeColorButton.active) {\n            ChangeColorButton.active.GetHTML().classList.remove(\"active\");\n        }\n        this.GetHTML().classList.add(\"active\");\n        ChangeColorButton.active = this;\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeColor, this.color);\n    };\n    ChangeColorButton.prototype.SetColor = function (color) {\n        this.color = color;\n        HTML_1['default'].SetAttributes(this.GetHTML(), {\n            'class': \"option\",\n            \"data-color\": color.CssValue,\n            style: \"background-color: \" + color.CssValue\n        });\n    };\n    return ChangeColorButton;\n})(BasicElements_1.Button);\nexports.ChangeColorButton = ChangeColorButton;\nvar ChangeBrushSizeButton = (function (_super) {\n    __extends(ChangeBrushSizeButton, _super);\n    function ChangeBrushSizeButton(events, size) {\n        var _this = this;\n        _super.call(this, \"\");\n        this.events = events;\n        this.size = size;\n        var dot = HTML_1['default'].CreateElement(\"span\", {\n            style: \"width: \" + size.CssValue + \";\\t\\n\\t\\t\\t\\t\\t\\theight: \" + size.CssValue + \";\\n\\t\\t\\t\\t\\t\\tborder-radius: \" + size.Size / 2 + size.Unit + \"; \\n\\t\\t\\t\\t\\t\\tdisplay: inline-block;\\n\\t\\t\\t\\t\\t\\tbackground: black;\\n\\t\\t\\t\\t\\t\\tmargin-top: \" + -size.Size / 2 + size.Unit + \";\",\n            'class': \"dot\",\n            \"data-size\": size.Size\n        });\n        this.GetHTML().appendChild(dot);\n        HTML_1['default'].SetAttributes(this.GetHTML(), {\n            'class': \"option\",\n            \"data-size\": size.Size\n        });\n        this.GetHTML().onclick = function (e) {\n            return _this.ChangeSize(e);\n        };\n    }\n    ChangeBrushSizeButton.prototype.ChangeSize = function (e) {\n        e.preventDefault();\n        if (!!ChangeBrushSizeButton.active) {\n            ChangeBrushSizeButton.active.GetHTML().classList.remove(\"active\");\n        }\n        this.GetHTML().classList.add(\"active\");\n        ChangeBrushSizeButton.active = this;\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize, this.size);\n    };\n    return ChangeBrushSizeButton;\n})(BasicElements_1.Button);\nexports.ChangeBrushSizeButton = ChangeBrushSizeButton;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/Buttons.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar HelperFunctions_1 = require('../Helpers/HelperFunctions');\nvar BasicElements_1 = require('./BasicElements');\nvar Buttons_1 = require('./Buttons');\nvar Board_1 = require('./Board');\nvar Color_1 = require('../UI/Color');\nvar RecorderUI = (function (_super) {\n    __extends(RecorderUI, _super);\n    function RecorderUI(id, events) {\n        _super.call(this, \"div\", id + \"-recorder\");\n        this.id = id;\n        this.events = events;\n        this.tickingInterval = 100;\n        this.AddClass(\"vector-video-wrapper\");\n        this.isRecording = false;\n        this.isBusy = false;\n        this.micIsMuted = false;\n    }\n    Object.defineProperty(RecorderUI.prototype, \"Width\", {\n        get: function get() {\n            return this.board.Width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecorderUI.prototype, \"Height\", {\n        get: function get() {\n            return this.board.Height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecorderUI.prototype, \"BackgroundColor\", {\n        get: function get() {\n            return Color_1['default'].BackgroundColor.CssValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecorderUI.prototype.CreateHTML = function (autohide, colorPallete, brushSizes) {\n        this.board = this.CreateBoard();\n        this.controls = new BasicElements_1.Panel(\"div\", this.id + \"-controls\").AddChildren(this.CreateButtonsPanel().AddClass(\"ui-controls-panel\"), this.CreateColorsPanel(colorPallete).AddClass(\"ui-controls-panel\"), this.CreateBrushSizesPanel(brushSizes).AddClass(\"ui-controls-panel\"), this.CreateEraserPanel().AddClass(\"ui-controls-panel\"), this.CreateEraseAllPanel().AddClass(\"ui-controls-panel\"), this.CreateMicPanel().AddClass(\"ui-controls-panel\")).AddClasses(\"ui-controls\", \"ui-control\");\n        !!autohide && this.controls.AddClass(\"autohide\");\n        this.AddChildren(this.board, new BasicElements_1.Panel(\"div\").AddClass(\"ui-controls-wrapper\").AddChild(this.controls));\n    };\n    RecorderUI.prototype.Busy = function () {\n        this.AddClass(\"busy\");\n        this.isBusy = true;\n    };\n    RecorderUI.prototype.Ready = function () {\n        this.RemoveClass(\"busy\");\n        this.isBusy = false;\n    };\n    RecorderUI.prototype.SetBusyText = function (text) {\n        HTML_1['default'].SetAttributes(this.GetHTML(), { \"data-busy-string\": text });\n    };\n    RecorderUI.prototype.AcceptCanvas = function (canvas) {\n        this.board.GetHTML().appendChild(canvas);\n    };\n    RecorderUI.prototype.CreateBoard = function () {\n        var board = new Board_1['default'](this.id + \"-board\", this.events);\n        return board;\n    };\n    RecorderUI.prototype.CreateButtonsPanel = function () {\n        var _this = this;\n        var buttonsPanel = new BasicElements_1.Panel(\"div\", this.id + \"-panels\");\n        this.recPauseButton = new BasicElements_1.IconButton(\"icon-rec\", this.Localization.Record, function (e) {\n            return _this.RecordPause();\n        });\n        this.uploadButton = new BasicElements_1.IconButton(\"icon-upload\", this.Localization.Upload, function (e) {\n            return _this.InitializeUpload();\n        });\n        HTML_1['default'].SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n        buttonsPanel.AddChildren(new BasicElements_1.H2(this.Localization.RecPause), new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\").AddChildren(this.recPauseButton, this.uploadButton));\n        return buttonsPanel;\n    };\n    RecorderUI.prototype.RecordPause = function () {\n        if (this.isRecording === true) {\n            this.PauseRecording();\n            this.uploadButton.GetHTML().removeAttribute(\"disabled\");\n            this.RemoveClass(\"recording\");\n        } else {\n            this.StartRecording();\n            HTML_1['default'].SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n            this.AddClass(\"recording\");\n        }\n    };\n    RecorderUI.prototype.StartRecording = function () {\n        var _this = this;\n        if (this.isRecording === false) {\n            this.isRecording = true;\n            this.recPauseButton.ChangeIcon(\"icon-pause\");\n            this.board.IsRecording = true;\n            this.ticking = setInterval(function () {\n                return _this.Tick();\n            }, this.tickingInterval);\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    RecorderUI.prototype.PauseRecording = function () {\n        if (this.isRecording === true) {\n            this.isRecording = false;\n            this.recPauseButton.ChangeIcon(\"icon-rec\");\n            this.board.IsRecording = false;\n            clearInterval(this.ticking);\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        }\n    };\n    RecorderUI.prototype.Tick = function () {\n        this.recPauseButton.ChangeContent(HelperFunctions_1.millisecondsToString(this.Timer.CurrentTime()));\n    };\n    RecorderUI.prototype.InitializeUpload = function () {\n        HTML_1['default'].SetAttributes(this.recPauseButton.GetHTML(), { \"disabled\": \"disabled\" });\n        HTML_1['default'].SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n        this.events.trigger(VideoEvents_1.VideoEventType.StartUpload);\n    };\n    RecorderUI.prototype.CreateColorsPanel = function (colorPallete) {\n        var colorsGroup = new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\");\n        for (var i = 0; i < colorPallete.length; i++) {\n            var btn = new Buttons_1.ChangeColorButton(this.events, colorPallete[i]);\n            colorsGroup.AddChild(btn);\n        }\n        return new BasicElements_1.Panel(\"div\").AddClass(\"color-pallete\").AddChildren(new BasicElements_1.H2(this.Localization.ChangeColor), colorsGroup);\n    };\n    RecorderUI.prototype.CreateBrushSizesPanel = function (brushSizes) {\n        var sizesGroup = new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\");\n        for (var i = 0; i < brushSizes.length; i++) {\n            sizesGroup.AddChild(new Buttons_1.ChangeBrushSizeButton(this.events, brushSizes[i]));\n        }\n        return new BasicElements_1.Panel(\"div\").AddClass(\"brush-sizes\").AddChildren(new BasicElements_1.H2(this.Localization.ChangeSize), sizesGroup);\n    };\n    RecorderUI.prototype.CreateEraserPanel = function () {\n        this.switchToEraserButton = new Buttons_1.ChangeColorButton(this.events, Color_1['default'].BackgroundColor);\n        return new BasicElements_1.Panel(\"div\", this.id + \"-erase\").AddChildren(new BasicElements_1.H2(this.Localization.Erase), this.switchToEraserButton);\n    };\n    RecorderUI.prototype.CreateEraseAllPanel = function () {\n        var _this = this;\n        var panel = new BasicElements_1.Panel(\"div\", this.id + \"-erase\");\n        var title = new BasicElements_1.H2(this.Localization.EraseAll);\n        panel.AddChild(title);\n        this.eraseAllButton = new Buttons_1.ChangeColorButton(this.events, Color_1['default'].BackgroundColor, function () {\n            return _this.EraseAll();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.ChangeColor, function (color) {\n            _this.currentColor = color;\n            _this.eraseAllButton.SetColor(color);\n        });\n        panel.AddChild(this.eraseAllButton);\n        return panel;\n    };\n    RecorderUI.prototype.EraseAll = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.ClearCanvas, this.currentColor);\n        this.switchToEraserButton.SetColor(this.currentColor);\n    };\n    RecorderUI.prototype.CreateMicPanel = function () {\n        var _this = this;\n        this.micButton = new BasicElements_1.IconOnlyButton(\"icon-mic-off\", this.Localization.AudioRecordingUnavailable, function () {\n            return _this.MuteMic();\n        });\n        HTML_1['default'].SetAttributes(this.micButton.GetHTML(), { disabled: \"disabled\" });\n        this.events.on(VideoEvents_1.VideoEventType.AudioRecordingAvailable, function () {\n            _this.micButton.GetHTML().removeAttribute(\"disabled\");\n            if (!_this.micIsMuted) {\n                _this.micButton.ChangeIcon(\"icon-mic\").ChangeContent(_this.Localization.AudioRecordingAvailable);\n            }\n        });\n        this.events.on(VideoEvents_1.VideoEventType.AudioRecordingUnavailable, function () {\n            _this.micButton.ChangeIcon(\"icon-mic-off\").ChangeContent(_this.Localization.AudioRecordingUnavailable);\n            HTML_1['default'].SetAttributes(_this.micButton.GetHTML(), { disabled: \"disabled\" });\n        });\n        return new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.AudioRecording), this.micButton);\n    };\n    RecorderUI.prototype.MuteMic = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.MuteAudioRecording);\n        this.micIsMuted = !this.micIsMuted;\n        if (this.micIsMuted) {\n            this.micButton.ChangeIcon(\"icon-mic-off\");\n        } else {\n            this.micButton.ChangeIcon(\"icon-mic\");\n        }\n    };\n    return RecorderUI;\n})(BasicElements_1.Panel);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = RecorderUI;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/RecorderUI.ts\n **/","/// <reference path=\"PointingDevice\" />\n\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Touch_1 = require('./Touch');\nvar AppleForceTouch = (function (_super) {\n    __extends(AppleForceTouch, _super);\n    function AppleForceTouch(events, board, canvas, timer) {\n        var _this = this;\n        _super.call(this, events, board, canvas, timer);\n        this.board.onmousemove = function (e) {\n            return _this.checkForce(e.webkitForce);\n        };\n        this.forceLevel = 0;\n    }\n    AppleForceTouch.isAvailable = function () {\n        return \"WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN\" in MouseEvent;\n    };\n    AppleForceTouch.prototype.GetPressure = function () {\n        return this.forceLevel;\n    };\n    AppleForceTouch.prototype.checkForce = function (webkitForce) {\n        this.forceLevel = Math.min(1, webkitForce);\n    };\n    return AppleForceTouch;\n})(Touch_1[\"default\"]);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = AppleForceTouch;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/AppleForceTouch.ts\n **/","/// <reference path=\"PointingDevice\" />\n\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar PointingDevice_1 = require('./PointingDevice');\nvar PointerEventsAPI = (function (_super) {\n    __extends(PointerEventsAPI, _super);\n    function PointerEventsAPI(events, board, timer) {\n        var _this = this;\n        _super.call(this, events, board, timer);\n        this.board.addEventListener(\"pointermove\", function (e) {\n            return _this.onPointerMove(e);\n        });\n        this.board.addEventListener(\"pointerdown\", function (e) {\n            return _this.onPointerDown(e);\n        });\n        this.board.addEventListener(\"pointerup\", function (e) {\n            return _this.onPointerUp(e);\n        });\n        this.board.addEventListener(\"pointerleave\", function (e) {\n            return _this.onPointerLeave(e);\n        });\n        this.board.addEventListener(\"pointerenter\", function (e) {\n            return _this.onPointerLeave(e);\n        });\n        this.board.addEventListener(\"pointerover\", function (e) {\n            return _this.onPointerOver(e);\n        });\n        this.currentEvent = null;\n        this.isDown = false;\n    }\n    PointerEventsAPI.prototype.GetPressure = function () {\n        if (this.isDown === false || this.currentEvent === null) {\n            return 0;\n        }\n        if (this.currentEvent.pointerType === \"pen\") {\n            return this.currentEvent.pressure;\n        }\n        return 1;\n    };\n    PointerEventsAPI.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onpointerover = function (e) {\n                return _this.isHoveringOverUIControl = true;\n            };\n            element.onpointerout = function (e) {\n                return _this.isHoveringOverUIControl = false;\n            };\n        }\n    };\n    PointerEventsAPI.prototype.onPointerMove = function (e) {\n        this.onMove(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerDown = function (e) {\n        this.onDown(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerUp = function (e) {\n        this.onUp(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerLeave = function (e) {\n        this.onLeave(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerEnter = function (e) {\n        if (e.buttons === 0) {\n            this.isDown = false;\n        }\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerOver = function (e) {\n        this.isInside = true;\n        this.currentEvent = e;\n    };\n    return PointerEventsAPI;\n})(PointingDevice_1[\"default\"]);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = PointerEventsAPI;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Pointer.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Mouse_1 = require('./Mouse');\nvar HTML_1 = require('../Helpers/HTML');\nvar WacomPointerType;\n(function (WacomPointerType) {\n    WacomPointerType[WacomPointerType[\"OutOfProximity\"] = 0] = \"OutOfProximity\";\n    WacomPointerType[WacomPointerType[\"Pen\"] = 1] = \"Pen\";\n    WacomPointerType[WacomPointerType[\"Mouse\"] = 2] = \"Mouse\";\n    WacomPointerType[WacomPointerType[\"Eraseer\"] = 3] = \"Eraseer\";\n})(WacomPointerType || (WacomPointerType = {}));\nvar WacomTablet = (function (_super) {\n    __extends(WacomTablet, _super);\n    function WacomTablet(events, board, timer, penApi) {\n        _super.call(this, events, board, timer);\n        this.penApi = penApi;\n    }\n    WacomTablet.Factory = function (api) {\n        return function (events, board, timer) {\n            return new WacomTablet(events, board, timer, api);\n        };\n    };\n    WacomTablet.prototype.GetPressure = function () {\n        if (this.isDown === false || this.isInside === false) {\n            return 0;\n        }\n        if (this.penApi && this.penApi.pointerType == WacomPointerType.Pen) {\n            return this.isInside === true ? this.penApi.pressure : 0;\n        } else {\n            return _super.prototype.GetPressure.call(this);\n        }\n    };\n    WacomTablet.IsAvailable = function () {\n        var plugin = HTML_1['default'].CreateElement(\"object\", { type: \"application/x-wacomtabletplugin\" });\n        document.body.appendChild(plugin);\n        if (!!plugin.version === true) {\n            console.log(\"Wacom tablet is connected and plugin installed. Plugin version is \" + plugin.version + \".\");\n            return plugin.penAPI;\n        }\n        return null;\n    };\n    return WacomTablet;\n})(Mouse_1['default']);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = WacomTablet;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/WacomTablet.ts\n **/"],"sourceRoot":""}