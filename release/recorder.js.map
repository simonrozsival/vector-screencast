{"version":3,"sources":["webpack:///./src/lib/Recorder.ts","webpack:///./src/lib/Drawing/DynaDraw.ts","webpack:///./src/lib/AudioData/AudioRecorder.ts","webpack:///./src/lib/UI/RecorderUI.ts","webpack:///./src/lib/UI/Buttons.ts","webpack:///./src/lib/VideoData/selectBestInputMethod.ts","webpack:///./src/lib/VideoData/WacomTablet.ts","webpack:///./src/lib/VideoData/Mouse.ts","webpack:///./src/lib/VideoData/PointingDevice.ts","webpack:///./src/lib/VideoData/Pointer.ts","webpack:///./src/lib/VideoData/AppleForceTouch.ts","webpack:///./src/lib/VideoData/Touch.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E,oCAAoC,EAAE;AAClH,0EAAyE,iCAAiC,EAAE;AAC5G,0EAAyE,wCAAwC,EAAE;AACnH,0EAAyE,iCAAiC,EAAE;AAC5G,+DAA8D,sBAAsB,EAAE;AACtF,+DAA8D,sBAAsB,EAAE;AACtF,qEAAoE,4BAA4B,EAAE;AAClG;AACA,8DAA6D,qBAAqB,EAAE;AACpF,+DAA8D,sBAAsB,EAAE;AACtF;AACA;AACA;AACA,UAAS;AACT,+EAA8E,sGAAsG,EAAE;AACtL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT,sFAAqF,8EAA8E,EAAE;AACrK,sFAAqF,8EAA8E,EAAE;AACrK;AACA;AACA,gEAA+D,mCAAmC,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,MAAK;AACL;AACA,2BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,qCAAqC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;AC5RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,gDAA+C,0BAA0B,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,gDAA+C,0BAA0B,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,yBAAyB,EAAE;AAC1E;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,kBAAkB,EAAE;AAC9C;AACA;AACA,MAAK;AACL;AACA,2BAA0B,sBAAsB,EAAE;AAClD;AACA;AACA,MAAK;AACL;AACA,2BAA0B,kBAAkB,EAAE;AAC9C;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC,8BAA8B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACrND;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAqF,mCAAmC,EAAE;AAC1H,sCAAqC,kDAAkD;AACvF,wCAAuC,oDAAoD;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,iFAAgF,gCAAgC;AAChH;AACA;AACA;AACA,2FAA0F,iDAAiD,EAAE;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D,0CAA0C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;ACtNA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kHAAiH,4BAA4B,EAAE;AAC/I,mHAAkH,iCAAiC,EAAE;AACrJ,oEAAmE,yBAAyB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAuE,yBAAyB;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,qBAAqB,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE,yBAAyB;AAC9F,oEAAmE,yBAAyB;AAC5F;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0HAAyH,yBAAyB,EAAE;AACpJ;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uIAAsI,wBAAwB,EAAE;AAChK,iEAAgE,uBAAuB;AACvF;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,sEAAqE,uBAAuB;AAC5F,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;AC/LA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,uDAAuD;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD,8CAA8C,+DAA+D,qCAAqC,gCAAgC,6DAA6D;AAChS;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT,gDAA+C,4BAA4B;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;;AC3BA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAgD,mDAAmD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D,0CAA0C;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;AC9CA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,6BAA6B;AAC5E,gDAA+C,6BAA6B;AAC5E,8CAA6C,2BAA2B;AACxE,iDAAgD,8BAA8B;AAC9E,iDAAgD,8BAA8B;AAC9E,gDAA+C,6BAA6B;AAC5E;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA,iDAAgD,6CAA6C;AAC7F,gDAA+C,8CAA8C;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,oBAAoB;AAC1E;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA,iDAAgD,6CAA6C;AAC7F,gDAA+C,8CAA8C;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;ACtEA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE,+BAA+B,EAAE;AAClG,kEAAiE,+BAA+B,EAAE;AAClG,gEAA+D,6BAA6B,EAAE;AAC9F,mEAAkE,gCAAgC,EAAE;AACpG,mEAAkE,gCAAgC,EAAE;AACpG,kEAAiE,+BAA+B,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA,mDAAkD,6CAA6C;AAC/F,kDAAiD,8CAA8C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;ACnEA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,wCAAwC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;;AC1BA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D,6BAA6B,EAAE;AAC5F,4DAA2D,2BAA2B,EAAE;AACxF,+DAA8D,2BAA2B,EAAE;AAC3F,8DAA6D,6BAA6B,EAAE;AAC5F,6DAA4D,4BAA4B,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D","file":"recorder.js","sourcesContent":["var Video_1 = require('./VideoData/Video');\nvar Chunk_1 = require('./VideoData/Chunk');\nvar Command_1 = require('./VideoData/Command');\nvar DynaDraw_1 = require('./Drawing/DynaDraw');\nvar CanvasDrawer_1 = require('./Drawing/CanvasDrawer');\nvar AudioRecorder_1 = require('./AudioData/AudioRecorder');\nvar VideoEvents_1 = require('./Helpers/VideoEvents');\nvar Errors_1 = require('./Helpers/Errors');\nvar VideoTimer_1 = require('./Helpers/VideoTimer');\nvar Metadata_1 = require('./VideoData/Metadata');\nvar Color_1 = require('./UI/Color');\nvar Brush_1 = require('./UI/Brush');\nvar File_1 = require('./Helpers/File');\nvar IO_1 = require('./VideoFormat/SVGAnimation/IO');\nvar RecorderUI_1 = require('./UI/RecorderUI');\nvar ComponentContainer_1 = require('./Components/ComponentContainer');\nvar selectBestInputMethod_1 = require('./VideoData/selectBestInputMethod');\nvar Recorder = (function () {\n    function Recorder(id, settings) {\n        var _this = this;\n        this.id = id;\n        this.settings = settings;\n        this.events = new VideoEvents_1.default();\n        var e = this.events;\n        this.isRecording = false;\n        this.timer = new VideoTimer_1.default(false);\n        this.recordingBlocked = false;\n        this.data = new Video_1.default();\n        this.lastEraseData = 0;\n        this.recordAllRawData = settings.RecordAllRawData !== undefined ? !!settings.RecordAllRawData : true;\n        if (!!settings.DefaultBackgroundColor)\n            Color_1.default.BackgroundColor = settings.DefaultBackgroundColor;\n        if (!!settings.DefaultBrushColor)\n            Color_1.default.ForegroundColor = settings.DefaultBrushColor;\n        var container = document.getElementById(id);\n        if (!container) {\n            Errors_1.default.Report(Errors_1.ErrorType.Fatal, \"Container #\" + id + \" doesn't exist. Video Recorder couldn't be initialised.\");\n            return;\n        }\n        while (!!container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n        if (!settings.ColorPallete || settings.ColorPallete.length === 0) {\n            var colors = [];\n            colors.push(new Color_1.default(\"#ffffff\"));\n            colors.push(new Color_1.default(\"#fa5959\"));\n            colors.push(new Color_1.default(\"#8cfa59\"));\n            colors.push(new Color_1.default(\"#59a0fa\"));\n            colors.push(new Color_1.default(\"#fbff06\"));\n            colors.push(Color_1.default.BackgroundColor);\n            settings.ColorPallete = colors;\n        }\n        if (!colors.indexOf(Color_1.default.BackgroundColor)) {\n            colors.push(Color_1.default.BackgroundColor);\n        }\n        if (!settings.BrushSizes || settings.BrushSizes.length === 0) {\n            var brushes = [];\n            brushes.push(new Brush_1.default(2));\n            brushes.push(new Brush_1.default(3));\n            brushes.push(new Brush_1.default(4));\n            brushes.push(new Brush_1.default(6));\n            brushes.push(new Brush_1.default(8));\n            brushes.push(new Brush_1.default(10));\n            brushes.push(new Brush_1.default(15));\n            brushes.push(new Brush_1.default(80));\n            settings.BrushSizes = brushes;\n        }\n        if (!settings.Localization) {\n            var loc = {\n                NoJS: \"Your browser does not support JavaScript or it is turned off. Video can't be recorded without enabled JavaScript in your browser.\",\n                Busy: \"Preparing recording studio...\",\n                RecPause: \"Control recording\",\n                Record: \"Start\",\n                Pause: \"Pause recording\",\n                Upload: \"Upload\",\n                UploadInProgress: \"Uploading data...\",\n                ChangeColor: \"Change brush color\",\n                ChangeSize: \"Change brush size\",\n                Erase: \"Eraser\",\n                EraseAll: \"Erase everything\",\n                WaitingText: \"Please be patient. Uploading video usually takes some times - up to a few minutes if your video is over ten minutes long. Do not close this tab or browser window.\",\n                UploadWasSuccessful: \"Upload was successful\",\n                RedirectPrompt: \"Upload was successful - press OK to continue\",\n                UploadFailure: \"Upload failed.\",\n                FailureApology: \"We are sorry, but upload failed. Do you want to download your data to your computer instead?\",\n                AudioRecording: \"Audio recording\",\n                AudioRecordingAvailable: \"Audio recording is available\",\n                AudioRecordingUnavailable: \"Audio recording is unavailable\"\n            };\n            settings.Localization = loc;\n        }\n        e.on(VideoEvents_1.VideoEventType.ChangeBrushSize, function (size) { return _this.ChangeBrushSize(size); });\n        e.on(VideoEvents_1.VideoEventType.ChangeColor, function (color) { return _this.ChangeColor(color); });\n        e.on(VideoEvents_1.VideoEventType.CursorState, function (state) { return _this.ProcessCursorState(state); });\n        e.on(VideoEvents_1.VideoEventType.ClearCanvas, function (color) { return _this.ClearCanvas(color); });\n        e.on(VideoEvents_1.VideoEventType.Start, function () { return _this.Start(); });\n        e.on(VideoEvents_1.VideoEventType.Pause, function () { return _this.Pause(); });\n        e.on(VideoEvents_1.VideoEventType.StartUpload, function () { return _this.StartUpload(); });\n        this.busyLevel = 0;\n        e.on(VideoEvents_1.VideoEventType.Busy, function () { return _this.Busy(); });\n        e.on(VideoEvents_1.VideoEventType.Ready, function () { return _this.Ready(); });\n        this.events.on(VideoEvents_1.VideoEventType.StartPath, function (path) {\n            _this.PushChunk(new Chunk_1.PathChunk(path, _this.timer.CurrentTime(), _this.lastEraseData));\n            _this.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(_this.timer.CurrentTime()));\n        });\n        this.events.on(VideoEvents_1.VideoEventType.DrawSegment, function () { return _this.data.CurrentChunk.PushCommand(new Command_1.DrawNextSegment(_this.timer.CurrentTime())); });\n        this.components = new ComponentContainer_1.default(this.ui);\n        e.on(VideoEvents_1.VideoEventType.AddComponent, function (type, id, params) {\n            _this.data.CurrentChunk.PushCommand(new Command_1.AddComponent(type, id, params, _this.timer.CurrentTime()));\n            _this.components.AddComponent(type, id, params);\n        });\n        e.on(VideoEvents_1.VideoEventType.RemoveComponent, function (id) {\n            _this.data.CurrentChunk.PushCommand(new Command_1.RemoveComponent(id, _this.timer.CurrentTime()));\n            _this.components.RemoveComponent(id);\n        });\n        e.on(VideoEvents_1.VideoEventType.ComponentCommand, function (targetId, cmd, params) {\n            _this.data.CurrentChunk.PushCommand(new Command_1.ComponentCommand(targetId, cmd, params, _this.timer.CurrentTime()));\n            _this.components.ExecuteCommand(targetId, cmd, params);\n        });\n        var min = brushes.reduce(function (previousValue, currentValue, index, arr) { return previousValue.Size < currentValue.Size ? previousValue : currentValue; }).Size;\n        var max = brushes.reduce(function (previousValue, currentValue, index, arr) { return previousValue.Size > currentValue.Size ? previousValue : currentValue; }).Size;\n        this.drawer = !!settings.DrawingStrategy ? settings.DrawingStrategy : new CanvasDrawer_1.default(true);\n        this.drawer.SetEvents(this.events);\n        this.dynaDraw = new DynaDraw_1.default(e, function () { return _this.drawer.CreatePath(e); }, !settings.DisableDynamicLineWidth, min, max, this.timer);\n        this.ui = !!settings.UI ? settings.UI : new RecorderUI_1.default(id, e);\n        this.ui.Timer = this.timer;\n        this.ui.Localization = settings.Localization;\n        this.ui.SetBusyText(settings.Localization.Busy);\n        this.ui.CreateHTML(!!settings.Autohide, settings.ColorPallete, settings.BrushSizes);\n        var canvas = this.drawer.CreateCanvas();\n        this.ui.AcceptCanvas(canvas);\n        container.appendChild(this.ui.GetHTML());\n        this.drawer.Stretch();\n        this.pointer = selectBestInputMethod_1.default(e, this.ui.GetHTML(), canvas, this.timer);\n        this.ClearCanvas(Color_1.default.BackgroundColor);\n        e.trigger(VideoEvents_1.VideoEventType.ChangeColor, Color_1.default.ForegroundColor);\n        e.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize, new Brush_1.default(5));\n        if (!!settings.Audio) {\n            this.audioRecorder = new AudioRecorder_1.default(settings.Audio, e);\n            this.audioRecorder.Init();\n        }\n    }\n    Object.defineProperty(Recorder.prototype, \"Events\", {\n        get: function () { return this.events; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Recorder.prototype, \"Components\", {\n        get: function () { return this.components; },\n        enumerable: true,\n        configurable: true\n    });\n    Recorder.prototype.Start = function () {\n        if (this.isRecording === false) {\n            this.isRecording = true;\n            this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(), this.lastEraseData));\n            this.timer.Resume();\n            if (this.audioRecorder) {\n                this.audioRecorder.Start();\n            }\n        }\n    };\n    Recorder.prototype.Pause = function () {\n        if (this.isRecording === true) {\n            this.isRecording = false;\n            this.PushChunk(new Chunk_1.VoidChunk(this.timer.CurrentTime(), this.lastEraseData));\n            this.timer.Pause();\n            if (this.audioRecorder) {\n                this.audioRecorder.Pause();\n            }\n        }\n    };\n    Recorder.prototype.StartUpload = function () {\n        var _this = this;\n        this.recordingBlocked = true;\n        var info = new Metadata_1.default();\n        info.Length = this.timer.CurrentTime();\n        info.Width = this.ui.Width;\n        info.Height = this.ui.Height;\n        info.AudioTracks = [];\n        this.data.Metadata = info;\n        if (!!this.audioRecorder\n            && this.audioRecorder.isRecording()) {\n            this.audioRecorder.Stop(function (files) {\n                _this.data.Metadata.AudioTracks = files;\n                _this.UploadData();\n            }, function () {\n                _this.FinishRecording(false);\n            });\n        }\n        else {\n            this.UploadData();\n        }\n    };\n    Recorder.prototype.ChangeBrushSize = function (size) {\n        !this.recordingBlocked && this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushSize(size, this.timer.CurrentTime()));\n        this.dynaDraw.SetBrushSize(size);\n    };\n    Recorder.prototype.ChangeColor = function (color) {\n        !this.recordingBlocked && this.data.CurrentChunk.PushCommand(new Command_1.ChangeBrushColor(color, this.timer.CurrentTime()));\n        this.drawer.SetCurrentColor(color);\n    };\n    Recorder.prototype.ProcessCursorState = function (state) {\n        !this.recordingBlocked\n            && (this.recordAllRawData || this.isRecording)\n            && this.data.CurrentChunk.PushCommand(new Command_1.MoveCursor(state.X, state.Y, this.recordAllRawData ? state.Pressure : 0, this.timer.CurrentTime()));\n        this.dynaDraw.ObserveCursorMovement(state);\n    };\n    Recorder.prototype.ClearCanvas = function (color) {\n        var time = this.timer.CurrentTime();\n        this.lastEraseData = this.PushChunk(new Chunk_1.EraseChunk(color, time, this.lastEraseData));\n        this.data.CurrentChunk.PushCommand(new Command_1.ClearCanvas(color, time));\n        this.drawer.ClearCanvas(color);\n    };\n    Recorder.prototype.PushChunk = function (chunk) {\n        return this.data.PushChunk(chunk);\n    };\n    Recorder.prototype.Busy = function () {\n        this.busyLevel++;\n        this.wasRecordingWhenBusy = this.wasRecordingWhenBusy || this.isRecording;\n        this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        this.ui.Busy();\n    };\n    Recorder.prototype.Ready = function () {\n        if (--this.busyLevel === 0) {\n            if (this.wasRecordingWhenBusy === true) {\n                this.events.trigger(VideoEvents_1.VideoEventType.Start);\n                this.wasRecordingWhenBusy = false;\n            }\n            this.ui.Ready();\n        }\n    };\n    Recorder.prototype.UploadData = function () {\n        var _this = this;\n        var writer = !!this.settings.VideoFormat ? this.settings.VideoFormat : new IO_1.default();\n        var videoBlob = writer.SaveVideo(this.data);\n        console.log(videoBlob);\n        this.events.on(VideoEvents_1.VideoEventType.DownloadData, function () {\n            File_1.default.Download(videoBlob, \"recorded-animation.\" + writer.GetExtension());\n        });\n        this.ui.SetBusyText(this.settings.Localization.UploadInProgress);\n        this.events.trigger(VideoEvents_1.VideoEventType.Busy);\n        var formData = new FormData();\n        formData.append(\"extension\", writer.GetExtension());\n        formData.append(\"file\", videoBlob);\n        var req = new XMLHttpRequest();\n        req.open(\"POST\", this.settings.UploadURL, true);\n        req.onerror = function (e) { return _this.FinishRecording(false); };\n        req.onload = function (e) {\n            var response = JSON.parse(req.response);\n            if (req.status === 200\n                && response.hasOwnProperty(\"success\")\n                && response.success === true) {\n                var url = response.hasOwnProperty(\"redirect\") ? response.redirect : false;\n                _this.FinishRecording(true, url);\n            }\n            else {\n                _this.FinishRecording(false);\n            }\n        };\n        req.send(formData);\n    };\n    Recorder.prototype.FinishRecording = function (success, url) {\n        if (success === true) {\n            this.ui.SetBusyText(this.settings.Localization.UploadWasSuccessful);\n            if (typeof url === \"string\") {\n                if (confirm(this.settings.Localization.RedirectPrompt)) {\n                    window.location.replace(url);\n                }\n            }\n            else {\n                alert(this.settings.Localization.UploadWasSuccessful);\n            }\n        }\n        else {\n            this.ui.SetBusyText(this.settings.Localization.UploadFailure);\n            if (confirm(this.settings.Localization.FailureApology)) {\n                this.events.trigger(VideoEvents_1.VideoEventType.DownloadData);\n            }\n        }\n    };\n    return Recorder;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Recorder;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/Recorder.ts\n ** module id = 0\n ** module chunks = 1\n **/","var Vector_1 = require('../Helpers/Vector');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar DynaDraw = (function () {\n    function DynaDraw(events, pathFactory, slowSimulation, minBrushSize, maxBrushSize, timer) {\n        var _this = this;\n        this.events = events;\n        this.pathFactory = pathFactory;\n        this.slowSimulation = slowSimulation;\n        this.minBrushSize = minBrushSize;\n        this.maxBrushSize = maxBrushSize;\n        this.minMass = 1;\n        this.maxMass = 10;\n        this.minFriction = 0.4;\n        this.maxFriction = 0.6;\n        this.brushes = {};\n        this.oneFrame = 1000 / 60;\n        this.cursor = new BrushTip(true, timer);\n        if (slowSimulation === true) {\n            requestAnimationFrame(function (time) {\n                _this.lastAnimationTime = time;\n                _this.Tick(time);\n            });\n        }\n        else {\n            requestAnimationFrame(function () { return _this.TickWhile(); });\n        }\n    }\n    DynaDraw.prototype.SetBrushSize = function (size) {\n        this.currentBrushSize = size;\n    };\n    DynaDraw.prototype.interpolateMass = function (brushSize) {\n        return this.minMass + (this.maxMass - this.minMass) * (brushSize - this.minBrushSize) / (this.maxBrushSize - this.minBrushSize);\n    };\n    DynaDraw.prototype.interpolateFriction = function (brushSize) {\n        return this.maxFriction - (this.maxFriction - this.minFriction) * (brushSize - this.minBrushSize) / (this.maxBrushSize - this.minBrushSize);\n    };\n    DynaDraw.prototype.GetBrush = function (brushSize) {\n        if (!this.brushes[brushSize]) {\n            this.brushes[brushSize] = new BrushInstance(this.interpolateMass(brushSize), this.interpolateFriction(brushSize), brushSize);\n        }\n        return this.brushes[brushSize];\n    };\n    DynaDraw.prototype.ObserveCursorMovement = function (cursor) {\n        try {\n            var nextPoint = new Vector_1.default(cursor.X, cursor.Y);\n            if (cursor.Pressure > 0) {\n                if (!this.lastState || this.lastState.Pressure === 0) {\n                    this.path = this.pathFactory();\n                    this.events.trigger(VideoEvents_1.VideoEventType.StartPath, this.path);\n                    this.StartPath(nextPoint, cursor.Pressure);\n                }\n                else {\n                    this.NextPoint(nextPoint, cursor.Pressure);\n                }\n            }\n            else if (this.lastState && this.lastState.Pressure > 0) {\n                this.EndPath(nextPoint, this.lastState.Pressure);\n            }\n        }\n        catch (err) {\n            console.log(\"ProcessNewState error: \", err);\n        }\n        this.lastState = cursor;\n    };\n    DynaDraw.prototype.StartPath = function (position, pressure) {\n        this.cursor.Reset(position, this.GetBrush(this.currentBrushSize.Size));\n        this.position = position;\n        this.pressure = pressure;\n        this.cursor.StartPath(this.path, position, pressure);\n    };\n    DynaDraw.prototype.NextPoint = function (position, pressure) {\n        this.position = position;\n        this.pressure = pressure;\n    };\n    DynaDraw.prototype.EndPath = function (position, pressure) {\n        this.position = position;\n    };\n    DynaDraw.prototype.TickWhile = function () {\n        var _this = this;\n        if (!!this.position) {\n            var d2 = 0;\n            var step = 0;\n            do {\n                d2 = this.cursor.ApplyForce(this.position);\n                step += d2;\n                if (step > this.currentBrushSize.Size) {\n                    this.cursor.Draw(this.path, this.pressure);\n                    step = 0;\n                }\n            } while (d2 > 0);\n            if (step > 0) {\n                this.cursor.Draw(this.path, this.pressure);\n            }\n            this.position = null;\n        }\n        requestAnimationFrame(function (time) { return _this.TickWhile(); });\n    };\n    DynaDraw.prototype.Tick = function (time) {\n        var _this = this;\n        if (!!this.path) {\n            if (this.cursor.ApplyForce(this.position) > 0) {\n                this.cursor.Draw(this.path, this.pressure);\n            }\n            else {\n                if (!this.position) {\n                    this.path = null;\n                }\n            }\n        }\n        this.lastAnimationTime = time;\n        requestAnimationFrame(function (time) { return _this.Tick(time); });\n    };\n    return DynaDraw;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = DynaDraw;\nvar BrushInstance = (function () {\n    function BrushInstance(mass, friction, size) {\n        this.mass = mass;\n        this.friction = friction;\n        this.size = size;\n    }\n    Object.defineProperty(BrushInstance.prototype, \"Mass\", {\n        get: function () { return this.mass; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushInstance.prototype, \"Friction\", {\n        get: function () { return this.friction; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushInstance.prototype, \"Size\", {\n        get: function () { return this.size; },\n        enumerable: true,\n        configurable: true\n    });\n    return BrushInstance;\n})();\nvar Threshold;\n(function (Threshold) {\n    Threshold[Threshold[\"Velocity\"] = 1] = \"Velocity\";\n})(Threshold || (Threshold = {}));\nvar BrushTip = (function () {\n    function BrushTip(calculateSpeed, timer) {\n        this.calculateSpeed = calculateSpeed;\n        this.timer = timer;\n    }\n    BrushTip.prototype.Reset = function (position, brush) {\n        this.brush = brush;\n        this.position = position.clone();\n        this.startPosition = position.clone();\n        this.previousPosition = position.clone();\n        this.previousPressure = -1;\n        this.mousePosition = position.clone();\n        this.acceleration = new Vector_1.default(0, 0);\n        this.velocity = new Vector_1.default(0, 0);\n        this.firstSegment = true;\n    };\n    BrushTip.prototype.ApplyForce = function (mouse) {\n        if (mouse !== null) {\n            var force = mouse.clone().subtract(this.position);\n            this.acceleration = force.clone().scale(1 / this.brush.Mass);\n            this.velocity.add(this.acceleration);\n            this.mousePosition = mouse;\n        }\n        this.velocity.scale(1 - this.brush.Friction);\n        if (this.velocity.getSizeSq() < 1) {\n            return 0;\n        }\n        mouse = null;\n        force = null;\n        this.acceleration = null;\n        this.angle = this.velocity.getNormal();\n        this.position.add(this.velocity);\n        return this.velocity.getSizeSq();\n    };\n    BrushTip.prototype.Draw = function (path, pressure) {\n        var relativeSpeed = this.calculateSpeed === true ? this.velocity.getSize() / (this.brush.Size * this.brush.Size) : 0;\n        var width = this.getRadius(pressure, relativeSpeed);\n        this.angle.scale(width);\n        if (this.firstSegment) {\n            path.InitPath(this.startPosition.clone().add(this.angle), this.startPosition.clone().subtract(this.angle));\n            this.firstSegment = false;\n        }\n        path.ExtendPath(this.position.clone().add(this.angle), this.position.clone().subtract(this.angle));\n        path.Draw();\n    };\n    BrushTip.prototype.StartPath = function (path, pt, pressure) {\n        path.StartPath(pt, this.getRadius(pressure, 0));\n    };\n    BrushTip.prototype.getRadius = function (pressure, speed) {\n        if (this.previousPressure < 0)\n            this.previousPressure = pressure;\n        var interpolatedPressure = this.interpolatePressure(pressure);\n        var radius = this.speedFactor(speed) * this.brush.Size * interpolatedPressure / 2;\n        this.previousPosition = this.position.clone();\n        this.previousPressure = interpolatedPressure;\n        return radius;\n    };\n    BrushTip.prototype.interpolatePressure = function (mousePressure) {\n        var d1 = this.position.distanceTo(this.previousPosition);\n        var d2 = this.position.distanceTo(this.mousePosition);\n        if (d1 === 0 && d2 === 0) {\n            return mousePressure;\n        }\n        return (d1 / (d1 + d2)) * (mousePressure - this.previousPressure) + this.previousPressure;\n    };\n    BrushTip.prototype.speedFactor = function (speed) {\n        return Math.max(1 - speed, 0.4);\n    };\n    BrushTip.threshold = 0.001;\n    return BrushTip;\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/Drawing/DynaDraw.ts\n ** module id = 37\n ** module chunks = 1\n **/","/// <reference path=\"audio.d.ts\" />\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Errors_1 = require('../Helpers/Errors');\nvar AudioPlayer_1 = require('./AudioPlayer');\nvar AudioRecorder = (function () {\n    function AudioRecorder(config, events) {\n        var _this = this;\n        this.events = events;\n        this.recording = false;\n        this.initSuccessful = false;\n        this.doNotStartRecording = false;\n        this.settings = {\n            host: \"http://localhost\",\n            port: 4000,\n            path: \"/upload/audio\",\n            recordingWorkerPath: \"/js/workers/RecordingWorker.js\"\n        };\n        if (!!config.host)\n            this.settings.host = config.host;\n        if (!!config.port)\n            this.settings.port = config.port;\n        if (!!config.path)\n            this.settings.path = config.path;\n        if (!!config.recordingWorkerPath)\n            this.settings.recordingWorkerPath = config.recordingWorkerPath;\n        this.recording = false;\n        this.muted = false;\n        this.events.on(VideoEvents_1.VideoEventType.MuteAudioRecording, function () { return _this.muted = !_this.muted; });\n        this.error = function (msg) { return console.log(\"AudioRecorder error: \", msg); };\n        this.success = function (msg) { return console.log(\"AudioRecorder success: \", msg); };\n    }\n    AudioRecorder.prototype.Init = function (success) {\n        var _this = this;\n        navigator.getUserMedia = (navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia);\n        if (!!navigator.getUserMedia && window.hasOwnProperty(\"AudioContext\")) {\n            var context = (new AudioContext()\n                || null);\n            this.events.trigger(VideoEvents_1.VideoEventType.Busy);\n            navigator.getUserMedia({\n                video: false,\n                audio: true\n            }, function (localMediaStream) {\n                if (_this.doNotStartRecording === false) {\n                    _this.input = context.createMediaStreamSource(localMediaStream);\n                    var bufferSize = 2048;\n                    _this.scriptProcessorNode = context.createScriptProcessor(bufferSize, 1, 1);\n                    _this.scriptProcessorNode.onaudioprocess = function (data) { return _this.processData(data); };\n                    _this.input.connect(_this.scriptProcessorNode);\n                    _this.scriptProcessorNode.connect(context.destination);\n                    _this.initSuccessful = true;\n                    _this.CreateAudioProcessor(\"web-socket\", _this.settings, function () { return console.log(\"Audio recording is ready.\"); });\n                    if (!!success) {\n                        success();\n                    }\n                    _this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingAvailable);\n                    _this.events.trigger(VideoEvents_1.VideoEventType.RegisterRecordingTool, \"audio-recorder\");\n                    _this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n                }\n            }, function (err) {\n                if (err.name === \"PermissionDeniedError\") {\n                    Errors_1.default.Report(Errors_1.ErrorType.Warning, \"User didn't allow microphone recording.\");\n                }\n                Errors_1.default.Report(Errors_1.ErrorType.Warning, \"Can't record audio\", err);\n                _this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n                _this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n            });\n        }\n        else {\n            console.log(\"getUserMedia not supported by the browser\");\n            Errors_1.default.Report(Errors_1.ErrorType.Warning, \"getUserMedia not supported by the browser\");\n            this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n        }\n    };\n    AudioRecorder.prototype.CreateAudioProcessor = function (processorType, cfg, success, error) {\n        var _this = this;\n        if (Worker) {\n            this.recordingWorker = new Worker(cfg.recordingWorkerPath);\n            this.recordingWorker.onmessage = function (e) { return _this.ReceiveMessageFromWorker(e); };\n            this.recordingWorker.postMessage({\n                cmd: \"init\",\n                AudioProcessorType: processorType || \"web-sockets\",\n                port: cfg.port,\n                host: cfg.host,\n                path: cfg.path\n            });\n            if (!!success) {\n                success();\n            }\n        }\n        else {\n            Errors_1.default.Report(Errors_1.ErrorType.Fatal, \"No web workers support - this feature is not supported by the browser.\");\n            if (!!error) {\n                error();\n            }\n        }\n    };\n    AudioRecorder.prototype.Start = function () {\n        if (this.initSuccessful === true) {\n            if (!this.recordingWorker) {\n                Errors_1.default.Report(Errors_1.ErrorType.Fatal, \"No audio processor was set.\");\n                return false;\n            }\n            else {\n                this.recording = true;\n                return true;\n            }\n        }\n        else {\n            this.doNotStartRecording = true;\n            return false;\n        }\n    };\n    AudioRecorder.prototype.Continue = function () {\n        if (this.initSuccessful) {\n            if (!this.recordingWorker) {\n                Errors_1.default.Report(Errors_1.ErrorType.Fatal, \"No audio processor was set.\");\n                return false;\n            }\n            else {\n                this.recording = true;\n                return true;\n            }\n        }\n        else {\n        }\n        return false;\n    };\n    AudioRecorder.prototype.Pause = function () {\n        if (this.initSuccessful) {\n            this.recording = false;\n            return true;\n        }\n        else {\n        }\n        return false;\n    };\n    AudioRecorder.prototype.Stop = function (success, error) {\n        this.success = success;\n        this.error = error;\n        if (this.initSuccessful === true) {\n            if (this.Pause()) {\n                if (this.recordingWorker) {\n                    this.recordingWorker.postMessage({\n                        cmd: \"finish\"\n                    });\n                }\n            }\n        }\n        else {\n            Errors_1.default.Report(Errors_1.ErrorType.Warning, \"Can't stop AudioRecorder - it wasn't ever initialised.\");\n            error();\n        }\n    };\n    AudioRecorder.prototype.isRecording = function () {\n        return this.initSuccessful;\n    };\n    AudioRecorder.prototype.processData = function (data) {\n        if (this.recording === false) {\n            return;\n        }\n        var left = data.inputBuffer.getChannelData(0);\n        if (this.muted) {\n            for (var i = 0; i < left.length; i++) {\n                left[i] = 0;\n            }\n        }\n        if (this.recordingWorker) {\n            this.recordingWorker.postMessage({\n                cmd: \"pushData\",\n                data: left\n            });\n        }\n    };\n    AudioRecorder.prototype.ReceiveMessageFromWorker = function (e) {\n        var msg = e.data;\n        if (!msg.hasOwnProperty(\"type\")) {\n            console.log(\"Worker response is invalid (missing property 'type')\", e.data);\n            this.error(\"AudioRecorder received invalid message from the worker.\");\n            return;\n        }\n        switch (msg.type) {\n            case \"error\":\n                this.error(msg.msg);\n            case \"network-error\":\n                this.WorkerNetworkError();\n                break;\n            case \"finished\":\n                this.WorkerFinished(msg);\n                break;\n            default:\n                console.log(\"Unknown message type: \", msg.type, msg);\n                break;\n        }\n    };\n    AudioRecorder.prototype.WorkerFinished = function (msg) {\n        this.recordingWorker.terminate();\n        this.recordingWorker = null;\n        this.events.trigger(VideoEvents_1.VideoEventType.RecordingToolFinished, \"audio-recorder\");\n        var sources = [];\n        for (var i = 0; i < msg.files.length; i++) {\n            var file = msg.files[i];\n            var source = new AudioPlayer_1.AudioSource(file.url, AudioPlayer_1.AudioSource.StringToType(file.type));\n            sources.push(source);\n        }\n        this.success(sources);\n    };\n    AudioRecorder.prototype.WorkerNetworkError = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.AudioRecordingUnavailable);\n    };\n    return AudioRecorder;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = AudioRecorder;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/AudioData/AudioRecorder.ts\n ** module id = 38\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar HelperFunctions_1 = require('../Helpers/HelperFunctions');\nvar BasicElements_1 = require('./BasicElements');\nvar Buttons_1 = require('./Buttons');\nvar Board_1 = require('./Board');\nvar Color_1 = require('../UI/Color');\nvar RecorderUI = (function (_super) {\n    __extends(RecorderUI, _super);\n    function RecorderUI(id, events) {\n        _super.call(this, \"div\", id + \"-recorder\");\n        this.id = id;\n        this.events = events;\n        this.tickingInterval = 100;\n        this.AddClass(\"vector-video-wrapper\");\n        this.isRecording = false;\n        this.isBusy = false;\n        this.micIsMuted = false;\n    }\n    Object.defineProperty(RecorderUI.prototype, \"Width\", {\n        get: function () {\n            return this.board.Width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecorderUI.prototype, \"Height\", {\n        get: function () {\n            return this.board.Height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecorderUI.prototype, \"BackgroundColor\", {\n        get: function () {\n            return Color_1.default.BackgroundColor.CssValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecorderUI.prototype.CreateHTML = function (autohide, colorPallete, brushSizes) {\n        this.board = this.CreateBoard();\n        this.controls = new BasicElements_1.Panel(\"div\", this.id + \"-controls\")\n            .AddChildren(this.CreateButtonsPanel().AddClass(\"ui-controls-panel\"), this.CreateColorsPanel(colorPallete).AddClass(\"ui-controls-panel\"), this.CreateBrushSizesPanel(brushSizes).AddClass(\"ui-controls-panel\"), this.CreateEraserPanel().AddClass(\"ui-controls-panel\"), this.CreateEraseAllPanel().AddClass(\"ui-controls-panel\"), this.CreateMicPanel().AddClass(\"ui-controls-panel\"))\n            .AddClasses(\"ui-controls\", \"ui-control\");\n        !!autohide && this.controls.AddClass(\"autohide\");\n        this.AddChildren(this.board, new BasicElements_1.Panel(\"div\").AddClass(\"ui-controls-wrapper\")\n            .AddChild(this.controls));\n    };\n    RecorderUI.prototype.Busy = function () {\n        this.AddClass(\"busy\");\n        this.isBusy = true;\n    };\n    RecorderUI.prototype.Ready = function () {\n        this.RemoveClass(\"busy\");\n        this.isBusy = false;\n    };\n    RecorderUI.prototype.SetBusyText = function (text) {\n        HTML_1.default.SetAttributes(this.GetHTML(), { \"data-busy-string\": text });\n    };\n    RecorderUI.prototype.AcceptCanvas = function (canvas) {\n        this.board.GetHTML().appendChild(canvas);\n    };\n    RecorderUI.prototype.CreateBoard = function () {\n        var board = new Board_1.default(this.id + \"-board\", this.events);\n        return board;\n    };\n    RecorderUI.prototype.CreateButtonsPanel = function () {\n        var _this = this;\n        var buttonsPanel = new BasicElements_1.Panel(\"div\", this.id + \"-panels\");\n        this.recPauseButton = new BasicElements_1.IconButton(\"icon-rec\", this.Localization.Record, function (e) { return _this.RecordPause(); });\n        this.uploadButton = new BasicElements_1.IconButton(\"icon-upload\", this.Localization.Upload, function (e) { return _this.InitializeUpload(); });\n        HTML_1.default.SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n        buttonsPanel.AddChildren(new BasicElements_1.H2(this.Localization.RecPause), new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\")\n            .AddChildren(this.recPauseButton, this.uploadButton));\n        return buttonsPanel;\n    };\n    RecorderUI.prototype.RecordPause = function () {\n        if (this.isRecording === true) {\n            this.PauseRecording();\n            this.uploadButton.GetHTML().removeAttribute(\"disabled\");\n            this.RemoveClass(\"recording\");\n        }\n        else {\n            this.StartRecording();\n            HTML_1.default.SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n            this.AddClass(\"recording\");\n        }\n    };\n    RecorderUI.prototype.StartRecording = function () {\n        var _this = this;\n        if (this.isRecording === false) {\n            this.isRecording = true;\n            this.recPauseButton.ChangeIcon(\"icon-pause\");\n            this.board.IsRecording = true;\n            this.ticking = setInterval(function () { return _this.Tick(); }, this.tickingInterval);\n            this.events.trigger(VideoEvents_1.VideoEventType.Start);\n        }\n    };\n    RecorderUI.prototype.PauseRecording = function () {\n        if (this.isRecording === true) {\n            this.isRecording = false;\n            this.recPauseButton.ChangeIcon(\"icon-rec\");\n            this.board.IsRecording = false;\n            clearInterval(this.ticking);\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        }\n    };\n    RecorderUI.prototype.Tick = function () {\n        this.recPauseButton.ChangeContent(HelperFunctions_1.millisecondsToString(this.Timer.CurrentTime()));\n    };\n    RecorderUI.prototype.InitializeUpload = function () {\n        HTML_1.default.SetAttributes(this.recPauseButton.GetHTML(), { \"disabled\": \"disabled\" });\n        HTML_1.default.SetAttributes(this.uploadButton.GetHTML(), { \"disabled\": \"disabled\" });\n        this.events.trigger(VideoEvents_1.VideoEventType.StartUpload);\n    };\n    RecorderUI.prototype.CreateColorsPanel = function (colorPallete) {\n        var colorsGroup = new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\");\n        for (var i = 0; i < colorPallete.length; i++) {\n            var btn = new Buttons_1.ChangeColorButton(this.events, colorPallete[i]);\n            colorsGroup.AddChild(btn);\n        }\n        return new BasicElements_1.Panel(\"div\")\n            .AddClass(\"color-pallete\")\n            .AddChildren(new BasicElements_1.H2(this.Localization.ChangeColor), colorsGroup);\n    };\n    RecorderUI.prototype.CreateBrushSizesPanel = function (brushSizes) {\n        var sizesGroup = new BasicElements_1.Panel(\"div\").AddClass(\"btn-group\");\n        for (var i = 0; i < brushSizes.length; i++) {\n            sizesGroup.AddChild(new Buttons_1.ChangeBrushSizeButton(this.events, brushSizes[i]));\n        }\n        return new BasicElements_1.Panel(\"div\")\n            .AddClass(\"brush-sizes\")\n            .AddChildren(new BasicElements_1.H2(this.Localization.ChangeSize), sizesGroup);\n    };\n    RecorderUI.prototype.CreateEraserPanel = function () {\n        this.switchToEraserButton = new Buttons_1.ChangeColorButton(this.events, Color_1.default.BackgroundColor);\n        return new BasicElements_1.Panel(\"div\", this.id + \"-erase\")\n            .AddChildren(new BasicElements_1.H2(this.Localization.Erase), this.switchToEraserButton);\n    };\n    RecorderUI.prototype.CreateEraseAllPanel = function () {\n        var _this = this;\n        var panel = new BasicElements_1.Panel(\"div\", this.id + \"-erase\");\n        var title = new BasicElements_1.H2(this.Localization.EraseAll);\n        panel.AddChild(title);\n        this.eraseAllButton = new Buttons_1.ChangeColorButton(this.events, Color_1.default.BackgroundColor, function () { return _this.EraseAll(); });\n        this.events.on(VideoEvents_1.VideoEventType.ChangeColor, function (color) {\n            _this.currentColor = color;\n            _this.eraseAllButton.SetColor(color);\n        });\n        panel.AddChild(this.eraseAllButton);\n        return panel;\n    };\n    RecorderUI.prototype.EraseAll = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.ClearCanvas, this.currentColor);\n        this.switchToEraserButton.SetColor(this.currentColor);\n    };\n    RecorderUI.prototype.CreateMicPanel = function () {\n        var _this = this;\n        this.micButton = new BasicElements_1.IconOnlyButton(\"icon-mic-off\", this.Localization.AudioRecordingUnavailable, function () { return _this.MuteMic(); });\n        HTML_1.default.SetAttributes(this.micButton.GetHTML(), { disabled: \"disabled\" });\n        this.events.on(VideoEvents_1.VideoEventType.AudioRecordingAvailable, function () {\n            _this.micButton.GetHTML().removeAttribute(\"disabled\");\n            if (!_this.micIsMuted) {\n                _this.micButton.ChangeIcon(\"icon-mic\").ChangeContent(_this.Localization.AudioRecordingAvailable);\n            }\n        });\n        this.events.on(VideoEvents_1.VideoEventType.AudioRecordingUnavailable, function () {\n            _this.micButton.ChangeIcon(\"icon-mic-off\").ChangeContent(_this.Localization.AudioRecordingUnavailable);\n            HTML_1.default.SetAttributes(_this.micButton.GetHTML(), { disabled: \"disabled\" });\n        });\n        return new BasicElements_1.Panel(\"div\").AddChildren(new BasicElements_1.H2(this.Localization.AudioRecording), this.micButton);\n    };\n    RecorderUI.prototype.MuteMic = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.MuteAudioRecording);\n        this.micIsMuted = !this.micIsMuted;\n        if (this.micIsMuted) {\n            this.micButton.ChangeIcon(\"icon-mic-off\");\n        }\n        else {\n            this.micButton.ChangeIcon(\"icon-mic\");\n        }\n    };\n    return RecorderUI;\n})(BasicElements_1.Panel);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = RecorderUI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/UI/RecorderUI.ts\n ** module id = 39\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar BasicElements_1 = require('./BasicElements');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar ChangeColorButton = (function (_super) {\n    __extends(ChangeColorButton, _super);\n    function ChangeColorButton(events, color, callback) {\n        var _this = this;\n        _super.call(this, \"\");\n        this.events = events;\n        this.SetColor(color);\n        this.GetHTML().onclick = function (e) { return !!callback ? callback() : _this.ChangeColor(e); };\n    }\n    ChangeColorButton.prototype.ChangeColor = function (e) {\n        if (!!ChangeColorButton.active) {\n            ChangeColorButton.active.GetHTML().classList.remove(\"active\");\n        }\n        this.GetHTML().classList.add(\"active\");\n        ChangeColorButton.active = this;\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeColor, this.color);\n    };\n    ChangeColorButton.prototype.SetColor = function (color) {\n        this.color = color;\n        HTML_1.default.SetAttributes(this.GetHTML(), {\n            class: \"option\",\n            \"data-color\": color.CssValue,\n            style: \"background-color: \" + color.CssValue\n        });\n    };\n    return ChangeColorButton;\n})(BasicElements_1.Button);\nexports.ChangeColorButton = ChangeColorButton;\nvar ChangeBrushSizeButton = (function (_super) {\n    __extends(ChangeBrushSizeButton, _super);\n    function ChangeBrushSizeButton(events, size) {\n        var _this = this;\n        _super.call(this, \"\");\n        this.events = events;\n        this.size = size;\n        var dot = HTML_1.default.CreateElement(\"span\", {\n            style: \"width: \" + size.CssValue + \";\\t\\n\\t\\t\\t\\t\\t\\theight: \" + size.CssValue + \";\\n\\t\\t\\t\\t\\t\\tborder-radius: \" + size.Size / 2 + size.Unit + \"; \\n\\t\\t\\t\\t\\t\\tdisplay: inline-block;\\n\\t\\t\\t\\t\\t\\tbackground: black;\\n\\t\\t\\t\\t\\t\\tmargin-top: \" + -size.Size / 2 + size.Unit + \";\",\n            class: \"dot\",\n            \"data-size\": size.Size\n        });\n        this.GetHTML().appendChild(dot);\n        HTML_1.default.SetAttributes(this.GetHTML(), {\n            class: \"option\",\n            \"data-size\": size.Size\n        });\n        this.GetHTML().onclick = function (e) { return _this.ChangeSize(e); };\n    }\n    ChangeBrushSizeButton.prototype.ChangeSize = function (e) {\n        e.preventDefault();\n        if (!!ChangeBrushSizeButton.active) {\n            ChangeBrushSizeButton.active.GetHTML().classList.remove(\"active\");\n        }\n        this.GetHTML().classList.add(\"active\");\n        ChangeBrushSizeButton.active = this;\n        this.events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize, this.size);\n    };\n    return ChangeBrushSizeButton;\n})(BasicElements_1.Button);\nexports.ChangeBrushSizeButton = ChangeBrushSizeButton;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/UI/Buttons.ts\n ** module id = 40\n ** module chunks = 1\n **/","var WacomTablet_1 = require('./WacomTablet');\nvar Pointer_1 = require('./Pointer');\nvar AppleForceTouch_1 = require('./AppleForceTouch');\nvar Touch_1 = require('./Touch');\nfunction selectBestInputMethod(events, board, canvas, timer) {\n    var device;\n    var wacomApi = WacomTablet_1.default.IsAvailable();\n    if (wacomApi !== null) {\n        device = new WacomTablet_1.default(events, board, timer, wacomApi);\n        console.log(\"Wacom WebPAPI is used\");\n    }\n    else if (window.hasOwnProperty(\"PointerEvent\")) {\n        device = new Pointer_1.default(events, board, timer);\n        console.log(\"Pointer Events API is used\");\n    }\n    else if (AppleForceTouch_1.default.isAvailable()) {\n        device = new AppleForceTouch_1.default(events, board, canvas, timer);\n        console.log(\"Apple Force Touch Events over Touch Events API is used\");\n    }\n    else {\n        device = new Touch_1.default(events, board, canvas, timer);\n        console.log(\"Touch Events API are used.\");\n    }\n    device.InitControlsAvoiding();\n    return device;\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = selectBestInputMethod;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/selectBestInputMethod.ts\n ** module id = 41\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Mouse_1 = require('./Mouse');\nvar HTML_1 = require('../Helpers/HTML');\nvar WacomPointerType;\n(function (WacomPointerType) {\n    WacomPointerType[WacomPointerType[\"OutOfProximity\"] = 0] = \"OutOfProximity\";\n    WacomPointerType[WacomPointerType[\"Pen\"] = 1] = \"Pen\";\n    WacomPointerType[WacomPointerType[\"Mouse\"] = 2] = \"Mouse\";\n    WacomPointerType[WacomPointerType[\"Eraseer\"] = 3] = \"Eraseer\";\n})(WacomPointerType || (WacomPointerType = {}));\nvar WacomTablet = (function (_super) {\n    __extends(WacomTablet, _super);\n    function WacomTablet(events, board, timer, penApi) {\n        _super.call(this, events, board, timer);\n        this.penApi = penApi;\n    }\n    WacomTablet.Factory = function (api) {\n        return function (events, board, timer) { return new WacomTablet(events, board, timer, api); };\n    };\n    WacomTablet.prototype.GetPressure = function () {\n        if (this.isDown === false || this.isInside === false) {\n            return 0;\n        }\n        if (this.penApi && this.penApi.pointerType == WacomPointerType.Pen) {\n            return this.isInside === true ? this.penApi.pressure : 0;\n        }\n        else {\n            return _super.prototype.GetPressure.call(this);\n        }\n    };\n    WacomTablet.IsAvailable = function () {\n        var plugin = HTML_1.default.CreateElement(\"object\", { type: \"application/x-wacomtabletplugin\" });\n        document.body.appendChild(plugin);\n        if (!!plugin.version === true) {\n            console.log(\"Wacom tablet is connected and plugin installed. Plugin version is \" + plugin.version + \".\");\n            return plugin.penAPI;\n        }\n        return null;\n    };\n    return WacomTablet;\n})(Mouse_1.default);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = WacomTablet;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/WacomTablet.ts\n ** module id = 42\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar PointingDevice_1 = require('./PointingDevice');\nvar Mouse = (function (_super) {\n    __extends(Mouse, _super);\n    function Mouse(events, board, timer) {\n        var _this = this;\n        _super.call(this, events, board, timer);\n        this.board.onmousemove = function (e) { return _this.onMouseMove(e); };\n        this.board.onmousedown = function (e) { return _this.onMouseDown(e); };\n        this.board.onmouseup = function (e) { return _this.onMouseUp(e); };\n        this.board.onmouseleave = function (e) { return _this.onMouseLeave(e); };\n        this.board.onmouseenter = function (e) { return _this.onMouseEnter(e); };\n        this.board.onmouseover = function (e) { return _this.onMouseOver(e); };\n    }\n    Mouse.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onmouseover = function (e) { return _this.isHoveringOverUIControl = true; };\n            element.onmouseout = function (e) { return _this.isHoveringOverUIControl = false; };\n        }\n    };\n    Mouse.prototype.onMouseMove = function (e) {\n        this.onMove(e);\n    };\n    Mouse.prototype.onMouseDown = function (e) {\n        this.onDown(e);\n    };\n    Mouse.prototype.onMouseUp = function (e) {\n        this.onUp(e);\n    };\n    Mouse.prototype.onMouseLeave = function (e) {\n        this.onLeave(e);\n    };\n    Mouse.prototype.onMouseEnter = function (e) {\n        if (e.buttons === 0) {\n            this.isDown = false;\n        }\n    };\n    Mouse.prototype.onMouseOver = function (e) {\n        this.isInside = true;\n    };\n    return Mouse;\n})(PointingDevice_1.default);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Mouse;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/Mouse.ts\n ** module id = 43\n ** module chunks = 1\n **/","var VideoEvents_1 = require('../Helpers/VideoEvents');\nvar State_1 = require('../Helpers/State');\nvar PointingDevice = (function () {\n    function PointingDevice(events, board, timer) {\n        this.events = events;\n        this.board = board;\n        this.timer = timer;\n        this.isHoveringOverUIControl = false;\n    }\n    PointingDevice.prototype.getCursor = function () { return this.cursor; };\n    PointingDevice.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control-panel\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onmouseover = function (e) { return _this.isHoveringOverUIControl = true; };\n            element.onmouseout = function (e) { return _this.isHoveringOverUIControl = false; };\n        }\n    };\n    PointingDevice.prototype.GetPressure = function () {\n        return (this.isDown === true && this.isInside === true) ? 1 : 0;\n    };\n    PointingDevice.prototype.onMove = function (e) {\n        this.cursor = this.getCursorPosition(e);\n        this.ReportAction();\n    };\n    PointingDevice.prototype.onDown = function (e) {\n        if (this.isHoveringOverUIControl === false) {\n            this.isDown = true;\n            this.cursor = this.getCursorPosition(e);\n            this.ReportAction();\n        }\n    };\n    PointingDevice.prototype.onUp = function (e) {\n        this.isDown = false;\n        this.cursor = this.getCursorPosition(e);\n        this.ReportAction();\n    };\n    PointingDevice.prototype.onLeave = function (e) {\n        if (this.GetPressure() > 0) {\n            this.onMove(e);\n            this.isDown = false;\n            this.onMove(e);\n            this.isDown = true;\n        }\n        this.isInside = false;\n    };\n    PointingDevice.prototype.onOver = function (e) {\n        this.isInside = true;\n    };\n    PointingDevice.prototype.onLooseFocus = function (e) {\n        this.isInside = false;\n        this.isDown = false;\n    };\n    PointingDevice.prototype.getCursorPosition = function (e) {\n        if (e.clientX == undefined || e.clientY == undefined) {\n            console.log(\"Wrong 'getCursorPosition' parameter. Event data required.\");\n        }\n        return {\n            x: e.clientX,\n            y: e.clientY\n        };\n    };\n    PointingDevice.prototype.ReportAction = function () {\n        var state = new State_1.CursorState(this.timer.CurrentTime(), this.cursor.x, this.cursor.y, this.GetPressure());\n        this.events.trigger(VideoEvents_1.VideoEventType.CursorState, state);\n    };\n    return PointingDevice;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = PointingDevice;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/PointingDevice.ts\n ** module id = 44\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar PointingDevice_1 = require('./PointingDevice');\nvar PointerEventsAPI = (function (_super) {\n    __extends(PointerEventsAPI, _super);\n    function PointerEventsAPI(events, board, timer) {\n        var _this = this;\n        _super.call(this, events, board, timer);\n        this.board.addEventListener(\"pointermove\", function (e) { return _this.onPointerMove(e); });\n        this.board.addEventListener(\"pointerdown\", function (e) { return _this.onPointerDown(e); });\n        this.board.addEventListener(\"pointerup\", function (e) { return _this.onPointerUp(e); });\n        this.board.addEventListener(\"pointerleave\", function (e) { return _this.onPointerLeave(e); });\n        this.board.addEventListener(\"pointerenter\", function (e) { return _this.onPointerLeave(e); });\n        this.board.addEventListener(\"pointerover\", function (e) { return _this.onPointerOver(e); });\n        this.currentEvent = null;\n        this.isDown = false;\n    }\n    PointerEventsAPI.prototype.GetPressure = function () {\n        if (this.isDown === false || this.currentEvent === null) {\n            return 0;\n        }\n        if (this.currentEvent.pointerType === \"pen\") {\n            return this.currentEvent.pressure;\n        }\n        return 1;\n    };\n    PointerEventsAPI.prototype.InitControlsAvoiding = function () {\n        var _this = this;\n        var controls = document.getElementsByClassName(\"ui-control\");\n        for (var i = 0; i < controls.length; i++) {\n            var element = controls[i];\n            element.onpointerover = function (e) { return _this.isHoveringOverUIControl = true; };\n            element.onpointerout = function (e) { return _this.isHoveringOverUIControl = false; };\n        }\n    };\n    PointerEventsAPI.prototype.onPointerMove = function (e) {\n        this.onMove(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerDown = function (e) {\n        this.onDown(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerUp = function (e) {\n        this.onUp(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerLeave = function (e) {\n        this.onLeave(e);\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerEnter = function (e) {\n        if (e.buttons === 0) {\n            this.isDown = false;\n        }\n        this.currentEvent = e;\n    };\n    PointerEventsAPI.prototype.onPointerOver = function (e) {\n        this.isInside = true;\n        this.currentEvent = e;\n    };\n    return PointerEventsAPI;\n})(PointingDevice_1.default);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = PointerEventsAPI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/Pointer.ts\n ** module id = 45\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Touch_1 = require('./Touch');\nvar AppleForceTouch = (function (_super) {\n    __extends(AppleForceTouch, _super);\n    function AppleForceTouch(events, board, canvas, timer) {\n        var _this = this;\n        _super.call(this, events, board, canvas, timer);\n        this.board.onmousemove = function (e) { return _this.checkForce(e.webkitForce); };\n        this.forceLevel = 0;\n    }\n    AppleForceTouch.isAvailable = function () {\n        return \"WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN\" in MouseEvent;\n    };\n    AppleForceTouch.prototype.GetPressure = function () {\n        return this.forceLevel;\n    };\n    AppleForceTouch.prototype.checkForce = function (webkitForce) {\n        this.forceLevel = Math.min(1, webkitForce);\n    };\n    return AppleForceTouch;\n})(Touch_1.default);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = AppleForceTouch;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/AppleForceTouch.ts\n ** module id = 46\n ** module chunks = 1\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Mouse_1 = require('./Mouse');\nvar TouchEventsAPI = (function (_super) {\n    __extends(TouchEventsAPI, _super);\n    function TouchEventsAPI(events, container, canvas, timer) {\n        var _this = this;\n        _super.call(this, events, container, timer);\n        this.canvas = canvas;\n        canvas.addEventListener(\"touchstart\", function (ev) { return _this.TouchStart(ev); });\n        canvas.addEventListener(\"touchend\", function (ev) { return _this.TouchEnd(ev); });\n        canvas.addEventListener(\"touchcancel\", function (ev) { return _this.TouchEnd(ev); });\n        canvas.addEventListener(\"touchleave\", function (ev) { return _this.TouchLeave(ev); });\n        canvas.addEventListener(\"touchmove\", function (ev) { return _this.TouchMove(ev); });\n    }\n    TouchEventsAPI.prototype.TouchStart = function (event) {\n        event.preventDefault();\n        var touches = event.changedTouches;\n        var touch = touches[0];\n        this.currentTouch = touch.identifier;\n        this.isInside = true;\n        this.isHoveringOverUIControl = false;\n        this.onMouseDown(touch);\n    };\n    TouchEventsAPI.prototype.TouchLeave = function (event) {\n        event.preventDefault();\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseLeave(touch);\n    };\n    TouchEventsAPI.prototype.TouchEnd = function (event) {\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseUp(touch);\n        this.currentTouch = null;\n    };\n    TouchEventsAPI.prototype.TouchMove = function (event) {\n        event.preventDefault();\n        var touch = this.filterTouch(event.changedTouches);\n        if (touch === null) {\n            return;\n        }\n        this.onMouseMove(touch);\n    };\n    TouchEventsAPI.prototype.filterTouch = function (touchList) {\n        for (var i = 0; i < touchList.length; i++) {\n            var element = touchList[i];\n            if (element.identifier === this.currentTouch) {\n                return element;\n            }\n        }\n        return null;\n    };\n    return TouchEventsAPI;\n})(Mouse_1.default);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = TouchEventsAPI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/VideoData/Touch.ts\n ** module id = 47\n ** module chunks = 1\n **/"],"sourceRoot":""}