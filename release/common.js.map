{"version":3,"sources":["webpack:///common.js","webpack:///webpack/bootstrap 56dd51c725712315ca2b","webpack:///./src/VectorScreencast/Helpers/VideoEvents.ts","webpack:///./src/VectorScreencast/Helpers/HTML.ts","webpack:///./src/VectorScreencast/Helpers/SVG.ts","webpack:///./src/VectorScreencast/Helpers/Vector.ts","webpack:///./src/VectorScreencast/UI/BasicElements.ts","webpack:///./src/VectorScreencast/Helpers/HelperFunctions.ts","webpack:///./src/VectorScreencast/UI/Color.ts","webpack:///./src/VectorScreencast/Helpers/Errors.ts","webpack:///./src/VectorScreencast/VideoData/Chunk.ts","webpack:///./src/VectorScreencast/VideoData/Command.ts","webpack:///./src/VectorScreencast/AudioData/AudioPlayer.ts","webpack:///./src/VectorScreencast/Drawing/Path.ts","webpack:///./src/VectorScreencast/Drawing/Segments.ts","webpack:///./src/VectorScreencast/Helpers/File.ts","webpack:///./src/VectorScreencast/Helpers/Spline.ts","webpack:///./src/VectorScreencast/Helpers/State.ts","webpack:///./src/VectorScreencast/Helpers/VideoTimer.ts","webpack:///./src/VectorScreencast/UI/Board.ts","webpack:///./src/VectorScreencast/UI/Brush.ts","webpack:///./src/VectorScreencast/VideoData/Metadata.ts","webpack:///./src/VectorScreencast/VideoData/Video.ts","webpack:///./src/VectorScreencast/VideoFormat/SVGAnimation/IO.ts","webpack:///./src/VectorScreencast/UI/Cursor.ts","webpack:///./src/VectorScreencast/VideoFormat/SVGAnimation/ChunkFactories.ts","webpack:///./src/VectorScreencast/VideoFormat/SVGAnimation/CommandFactories.ts","webpack:///./src/VectorScreencast/VideoFormat/SVGAnimation/MetadataFactory.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","parentJsonpFunction","window","chunkIds","moreModules","chunkId","i","callbacks","length","installedChunks","push","apply","shift","e","callback","undefined","head","document","getElementsByTagName","script","createElement","type","charset","async","src","p","1","2","appendChild","m","c","VideoEventType","Start","Pause","ReachEnd","JumpTo","VideoInfoLoaded","BufferStatus","CursorState","ChangeColor","ChangeBrushSize","StartPath","DrawSegment","DrawPath","ClearCanvas","RedrawCanvas","CanvasSize","CanvasScalingFactor","CursorOffset","RegisterRecordingTool","RecordingToolFinished","MuteAudioRecording","AudioRecordingAvailable","AudioRecordingUnavailable","StartUpload","DownloadData","VolumeUp","VolumeDown","Mute","Busy","Ready","VideoEvent","this","listeners","Array","Object","defineProperty","prototype","get","enumerable","configurable","on","command","off","index","indexOf","splice","trigger","args","cmd","VideoEvents","events","_i","arguments","value","HTML","CreateElement","name","attributes","children","el","SetAttributes","isArray","attr","setAttribute","HelperFunctions_1","SVG","namespace","CreateDot","center","radius","color","cx","precise","X","cy","Y","r","fill","stroke","CreateCircle","stroke-width","CreateLine","start","end","width","d","MoveToString","LineToString","createElementNS","console","log","setAttributeNS","a","CurveToString","b","ArcString","startAngle","node","getNamedItemNS","textContent","Error","localName","numAttr","Number","SVGA","createAttributeNS","setNamedItemNS","defaultValue","Namespace","toString","Vector2","x","y","isEqualTo","getSize","Math","sqrt","getSizeSq","distanceTo","dx","dy","normalize","size","scale","getNormal","add","subtract","pointInBetween","clone","__extends","__","constructor","hasOwnProperty","create","HTML_1","SimpleElement","tag","content","HTMLElement","element","GetHTML","HasClass","className","classList","contains","AddClass","AddClasses","classes","RemoveClass","RemoveClasses","remove","Button","_super","text","onClick","onclick","ChangeContent","innerHTML","IconButton","iconClass","icon","ChangeIcon","IconOnlyButton","title","Heading","level","H2","Panel","elements","AddChild","AddChildren","maxDecPlaces","n","precision","COORDS_PRECISION","toFixed","secondsToString","s","time","minutes","floor","seconds","millisecondsToString","ms","Color","cssValue","backgroundPrototype","CssValue","set","foregroundPrototype","ErrorType","Warning","Fatal","Errors","TurnOn","doLog","TurnOff","SetLogFunction","f","LogFunction","Report","ErrorTypeName","join","VideoEvents_1","Chunk","lastErase","initCommands","commands","cmdIterator","PeekNextCommand","MoveNextCommand","Rewind","ExecuteInitCommands","Execute","GetCommand","PushCommand","initCmds","Render","VoidChunk","PathChunk","path","EraseChunk","State_1","Command","Clone","MoveCursor","Time","DrawNextSegment","ChangeBrushColor","Errors_1","AudioSourceType","MP3","OGG","WAV","AudioSource","url","StringToType","AudioPlayer","sources","audio","CreateAudio","isReady","playing","reachedEnd","InitAudio","documentElement","Audio","canPlayType","canPlayAtLeastOne","MimeType","source","Url","_this","onended","onwaiting","oncanplay","MonitorBufferingAsync","triggeredBusyState","Play","play","InitiatePlay","pause","ReachedEnd","Replay","currentTime","lastEnd","checkPreloaded","setInterval","buffered","duration","clearInterval","progress","ChangePosition","muted","volume","min","max","SVG_1","Vector_1","Spline_1","Segments_1","Path","curved","wireframe","segments","pathPoints","lastDrawnSegment","iterator","pt","ZeroLengthSegment","startPosition","startRadius","DrawStartDot","InitPath","right","left","Left","Right","StartDrawingPath","seg","ExtendPath","last","segment","CalculateSegment","CalculateCurvedSegment","CalculateQuarilateralSegment","leftBezier","Spline","catmullRomToBezier","LastButTwoPoint","LastButOnePoint","LastPoint","rightBezier","CurvedSegment","DrawCurvedSegment","QuadrilateralSegment","DrawQuadrilateralSegment","Draw","angle","vec","atan2","PI","DrawWholePath","SvgPath","canvas","position","CreatePathElement","startDirection","endDirection","arc","cap","options","RightBezier","StartCP","EndCP","End","LeftBezier","GetPathString","CanvasPath","context","fillStyle","beginPath","DrawDot","moveTo","lineTo","bezierCurveTo","closePath","Segment","File","Check","req","mimeType","status","getResponseHeader","Exists","XMLHttpRequest","open","send","ExistsAsync","success","error","onerror","ontimeout","onload","ReadFileAsync","responseXML","response","ReadXmlAsync","Download","blob","css","URL","createObjectURL","href","download","click","revokeObjectURL","CurrentDateTime","Date","StartDownloadingWav","StartDownloadingXml","Blob","BezierCurveSegment","startCP","endCP","StateType","Cursor","State","GetType","GetTime","pressure","getPosition","ColorState","SizeState","VideoTimer","running","pauseTime","performance","clock","paused","Reset","startTime","CurrentTime","now","SetTime","milliseconds","Resume","BasicElements_1","Cursor_1","Board","class","cursor","state","UpdateCursorPosition","UpdateCursorSize","UpdateCursorColor","scalingFactor","UpdateCursorScale","offset","Offset","clientWidth","clientHeight","height","isRecording","MoveTo","ChangeSize","SetScalingFactor","BrushSize","Size","Unit","Metadata","Video","chunks","metadata","currentChunk","PeekNextChunk","MoveNextChunk","CurrentChunk","PushChunk","chunk","RewindMinusOne","FastforwardErasedChunksUntil","FindChunk","LastErase","RewindToLastEraseBefore","directionHint","foundChunk","StartTime","Video_1","Chunk_1","ChunkFactories_1","CommandFactories_1","MetadataFactory_1","IO","VideoChunksLayerType","commandFactory","MoveCursorFactory","DrawSegmentFactory","ChangeBrushColorFactory","ChangeBrushSizeFactory","ClearCanvasFactory","eraseChunkFactory","EraseChunkFactory","chunkFactory","VoidChunkFactory","PathChunkFactory","metadataFactory","SaveVideo","data","implementation","createDocumentType","doc","createDocument","rootElement","Width","Height","viewBox","ToSVG","serializer","XMLSerializer","serializeToString","LoadVideo","Document","xml","childElementCount","childNodes","video","metaNode","firstElementChild","FromSVG","chunksLayer","nextElementSibling","next","GetExtension","GetMimeType","Color_1","CreateHTML","val","svg","bgColor","BackgroundColor","ForegroundColor","dot","style","background","lineHeight","top","originalRadius","calculatedSize","sf","Command_1","Path_1","TIME_PRECISION","ChunkFactory","cmdFactory","nodeName","CommandsToSVG","cmds","chunkStart","GetCommands","filter","v","map","loadedCmd","NodeName","_a","InitCommands","Commands","t","InstructionType","Move","Line","Curve","Arc","Close","InstructionFactory","letter","coordsCount","Create","coords","CreateVector2","unshift","pair","split","ArcFactory","instructionFactory","pathNode","SVGNodeToPath","PathToSVGNode","instructions","l","Segments","pop","prevSegment","qseg","rectNode","Brush_1","PRESSURE_PRECISION","CommandFactory","getCmdTime","storeTime","P","cmdEl","w","Metadata_1","AudioPlayer_1","MetadataFactory","rootNode","meta","Length","AudioTracks","audioElement","audioSource"],"mappings":"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","file":"common.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId])\n/******/ \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n/******/ \t\twhile(callbacks.length)\n/******/ \t\t\tcallbacks.shift().call(null, __webpack_require__);\n/******/ \t\tif(moreModules[0]) {\n/******/ \t\t\tinstalledModules[0] = 0;\n/******/ \t\t\treturn __webpack_require__(0);\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// object to store loaded and loading chunks\n/******/ \t// \"0\" means \"already loaded\"\n/******/ \t// Array means \"loading\", array contains callbacks\n/******/ \tvar installedChunks = {\n/******/ \t\t0:0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n/******/ \t\t// \"0\" is the signal for \"already loaded\"\n/******/ \t\tif(installedChunks[chunkId] === 0)\n/******/ \t\t\treturn callback.call(null, __webpack_require__);\n/******/\n/******/ \t\t// an array means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId] !== undefined) {\n/******/ \t\t\tinstalledChunks[chunkId].push(callback);\n/******/ \t\t} else {\n/******/ \t\t\t// start chunk loading\n/******/ \t\t\tinstalledChunks[chunkId] = [callback];\n/******/ \t\t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\t\tvar script = document.createElement('script');\n/******/ \t\t\tscript.type = 'text/javascript';\n/******/ \t\t\tscript.charset = 'utf-8';\n/******/ \t\t\tscript.async = true;\n/******/\n/******/ \t\t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + ({\"1\":\"recorder\",\"2\":\"player\"}[chunkId]||chunkId) + \".js\";\n/******/ \t\t\thead.appendChild(script);\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";!function(e){e[e.Start=0]=\"Start\",e[e.Pause=1]=\"Pause\",e[e.ReachEnd=2]=\"ReachEnd\",e[e.JumpTo=3]=\"JumpTo\",e[e.VideoInfoLoaded=4]=\"VideoInfoLoaded\",e[e.BufferStatus=5]=\"BufferStatus\",e[e.CursorState=6]=\"CursorState\",e[e.ChangeColor=7]=\"ChangeColor\",e[e.ChangeBrushSize=8]=\"ChangeBrushSize\",e[e.StartPath=9]=\"StartPath\",e[e.DrawSegment=10]=\"DrawSegment\",e[e.DrawPath=11]=\"DrawPath\",e[e.ClearCanvas=12]=\"ClearCanvas\",e[e.RedrawCanvas=13]=\"RedrawCanvas\",e[e.CanvasSize=14]=\"CanvasSize\",e[e.CanvasScalingFactor=15]=\"CanvasScalingFactor\",e[e.CursorOffset=16]=\"CursorOffset\",e[e.RegisterRecordingTool=17]=\"RegisterRecordingTool\",e[e.RecordingToolFinished=18]=\"RecordingToolFinished\",e[e.MuteAudioRecording=19]=\"MuteAudioRecording\",e[e.AudioRecordingAvailable=20]=\"AudioRecordingAvailable\",e[e.AudioRecordingUnavailable=21]=\"AudioRecordingUnavailable\",e[e.StartUpload=22]=\"StartUpload\",e[e.DownloadData=23]=\"DownloadData\",e[e.VolumeUp=24]=\"VolumeUp\",e[e.VolumeDown=25]=\"VolumeDown\",e[e.Mute=26]=\"Mute\",e[e.Busy=27]=\"Busy\",e[e.Ready=28]=\"Ready\",e[e.length=29]=\"length\"}(exports.VideoEventType||(exports.VideoEventType={}));var VideoEventType=exports.VideoEventType,VideoEvent=function(){function e(e){this.type=e,this.listeners=new Array(0)}return Object.defineProperty(e.prototype,\"Type\",{get:function(){return this.type},enumerable:!0,configurable:!0}),e.prototype.on=function(e){this.listeners.push(e)},e.prototype.off=function(e){var t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)},e.prototype.trigger=function(e){for(var t=0;t<this.listeners.length;t++){var o=this.listeners[t];o.apply(this,e)}},e}(),VideoEvents=function(){function e(){this.events=new Array(VideoEventType.length)}return e.prototype.on=function(e,t){this.events[e]||(this.events[e]=new VideoEvent(e)),this.events[e].on(t)},e.prototype.off=function(e,t){this.events[e]&&this.events[e].off(t)},e.prototype.trigger=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.events[e];n&&n.trigger(t)},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=VideoEvents;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var HTML=function(){function t(){}return t.CreateElement=function(e,r,n){var i=document.createElement(e);if(r&&t.SetAttributes(i,r),n&&Array.isArray(n))for(var u in n)i.appendChild(n[u]);return i},t.SetAttributes=function(t,e){for(var r in e)t.setAttribute(r,e[r])},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=HTML;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var HelperFunctions_1=__webpack_require__(6),SVG=function(){function e(){}return Object.defineProperty(e,\"Namespace\",{get:function(){return this.namespace},enumerable:!0,configurable:!0}),e.CreateDot=function(e,t,r){return this.CreateElement(\"circle\",{cx:HelperFunctions_1.precise(e.X),cy:HelperFunctions_1.precise(e.Y),r:HelperFunctions_1.precise(t),fill:r,stroke:\"transparent\"})},e.CreateCircle=function(e,t,r){return t>0?this.CreateElement(\"circle\",{cx:HelperFunctions_1.precise(e.X),cy:HelperFunctions_1.precise(e.Y),r:HelperFunctions_1.precise(t),stroke:r,fill:\"transparent\",\"stroke-width\":1}):null},e.CreateLine=function(e,t,r,n){return r>0?this.CreateElement(\"path\",{fill:\"transparent\",stroke:n,\"stroke-width\":HelperFunctions_1.precise(r),d:this.MoveToString(e)+\" \"+this.LineToString(t)}):null},e.CreateElement=function(e,t){var r=document.createElementNS(this.namespace,e);return t&&this.SetAttributes(r,t),r},e.SetAttributes=function(e,t){e||console.log(t);for(var r in t)e.setAttributeNS(null,r,t[r])},e.MoveToString=function(e){return\"M \"+HelperFunctions_1.precise(e.X)+\",\"+HelperFunctions_1.precise(e.Y)},e.LineToString=function(e){return\"L \"+HelperFunctions_1.precise(e.X)+\",\"+HelperFunctions_1.precise(e.Y)},e.CurveToString=function(e,t,r){return\"C \"+HelperFunctions_1.precise(e.X)+\",\"+HelperFunctions_1.precise(e.Y)+\" \"+HelperFunctions_1.precise(t.X)+\",\"+HelperFunctions_1.precise(t.Y)+\" \"+HelperFunctions_1.precise(r.X)+\",\"+HelperFunctions_1.precise(r.Y)},e.ArcString=function(e,t,r){return\"A \"+HelperFunctions_1.precise(t)+\",\"+HelperFunctions_1.precise(t)+\" \"+r+\" 0,0 \"+HelperFunctions_1.precise(e.X)+\",\"+HelperFunctions_1.precise(e.Y)},e.attr=function(e,t){var r=e.attributes.getNamedItemNS(null,t);if(r)return r.textContent;throw new Error(\"Attribute \"+t+\" is missing in \"+e.localName)},e.numAttr=function(e,t){return Number(e.attributes.getNamedItemNS(null,t).textContent)},e.namespace=\"http://www.w3.org/2000/svg\",e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=SVG;var SVGA=function(){function e(){}return Object.defineProperty(e,\"Namespace\",{get:function(){return this.namespace},enumerable:!0,configurable:!0}),e.CreateElement=function(e,t){var r=document.createElementNS(this.namespace,\"a:\"+e);return t&&this.SetAttributes(r,t),r},e.SetAttributes=function(e,t){e||console.log(t);for(var r in t){var n=document.createAttributeNS(this.namespace,\"a:\"+r);n.textContent=t[r],e.attributes.setNamedItemNS(n)}},e.attr=function(e,t,r){var n=e.attributes.getNamedItemNS(this.Namespace,t);if(n)return n.textContent;if(r)return r;throw new Error(\"Attribute \"+t+\" is missing in \"+e.localName)},e.numAttr=function(t,r,n){return Number(e.attr(t,r,void 0!==n?n.toString():void 0))},e.namespace=\"http://www.rozsival.com/2015/vector-screencast\",e}();exports.SVGA=SVGA;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var Vector2=function(){function t(t,e){this.x=t,this.y=e}return Object.defineProperty(t.prototype,\"X\",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Y\",{get:function(){return this.y},enumerable:!0,configurable:!0}),t.prototype.isEqualTo=function(t){return this.X===t.X&&this.Y===t.Y},t.prototype.getSize=function(){return Math.sqrt(this.getSizeSq())},t.prototype.getSizeSq=function(){return this.x*this.x+this.y*this.y},t.prototype.distanceTo=function(t){var e=this.x-t.X,r=this.y-t.Y;return Math.sqrt(e*e+r*r)},t.prototype.normalize=function(){var t=this.getSize();if(0===t)throw new Error(\"Can't normalize zero vector.\");return this.scale(1/t),this},t.prototype.getNormal=function(){return new t(-this.y,this.x).normalize()},t.prototype.add=function(t){return this.x+=t.X,this.y+=t.Y,this},t.prototype.subtract=function(t){return this.x-=t.X,this.y-=t.Y,this},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.prototype.pointInBetween=function(e){return new t((this.x+e.X)/2,(this.y+e.Y)/2)},t.prototype.clone=function(){return new t(this.x,this.y)},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Vector2;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function n(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},HTML_1=__webpack_require__(2),SimpleElement=function(){function t(t,e){t instanceof HTMLElement?this.element=t:this.element=HTML_1[\"default\"].CreateElement(t),e&&(this.element.textContent=e)}return t.prototype.GetHTML=function(){return this.element},t.prototype.HasClass=function(t){return this.GetHTML().classList.contains(t)},t.prototype.AddClass=function(t){return this.AddClasses(t)},t.prototype.AddClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.add(t[n]);return this},t.prototype.RemoveClass=function(t){return this.RemoveClasses(t)},t.prototype.RemoveClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.remove(t[n]);return this},t}();exports.SimpleElement=SimpleElement;var Button=function(t){function e(e,n){t.call(this,\"button\"),this.AddClass(\"ui-button\"),this.content=new SimpleElement(\"span\",e),this.GetHTML().appendChild(this.content.GetHTML()),n&&(this.GetHTML().onclick=n)}return __extends(e,t),e.prototype.ChangeContent=function(t){return this.content.GetHTML().innerHTML=t,this},e}(SimpleElement);exports.Button=Button;var IconButton=function(t){function e(e,n,s){t.call(this,n,s),this.iconClass=e,this.icon=new SimpleElement(\"span\",\"\").AddClasses(\"icon\",e),this.AddClass(\"has-icon\"),this.GetHTML().appendChild(this.icon.GetHTML())}return __extends(e,t),e.prototype.ChangeIcon=function(t){return this.icon.RemoveClass(this.iconClass).AddClass(t),this.iconClass=t,this},e}(Button);exports.IconButton=IconButton;var IconOnlyButton=function(t){function e(e,n,s){t.call(this,e,\"\",s),this.ChangeContent(n),this.AddClass(\"icon-only-button\")}return __extends(e,t),e.prototype.ChangeContent=function(t){return HTML_1[\"default\"].SetAttributes(this.GetHTML(),{title:t}),this},e}(IconButton);exports.IconOnlyButton=IconOnlyButton;var Heading=function(t){function e(e,n){t.call(this,\"h\"+e,n)}return __extends(e,t),e}(SimpleElement);exports.Heading=Heading;var H2=function(t){function e(e){t.call(this,2,e)}return __extends(e,t),e}(Heading);exports.H2=H2;var Panel=function(){function t(t,e){this.element=HTML_1[\"default\"].CreateElement(t),e&&HTML_1[\"default\"].SetAttributes(this.element,{id:e}),this.elements=[]}return Object.defineProperty(t.prototype,\"Children\",{get:function(){return this.elements},enumerable:!0,configurable:!0}),t.prototype.AddChild=function(t){return this.AddChildren(t)},t.prototype.AddChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.elements.push(t[n]),this.GetHTML().appendChild(t[n].GetHTML());return this},t.prototype.GetHTML=function(){return this.element},t.prototype.HasClass=function(t){return this.GetHTML().classList.contains(t)},t.prototype.AddClass=function(t){return this.AddClasses(t)},t.prototype.AddClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.add(t[n]);return this},t.prototype.RemoveClass=function(t){return this.RemoveClasses(t)},t.prototype.RemoveClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.remove(t[n]);return this},t}();exports.Panel=Panel;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";function maxDecPlaces(o,e){return void 0===e&&(e=COORDS_PRECISION),Number(o.toFixed(e))}function precise(o,e){return void 0===e&&(e=COORDS_PRECISION),maxDecPlaces(o,e).toString()}function secondsToString(o){var e,r=Math.floor(o/60);e=r+\":\";var t=Math.floor(o%60);return e+=9>=t?\"0\"+t.toString(10):t.toString(10)}function millisecondsToString(o){return secondsToString(Math.floor(o/1e3))}var COORDS_PRECISION=3;exports.maxDecPlaces=maxDecPlaces,exports.precise=precise,exports.secondsToString=secondsToString,exports.millisecondsToString=millisecondsToString;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var Color=function(){function e(e){this.cssValue=e}return Object.defineProperty(e.prototype,\"CssValue\",{get:function(){return this.cssValue},enumerable:!0,configurable:!0}),Object.defineProperty(e,\"BackgroundColor\",{get:function(){return new e(this.backgroundPrototype.CssValue)},set:function(e){this.backgroundPrototype=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,\"ForegroundColor\",{get:function(){return new e(this.foregroundPrototype.CssValue)},set:function(e){this.foregroundPrototype=e},enumerable:!0,configurable:!0}),e.backgroundPrototype=new e(\"#111\"),e.foregroundPrototype=new e(\"#fff\"),e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Color;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";!function(r){r[r.Warning=0]=\"Warning\",r[r.Fatal=1]=\"Fatal\"}(exports.ErrorType||(exports.ErrorType={}));var ErrorType=exports.ErrorType,Errors=function(){function r(){}return r.TurnOn=function(){this.doLog=!0},r.TurnOff=function(){this.doLog=!1},r.SetLogFunction=function(r){this.LogFunction=r},r.Report=function(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.doLog&&this.LogFunction(r,o)},r.ErrorTypeName=function(r){switch(r){case ErrorType.Warning:return\"Warning\";case ErrorType.Fatal:return\"Fatal error\";default:return\"Unknown error type\"}},r.doLog=!0,r.LogFunction=function(o,n){if(o===ErrorType.Fatal)throw new Error(\"Fatal Error: \"+n.join(\"; \"));console.log(r.ErrorTypeName(o),n)},r}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Errors;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},VideoEvents_1=__webpack_require__(1),Chunk=function(){function t(t,e){this.time=t,this.lastErase=e,this.initCommands=[],this.commands=[],this.cmdIterator=0}return Object.defineProperty(t.prototype,\"StartTime\",{get:function(){return this.time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LastErase\",{get:function(){return this.lastErase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"CurrentCommand\",{get:function(){return this.commands[this.cmdIterator]},enumerable:!0,configurable:!0}),t.prototype.PeekNextCommand=function(){return this.commands[this.cmdIterator+1]},t.prototype.MoveNextCommand=function(){this.cmdIterator++},t.prototype.Rewind=function(){this.cmdIterator=0},t.prototype.ExecuteInitCommands=function(t){for(var e=0;e<this.initCommands.length;e++)this.initCommands[e].Execute(t)},t.prototype.GetCommand=function(t){return t<this.commands.length?this.commands[t]:null},t.prototype.PushCommand=function(t){this.commands.push(t)},Object.defineProperty(t.prototype,\"Commands\",{get:function(){return this.commands},set:function(t){this.commands=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"InitCommands\",{get:function(){return this.initCommands},set:function(t){this.initCommands=t},enumerable:!0,configurable:!0}),t.prototype.Render=function(t){throw new Error(\"Not implemented\")},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Chunk;var VoidChunk=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.Render=function(){},e}(Chunk);exports.VoidChunk=VoidChunk;var PathChunk=function(t){function e(e,n,o){t.call(this,n,o),this.path=e}return __extends(e,t),Object.defineProperty(e.prototype,\"Path\",{get:function(){return this.path},enumerable:!0,configurable:!0}),e.prototype.Render=function(t){t.trigger(VideoEvents_1.VideoEventType.DrawPath)},e}(Chunk);exports.PathChunk=PathChunk;var EraseChunk=function(t){function e(e,n,o){t.call(this,n,o),this.color=e}return __extends(e,t),Object.defineProperty(e.prototype,\"Color\",{get:function(){return this.color},enumerable:!0,configurable:!0}),e.prototype.ExecuteInitCommands=function(e){this.Render(e),t.prototype.ExecuteInitCommands.call(this,e)},e.prototype.Render=function(t){t.trigger(VideoEvents_1.VideoEventType.ClearCanvas,this.color)},e}(Chunk);exports.EraseChunk=EraseChunk;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},VideoEvents_1=__webpack_require__(1),State_1=__webpack_require__(17),Command=function(){function e(e){this.time=e}return Object.defineProperty(e.prototype,\"Time\",{get:function(){return this.time},enumerable:!0,configurable:!0}),e.prototype.Execute=function(e){throw new Error(\"Not implemented\")},e.prototype.Clone=function(){throw new Error(\"Not implemented\")},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Command;var MoveCursor=function(e){function t(t,r,o,n){e.call(this,n),this.x=t,this.y=r,this.p=o}return __extends(t,e),Object.defineProperty(t.prototype,\"X\",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Y\",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"P\",{get:function(){return this.p},enumerable:!0,configurable:!0}),t.prototype.Execute=function(e){e.trigger(VideoEvents_1.VideoEventType.CursorState,new State_1.CursorState(this.Time,this.x,this.y,this.p))},t.prototype.Clone=function(){return new t(this.x,this.y,this.p,this.Time)},t}(Command);exports.MoveCursor=MoveCursor;var DrawNextSegment=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.Execute=function(e){e.trigger(VideoEvents_1.VideoEventType.DrawSegment)},t.prototype.Clone=function(){return new t(this.Time)},t}(Command);exports.DrawNextSegment=DrawNextSegment;var ChangeBrushColor=function(e){function t(t,r){e.call(this,r),this.color=t}return __extends(t,e),Object.defineProperty(t.prototype,\"Color\",{get:function(){return this.color},enumerable:!0,configurable:!0}),t.prototype.Execute=function(e){e.trigger(VideoEvents_1.VideoEventType.ChangeColor,this.color)},t.prototype.Clone=function(){return new t(this.color,this.Time)},t}(Command);exports.ChangeBrushColor=ChangeBrushColor;var ChangeBrushSize=function(e){function t(t,r){e.call(this,r),this.size=t}return __extends(t,e),Object.defineProperty(t.prototype,\"Size\",{get:function(){return this.size},enumerable:!0,configurable:!0}),t.prototype.Execute=function(e){e.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize,this.size)},t.prototype.Clone=function(){return new t(this.size,this.Time)},t}(Command);exports.ChangeBrushSize=ChangeBrushSize;var ClearCanvas=function(e){function t(t,r){e.call(this,r),this.color=t}return __extends(t,e),Object.defineProperty(t.prototype,\"Color\",{get:function(){return this.color},enumerable:!0,configurable:!0}),t.prototype.Execute=function(e){e.trigger(VideoEvents_1.VideoEventType.ClearCanvas,this.color)},t.prototype.Clone=function(){return new t(this.color,this.Time)},t}(Command);exports.ClearCanvas=ClearCanvas;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var VideoEvents_1=__webpack_require__(1),Errors_1=__webpack_require__(8),HTML_1=__webpack_require__(2);!function(e){e[e.MP3=0]=\"MP3\",e[e.OGG=1]=\"OGG\",e[e.WAV=2]=\"WAV\"}(exports.AudioSourceType||(exports.AudioSourceType={}));var AudioSourceType=exports.AudioSourceType,AudioSource=function(){function e(e,t){this.url=e,this.type=t}return Object.defineProperty(e.prototype,\"Url\",{get:function(){return this.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"Type\",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"MimeType\",{get:function(){switch(this.type){case AudioSourceType.MP3:return\"audio/mp3\";case AudioSourceType.OGG:return\"audio/ogg\";case AudioSourceType.WAV:return\"audio/wav\";default:return null}},enumerable:!0,configurable:!0}),e.StringToType=function(e){switch(e){case\"audio/mp3\":return AudioSourceType.MP3;case\"audio/wav\":return AudioSourceType.WAV;case\"audio/ogg\":return AudioSourceType.OGG;default:throw new Error(\"Unknown audio type \"+e)}},e}();exports.AudioSource=AudioSource;var AudioPlayer=function(){function e(e,t){this.events=e,this.audio=this.CreateAudio(t),null===this.audio?this.isReady=!1:(this.playing=!1,this.reachedEnd=!1,this.InitAudio(),this.isReady=!0,document.documentElement.appendChild(this.audio),console.log(\"Audio is available.\"))}return Object.defineProperty(e.prototype,\"IsReady\",{get:function(){return this.isReady},enumerable:!0,configurable:!0}),e.prototype.CreateAudio=function(e){try{var t=new Audio;if(!t.canPlayType)return Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"AudioPlayer: browser does not support HTML5 audio\"),null;for(var o=!1,i=0;i<e.length;i++){var r=e[i];if(\"probably\"===t.canPlayType(r.MimeType)){var n=HTML_1[\"default\"].CreateElement(\"source\",{src:r.Url,type:r.MimeType});t.appendChild(n),o=!0}}if(o===!1)for(var i=0;i<e.length;i++){var r=e[i];if(\"maybe\"===t.canPlayType(r.MimeType)){var n=HTML_1[\"default\"].CreateElement(\"source\",{src:r.Url,type:r.MimeType});t.appendChild(n),o=!0}}return o===!1?(Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"Browser can't play any of available audio sources.\",e),null):t}catch(u){return Errors_1[\"default\"].Report(Errors_1.ErrorType.Warning,\"AudioPlayer: can't create audio element\",u),null}},e.prototype.InitAudio=function(){var e=this;this.audio.onended=function(){return e.events.trigger(VideoEvents_1.VideoEventType.ReachEnd)},this.audio.onwaiting=function(){return e.Busy()},this.audio.oncanplay=function(){return e.Ready()},this.events.on(VideoEvents_1.VideoEventType.Mute,function(){return e.Mute()}),this.events.on(VideoEvents_1.VideoEventType.VolumeUp,function(){return e.VolumeUp()}),this.events.on(VideoEvents_1.VideoEventType.VolumeDown,function(){return e.VolumeDown()}),this.MonitorBufferingAsync()},e.prototype.Busy=function(){this.playing&&(this.triggeredBusyState=!0,this.events.trigger(VideoEvents_1.VideoEventType.Pause))},e.prototype.Ready=function(){this.triggeredBusyState&&(this.events.trigger(VideoEvents_1.VideoEventType.Ready),this.triggeredBusyState=!1)},e.prototype.Play=function(){this.isReady&&(1==this.reachedEnd&&this.Rewind(),this.audio.play())},e.prototype.InitiatePlay=function(){this.events.trigger(VideoEvents_1.VideoEventType.Start)},e.prototype.Pause=function(){this.isReady&&this.audio.pause()},e.prototype.ReachedEnd=function(){this.reachedEnd=!0,this.Pause()},e.prototype.Replay=function(){this.Rewind(),this.Play()},e.prototype.Rewind=function(){this.isReady&&(this.audio.pause(),this.audio.currentTime=0,this.reachedEnd=!1)},e.prototype.MonitorBufferingAsync=function(){var e=this,t=0;this.checkPreloaded=setInterval(function(){var o=e.audio.buffered.end(e.audio.buffered.length-1);o!==t&&(e.events.trigger(VideoEvents_1.VideoEventType.BufferStatus,o),t=o),o===e.audio.duration&&clearInterval(e.checkPreloaded)},300)},e.prototype.JumpTo=function(e){if(this.isReady){this.reachedEnd=!1;var t=this.audio.duration*e;this.ChangePosition(t),clearInterval(this.checkPreloaded),this.MonitorBufferingAsync()}},e.prototype.ChangePosition=function(e){this.audio.currentTime=e},e.prototype.Mute=function(){this.audio.muted=!this.audio.muted},e.prototype.VolumeUp=function(){this.audio.volume=Math.min(1,this.audio.volume+.1)},e.prototype.VolumeDown=function(){this.audio.volume=Math.max(0,this.audio.volume-.1)},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=AudioPlayer;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},SVG_1=__webpack_require__(3),Vector_1=__webpack_require__(4),VideoEvents_1=__webpack_require__(1),Spline_1=__webpack_require__(16),Segments_1=__webpack_require__(14),Path=function(){function t(t,e,n,i){this.events=t,this.curved=e,this.color=n,this.wireframe=i,void 0===this.wireframe&&(this.wireframe=!1),this.segments=[],this.pathPoints=[]}return Object.defineProperty(t.prototype,\"Segments\",{get:function(){return this.segments},set:function(t){this.segments=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LastDrawnSegment\",{get:function(){return this.lastDrawnSegment},set:function(t){this.lastDrawnSegment=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LastPoint\",{get:function(){return this.pathPoints[this.iterator]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LastButOnePoint\",{get:function(){return this.pathPoints[Math.max(0,this.iterator-1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LastButTwoPoint\",{get:function(){return this.pathPoints[Math.max(0,this.iterator-2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Color\",{get:function(){return this.color},enumerable:!0,configurable:!0}),t.prototype.StartPath=function(t,e){this.segments=[new Segments_1.ZeroLengthSegment(t.clone().add(new Vector_1[\"default\"](0,e)),t.clone().add(new Vector_1[\"default\"](0,-e)))],this.startPosition=t,this.startRadius=e,this.iterator=-1,this.DrawStartDot(t,e),this.lastDrawnSegment=this.segments[0]},t.prototype.DrawStartDot=function(t,e){throw new Error(\"Not impelmented\")},t.prototype.InitPath=function(t,e){this.segments=[new Segments_1.ZeroLengthSegment(e,t)],this.pathPoints.push({Left:e,Right:t}),this.iterator=0},t.prototype.StartDrawingPath=function(t){this.DrawStartDot(t.Left.pointInBetween(t.Right),t.Left.distanceTo(t.Right)/2),this.lastDrawnSegment=t},t.prototype.ExtendPath=function(t,e){var n=this.pathPoints[this.pathPoints.length-1];if(!n.Left.isEqualTo(e)||!n.Right.isEqualTo(t)){var i=this.CalculateSegment(t,e);this.DrawSegment(i),this.events.trigger(VideoEvents_1.VideoEventType.DrawSegment,i),this.segments.push(i),this.pathPoints.push({Left:e,Right:t}),this.iterator++}},t.prototype.CalculateSegment=function(t,e){return this.curved?this.CalculateCurvedSegment(t,e):this.CalculateQuarilateralSegment(t,e)},t.prototype.CalculateCurvedSegment=function(t,e){var n=Spline_1.Spline.catmullRomToBezier(this.LastButTwoPoint.Left,this.LastButOnePoint.Left,this.LastPoint.Left,e),i=Spline_1.Spline.catmullRomToBezier(this.LastButTwoPoint.Right,this.LastButOnePoint.Right,this.LastPoint.Right,t),r=new Segments_1.CurvedSegment(n,i);return this.DrawCurvedSegment(r),r},t.prototype.DrawCurvedSegment=function(t){throw new Error(\"Not implemented\")},t.prototype.CalculateQuarilateralSegment=function(t,e){return new Segments_1.QuadrilateralSegment(e,t)},t.prototype.DrawQuadrilateralSegment=function(t){throw new Error(\"Not implemented\")},t.prototype.Draw=function(){},t.prototype.DrawSegment=function(t){t instanceof Segments_1.CurvedSegment?this.DrawCurvedSegment(t):t instanceof Segments_1.QuadrilateralSegment&&this.DrawQuadrilateralSegment(t),this.lastDrawnSegment=t},t.angle=function(t){return Math.atan2(-t.X,t.Y)-Math.PI/2},t.prototype.DrawWholePath=function(){if(this.iterator=0,0!==this.segments.length){var t=this.segments[0].Left.clone().add(this.segments[0].Right).scale(.5),e=t.distanceTo(this.segments[0].Left);for(this.DrawStartDot(t,e),this.lastDrawnSegment=this.segments[0];this.iterator<this.segments.length;)this.DrawSegment(this.segments[this.iterator++]);this.Draw()}},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Path;var SvgPath=function(t){function e(e,n,i,r){t.call(this,e,n,i),this.canvas=r}return __extends(e,t),e.prototype.DrawStartDot=function(t,e){this.path=this.CreatePathElement();var n=new Vector_1[\"default\"](t.X-e,t.Y),i=new Vector_1[\"default\"](t.X+e,t.Y),r=i.pointInBetween(n),a=n.clone().subtract(r),o=i.clone().subtract(r),s=SVG_1[\"default\"].ArcString(i,r.distanceTo(i),Path.angle(a));this.right=SVG_1[\"default\"].MoveToString(i),this.left=SVG_1[\"default\"].LineToString(n)+\" \"+s,this.cap=SVG_1[\"default\"].ArcString(n,r.distanceTo(n),Path.angle(o)),SVG_1[\"default\"].SetAttributes(this.path,{d:this.right+this.cap+this.left}),this.canvas.appendChild(this.path)},e.prototype.InitPath=function(e,n){t.prototype.InitPath.call(this,e,n),this.StartDrawingPath(this.segments[0])},e.prototype.CreatePathElement=function(){var t;return t=this.wireframe?{stroke:this.color,\"stroke-width\":1}:{fill:this.color},SVG_1[\"default\"].CreateElement(\"path\",t)},e.prototype.DrawCurvedSegment=function(t){this.right+=SVG_1[\"default\"].CurveToString(t.RightBezier.StartCP,t.RightBezier.EndCP,t.RightBezier.End),this.left=SVG_1[\"default\"].CurveToString(t.LeftBezier.EndCP,t.LeftBezier.StartCP,t.LeftBezier.Start)+\" \"+this.left;var e=t.Right.pointInBetween(t.Left),n=t.Right.clone().subtract(e);this.cap=SVG_1[\"default\"].ArcString(t.Left,e.distanceTo(t.Left),Path.angle(n))},e.prototype.DrawQuadrilateralSegment=function(t){this.right+=SVG_1[\"default\"].LineToString(t.Right),this.left=SVG_1[\"default\"].LineToString(this.lastDrawnSegment.Left)+\" \"+this.left;var e=t.Right.pointInBetween(t.Left),n=t.Right.clone().subtract(e);this.cap=SVG_1[\"default\"].ArcString(t.Left,e.distanceTo(t.Left),Path.angle(n))},e.prototype.GetPathString=function(){return this.right+this.cap+this.left},e.prototype.Draw=function(){SVG_1[\"default\"].SetAttributes(this.path,{d:this.GetPathString()})},e}(Path);exports.SvgPath=SvgPath;var CanvasPath=function(t){function e(e,n,i,r){t.call(this,e,n,i),this.context=r,this.context.fillStyle=this.color}return __extends(e,t),e.prototype.DrawStartDot=function(t,e){this.context.beginPath(),this.DrawDot(t,e),this.Draw()},e.prototype.DrawDot=function(t,e){this.context.arc(t.X,t.Y,e,0,2*Math.PI,!0)},e.prototype.DrawQuadrilateralSegment=function(t){this.context.moveTo(this.lastDrawnSegment.Right.X,this.lastDrawnSegment.Right.Y),this.context.lineTo(this.lastDrawnSegment.Left.X,this.lastDrawnSegment.Left.Y),this.context.lineTo(t.Left.X,t.Left.Y);var e=t.Left.pointInBetween(t.Right),n=t.Right.clone().subtract(e),i=t.Left.clone().subtract(e);this.context.arc(e.X,e.Y,e.distanceTo(t.Left),Path.angle(n),Path.angle(i),!1)},e.prototype.DrawCurvedSegment=function(t){this.context.moveTo(t.RightBezier.Start.X,t.RightBezier.Start.Y),this.context.lineTo(t.LeftBezier.Start.X,t.LeftBezier.Start.Y),this.context.bezierCurveTo(t.LeftBezier.StartCP.X,t.LeftBezier.StartCP.Y,t.LeftBezier.EndCP.X,t.LeftBezier.EndCP.Y,t.LeftBezier.End.X,t.LeftBezier.End.Y);var e=t.RightBezier.End.pointInBetween(t.LeftBezier.End),n=t.RightBezier.End.clone().subtract(e),i=t.LeftBezier.End.clone().subtract(e);this.context.arc(e.X,e.Y,e.distanceTo(t.LeftBezier.End),Path.angle(n),Path.angle(i),!1),this.context.bezierCurveTo(t.RightBezier.EndCP.X,t.RightBezier.EndCP.Y,t.RightBezier.StartCP.X,t.RightBezier.StartCP.Y,t.RightBezier.Start.X,t.RightBezier.Start.Y)},e.prototype.Draw=function(){this.context.closePath(),this.context.fill(),this.context.beginPath()},e}(Path);exports.CanvasPath=CanvasPath;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 13 */,\n/* 14 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var __extends=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},Segment=function(){function e(){}return Object.defineProperty(e.prototype,\"Left\",{get:function(){throw new Error(\"Not implemented\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"Right\",{get:function(){throw new Error(\"Not implemented\")},enumerable:!0,configurable:!0}),e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Segment;var QuadrilateralSegment=function(e){function t(t,r){e.call(this),this.left=t,this.right=r}return __extends(t,e),Object.defineProperty(t.prototype,\"Left\",{get:function(){return this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Right\",{get:function(){return this.right},enumerable:!0,configurable:!0}),t}(Segment);exports.QuadrilateralSegment=QuadrilateralSegment;var ZeroLengthSegment=function(e){function t(t,r){e.call(this,t,r)}return __extends(t,e),t}(QuadrilateralSegment);exports.ZeroLengthSegment=ZeroLengthSegment;var CurvedSegment=function(e){function t(t,r){e.call(this),this.left=t,this.right=r}return __extends(t,e),Object.defineProperty(t.prototype,\"Left\",{get:function(){return this.left.End},set:function(e){this.left.End=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Right\",{get:function(){return this.right.End},set:function(e){this.right.End=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"LeftBezier\",{get:function(){return this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"RightBezier\",{get:function(){return this.right},enumerable:!0,configurable:!0}),t}(Segment);exports.CurvedSegment=CurvedSegment;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var HTML_1=__webpack_require__(2),File=function(){function e(){}return e.Check=function(e,t){return 200===e.status&&t?e.getResponseHeader(\"ContentType\")===t:!0},e.Exists=function(e,t){var n=new XMLHttpRequest;return n.open(\"HEAD\",e,!1),n.send(),this.Check(n,t)},e.ExistsAsync=function(e,t,n,o){var r=this,u=new XMLHttpRequest;u.open(\"HEAD\",e,!0),u.onerror=n,u.ontimeout=n,u.onload=function(e){r.Check(u,o)?t(e):n(e)},u.send()},e.ReadFileAsync=function(e,t,n){var o=new XMLHttpRequest;o.open(\"GET\",e,!0),o.onerror=function(e){return n(o.status)},o.ontimeout=function(e){return n(o.status)},o.onload=function(e){200===o.status?t(o.responseXML?o.responseXML:o.response):n(o.status)},o.send()},e.ReadXmlAsync=function(e,t,n){var o=new XMLHttpRequest;o.open(\"GET\",e,!0),o.onerror=function(e){return n(o.status)},o.ontimeout=function(e){return n(o.status)},o.onload=function(e){200===o.status?t(o.responseXML):n(o.status)},o.send()},e.Download=function(e,t){var n=HTML_1[\"default\"].CreateElement(\"a\",{css:\"display: none\"});document.documentElement.appendChild(n);var o=URL.createObjectURL(e);HTML_1[\"default\"].SetAttributes(n,{href:o,download:t}),n.click(),URL.revokeObjectURL(o)},e.CurrentDateTime=function(){new Date;return\"$(date.getMonth())-$(date.getDay())-$(date.getFullYear())_$(date.getHour())-$(date.getMinute())\"},e.StartDownloadingWav=function(t){e.Download(t,\"recording-\"+e.CurrentDateTime()+\".wav\")},e.StartDownloadingXml=function(t){var n=new Blob([t],{type:\"text/xml\"});e.Download(n,\"data-\"+e.CurrentDateTime()+\".xml\")},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=File;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var Vector_1=__webpack_require__(4),Spline=function(){function e(){}return e.catmullRomToBezier=function(e,t,n,r){return new BezierCurveSegment(t,new Vector_1[\"default\"](-1/6*e.X+t.X+1/6*n.X,-1/6*e.Y+t.Y+1/6*n.Y),n,new Vector_1[\"default\"](1/6*t.X+n.X+-1/6*r.X,1/6*t.Y+n.Y+-1/6*r.Y))},e}();exports.Spline=Spline;var BezierCurveSegment=function(){function e(e,t,n,r){this.start=e,this.startCP=t,this.end=n,this.endCP=r}return Object.defineProperty(e.prototype,\"Start\",{get:function(){return this.start},set:function(e){this.start=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"StartCP\",{get:function(){return this.startCP},set:function(e){this.startCP=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"End\",{get:function(){return this.end},set:function(e){this.end=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"EndCP\",{get:function(){return this.endCP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"EndCp\",{set:function(e){this.endCP=e},enumerable:!0,configurable:!0}),e}();exports.BezierCurveSegment=BezierCurveSegment;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Vector_1=__webpack_require__(4);!function(t){t[t.ChangeBrushSize=0]=\"ChangeBrushSize\",t[t.ChangeColor=1]=\"ChangeColor\",t[t.Cursor=2]=\"Cursor\"}(exports.StateType||(exports.StateType={}));var StateType=exports.StateType,State=function(){function t(t,e){this.type=t,this.time=e}return t.prototype.GetType=function(){return this.type},t.prototype.GetTime=function(){return this.time},t}();exports.State=State;var CursorState=function(t){function e(e,r,o,n){t.call(this,StateType.Cursor,e),this.x=r,this.y=o,this.pressure=n}return __extends(e,t),Object.defineProperty(e.prototype,\"X\",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"Y\",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"Pressure\",{get:function(){return this.pressure},enumerable:!0,configurable:!0}),e.prototype.getPosition=function(){return new Vector_1[\"default\"](this.x,this.y)},e}(State);exports.CursorState=CursorState;var ColorState=function(t){function e(e,r){t.call(this,StateType.ChangeColor,e),this.color=r}return __extends(e,t),Object.defineProperty(e.prototype,\"Color\",{get:function(){return this.color},enumerable:!0,configurable:!0}),e}(State);exports.ColorState=ColorState;var SizeState=function(t){function e(e,r){t.call(this,StateType.ChangeBrushSize,e),this.size=r}return __extends(e,t),Object.defineProperty(e.prototype,\"Size\",{get:function(){return this.size},enumerable:!0,configurable:!0}),e}(State);exports.SizeState=SizeState;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var VideoTimer=function(){function e(e){this.pauseTime=0,window.performance?this.clock=window.performance:this.clock=Date,this.paused=!e,this.Reset()}return Object.defineProperty(e.prototype,\"StartTime\",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),e.prototype.CurrentTime=function(){return this.paused?this.pauseTime:this.clock.now()-this.startTime},e.prototype.SetTime=function(e){this.paused?this.pauseTime=e:this.startTime=this.clock.now()-e},e.prototype.Pause=function(){this.pauseTime=this.CurrentTime(),this.paused=!0},e.prototype.Resume=function(){this.paused=!1,this.Reset(),this.SetTime(this.pauseTime)},e.prototype.Reset=function(){this.startTime=this.clock.now()},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=VideoTimer;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},VideoEvents_1=__webpack_require__(1),HTML_1=__webpack_require__(2),BasicElements_1=__webpack_require__(5),Cursor_1=__webpack_require__(31),Board=function(e){function t(t,r){var o=this;e.call(this,\"div\",t),this.events=r,HTML_1[\"default\"].SetAttributes(this.GetHTML(),{\"class\":\"vector-video-board\"}),this.cursor=new Cursor_1[\"default\"](r),this.AddChild(this.cursor),HTML_1[\"default\"].SetAttributes(this.GetHTML(),{position:\"relative\"}),r.on(VideoEvents_1.VideoEventType.CursorState,function(e){return o.UpdateCursorPosition(e)}),r.on(VideoEvents_1.VideoEventType.CursorState,function(e){return o.UpdateCursorPosition(e)}),r.on(VideoEvents_1.VideoEventType.ChangeBrushSize,function(e){return o.UpdateCursorSize(e)}),r.on(VideoEvents_1.VideoEventType.ChangeColor,function(e){return o.UpdateCursorColor(e)}),r.on(VideoEvents_1.VideoEventType.ChangeColor,function(e){return o.UpdateCursorColor(e)}),r.on(VideoEvents_1.VideoEventType.CanvasScalingFactor,function(e){return o.UpdateCursorScale(e)}),r.on(VideoEvents_1.VideoEventType.CursorOffset,function(e){return o.cursor.Offset=e})}return __extends(t,e),Object.defineProperty(t.prototype,\"Width\",{get:function(){return this.GetHTML().clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"Height\",{get:function(){return this.GetHTML().clientHeight},set:function(e){this.GetHTML().clientHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"IsRecording\",{set:function(e){e?this.GetHTML().classList.add(\"recording\"):this.GetHTML().classList.remove(\"recording\")},enumerable:!0,configurable:!0}),t.prototype.UpdateCursorPosition=function(e){this.cursor.MoveTo(e.X,e.Y)},t.prototype.UpdateCursorSize=function(e){this.cursor.ChangeSize(e)},t.prototype.UpdateCursorColor=function(e){this.cursor.ChangeColor(e)},t.prototype.UpdateCursorScale=function(e){this.cursor.SetScalingFactor(e)},t}(BasicElements_1.Panel);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Board;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var BrushSize=function(){function e(e){this.size=e}return Object.defineProperty(e.prototype,\"Size\",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"Unit\",{get:function(){return\"px\"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"CssValue\",{get:function(){return\"\"+this.Size+this.Unit},enumerable:!0,configurable:!0}),e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=BrushSize;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var Metadata=function(){function e(){}return e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Metadata;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 22 */,\n/* 23 */,\n/* 24 */\n/***/ function(module, exports) {\n\n\t\"use strict\";var Video=function(){function t(){this.chunks=[]}return Object.defineProperty(t.prototype,\"Metadata\",{get:function(){return this.metadata},set:function(t){this.metadata=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"CurrentChunk\",{get:function(){return this.chunks[this.currentChunk]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"CurrentChunkNumber\",{get:function(){return this.currentChunk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"SetCurrentChunkNumber\",{set:function(t){this.currentChunk=t},enumerable:!0,configurable:!0}),t.prototype.PeekNextChunk=function(){return this.chunks[this.currentChunk+1]},t.prototype.MoveNextChunk=function(){this.currentChunk++,this.CurrentChunk&&this.CurrentChunk.Rewind()},t.prototype.PushChunk=function(t){return this.currentChunk=this.chunks.push(t)-1,this.currentChunk},t.prototype.Rewind=function(){this.currentChunk=0},t.prototype.RewindMinusOne=function(){this.currentChunk=-1},t.prototype.FastforwardErasedChunksUntil=function(t){var n=this.FindChunk(t,1);return Math.max(this.currentChunk,this.chunks[n].LastErase)},t.prototype.RewindToLastEraseBefore=function(t){var n=this.FindChunk(t,-1);return this.chunks[n].LastErase},t.prototype.FindChunk=function(t,n){for(var e=Math.min(this.currentChunk,this.chunks.length-2);this.chunks[e]&&this.chunks[e+1]&&(this.chunks[e].StartTime<=t&&this.chunks[e+1].StartTime>=t)==!1;)e+=n;return 0>e?0:e},t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Video;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var Video_1=__webpack_require__(24),Chunk_1=__webpack_require__(9),ChunkFactories_1=__webpack_require__(38),CommandFactories_1=__webpack_require__(39),MetadataFactory_1=__webpack_require__(40),SVG_1=__webpack_require__(3),IO=function(){function e(){this.VideoChunksLayerType=\"video-chunks\",this.commandFactory=new CommandFactories_1.MoveCursorFactory(new CommandFactories_1.DrawSegmentFactory(new CommandFactories_1.ChangeBrushColorFactory(new CommandFactories_1.ChangeBrushSizeFactory(new CommandFactories_1.ClearCanvasFactory)))),this.eraseChunkFactory=new ChunkFactories_1.EraseChunkFactory,this.chunkFactory=new ChunkFactories_1.VoidChunkFactory(new ChunkFactories_1.PathChunkFactory(this.eraseChunkFactory)),this.metadataFactory=new MetadataFactory_1[\"default\"]}return e.prototype.SaveVideo=function(e){var t=document.implementation.createDocumentType(\"svg:svg\",\"-//W3C//DTD SVG 1.1//EN\",\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"),a=document.implementation.createDocument(\"http://www.w3.org/2000/svg\",\"svg\",t);a.documentElement.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns:a\",SVG_1.SVGA.Namespace),SVG_1[\"default\"].SetAttributes(a.rootElement,{width:e.Metadata.Width,height:e.Metadata.Height,viewBox:\"0 0 \"+e.Metadata.Width+\" \"+e.Metadata.Height}),a.rootElement.appendChild(this.metadataFactory.ToSVG(e.Metadata)),this.eraseChunkFactory.Width=e.Metadata.Width,this.eraseChunkFactory.Height=e.Metadata.Height;var r=SVG_1[\"default\"].CreateElement(\"g\");for(SVG_1.SVGA.SetAttributes(r,{type:this.VideoChunksLayerType}),e.Rewind();e.CurrentChunk;)r.appendChild(this.chunkFactory.ToSVG(e.CurrentChunk,this.commandFactory)),e.MoveNextChunk();a.rootElement.appendChild(r);var n=new XMLSerializer;return new Blob([n.serializeToString(a)],{type:\"application/svg+xml\"})},e.prototype.LoadVideo=function(e,t){if(t instanceof Document==!1)throw new Error(\"SVGAnimation IO parsing error: Document must be an XML document\");var a=t;if(2!==a.documentElement.childElementCount)throw new Error(\"SVGAnimation document root element must have exactely two children nodes, but has \"+a.documentElement.childNodes.length+\" instead\");var r=new Video_1[\"default\"],n=a.documentElement.firstElementChild;r.Metadata=this.metadataFactory.FromSVG(n);var o=n.nextElementSibling;if(\"g\"!==o.localName||SVG_1.SVGA.attr(o,\"type\")!==this.VideoChunksLayerType)throw new Error(\"SVGAnimation IO parsing error: chunks layer must be a SVG <g> node with a:type='\"+this.VideoChunksLayerType+\"',\"+(\" got <\"+o.localName+\"> with a:type='\"+SVG_1.SVGA.attr(o,\"type\")+\"'\"));for(var i=0,s=0,h=o.firstElementChild;h;){var u=this.chunkFactory.FromSVG(e,h,this.commandFactory);u.LastErase=i,r.PushChunk(u),u instanceof Chunk_1.EraseChunk&&(i=s),h=h.nextElementSibling,s++}return r.Rewind(),r},e.prototype.GetExtension=function(){return\"svg\"},e.prototype.GetMimeType=function(){return\"application/svg+xml\"},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=IO;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function s(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},Vector_1=__webpack_require__(4),BasicElements_1=__webpack_require__(5),VideoEvents_1=__webpack_require__(1),SVG_1=__webpack_require__(3),Color_1=__webpack_require__(7),Cursor=function(t){function e(e){t.call(this,\"div\"),this.events=e,this.radius=20,this.stroke=3,this.position=new Vector_1[\"default\"](0,0),this.offset=new Vector_1[\"default\"](0,0),this.CreateHTML(),this.scalingFactor=1,this.size=null}return __extends(e,t),Object.defineProperty(e.prototype,\"Offset\",{set:function(t){this.offset=t},enumerable:!0,configurable:!0}),e.prototype.CreateHTML=function(){var t=this;this.svg=SVG_1[\"default\"].CreateElement(\"svg\",{width:2*this.radius,height:2*this.radius}),this.GetHTML().appendChild(this.svg),this.bgColor=Color_1[\"default\"].BackgroundColor,this.color=Color_1[\"default\"].ForegroundColor,this.dot=SVG_1[\"default\"].CreateDot(new Vector_1[\"default\"](this.radius,this.radius),this.radius-this.stroke,this.bgColor.CssValue),SVG_1[\"default\"].SetAttributes(this.dot,{stroke:this.color.CssValue,\"stroke-width\":this.stroke}),this.svg.appendChild(this.dot),this.GetHTML().style.position=\"absolute\",this.GetHTML().style.background=\"transparent\",this.GetHTML().style.lineHeight=\"0\",this.events.on(VideoEvents_1.VideoEventType.ClearCanvas,function(e){t.bgColor=e,SVG_1[\"default\"].SetAttributes(t.dot,{fill:t.bgColor.CssValue}),t.ChangeColor(t.color)})},e.prototype.MoveTo=function(t,e){this.GetHTML().style.left=t*this.scalingFactor-this.radius-this.stroke+this.offset.X+\"px\",this.GetHTML().style.top=e*this.scalingFactor-this.radius-this.stroke+this.offset.Y+\"px\",this.position=new Vector_1[\"default\"](t,e)},e.prototype.ChangeColor=function(t){t.CssValue===this.bgColor.CssValue&&(t=t.CssValue===Color_1[\"default\"].ForegroundColor.CssValue?Color_1[\"default\"].BackgroundColor:Color_1[\"default\"].ForegroundColor),SVG_1[\"default\"].SetAttributes(this.dot,{stroke:t.CssValue}),this.color=t},e.prototype.ChangeSize=function(t){this.size=t;var e=this.radius;this.radius=t.Size*this.scalingFactor/2-2;var s=2*(this.radius+this.stroke);SVG_1[\"default\"].SetAttributes(this.svg,{width:s,height:s});var o=e-this.radius;this.MoveTo(this.position.X+o,this.position.Y+o),SVG_1[\"default\"].SetAttributes(this.dot,{cx:s/2,cy:s/2,r:Math.max(1,this.radius-this.stroke)})},e.prototype.SetScalingFactor=function(t){this.scalingFactor=t,this.size&&this.ChangeSize(this.size)},e}(BasicElements_1.SimpleElement);Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=Cursor;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},SVG_1=__webpack_require__(3),Vector_1=__webpack_require__(4),Chunk_1=__webpack_require__(9),Command_1=__webpack_require__(10),Path_1=__webpack_require__(12),Segments_1=__webpack_require__(14),Color_1=__webpack_require__(7),Spline_1=__webpack_require__(16),TIME_PRECISION=2,ChunkFactory=function(){function t(t){this.next=t}return t.prototype.FromSVG=function(t,e,n){if(this.next)return this.next.FromSVG(t,e,n);throw new Error(\"Chunk loading failed: Unsupported node \"+e.nodeName+\".\")},t.prototype.ToSVG=function(t,e){if(this.next)return this.next.ToSVG(t,e);throw new Error(\"Chunk export failed: Unsupported command \"+typeof t+\".\")},t.prototype.CommandsToSVG=function(t,e,n,r){for(var o=0;o<e.length;o++)t.appendChild(n.ToSVG(e[o],r));return t},t.GetCommands=function(t,e,n){for(var r=this.initCmds.filter(function(t){return null!==t}).map(function(t){return t.Clone()}),o=[];t;){var i=e.FromSVG(t,n);o.push(i),t=t.nextElementSibling,i instanceof Command_1.MoveCursor?this.initCmds[0]=i:i instanceof Command_1.ChangeBrushColor?this.initCmds[1]=i:i instanceof Command_1.ChangeBrushSize&&(this.initCmds[2]=i)}return[r,o]},t.initCmds=[null,null,null],t}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=ChunkFactory;var VoidChunkFactory=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.FromSVG=function(n,r,o){if(SVG_1.SVGA.attr(r,\"type\")===e.NodeName){var i=new Chunk_1.VoidChunk(SVG_1.SVGA.numAttr(r,\"t\"),0);return a=ChunkFactory.GetCommands(r.firstElementChild,o,i.StartTime),i.InitCommands=a[0],i.Commands=a[1],i}return t.prototype.FromSVG.call(this,n,r,o);var a},e.prototype.ToSVG=function(n,r){if(n instanceof Chunk_1.VoidChunk){var o=SVG_1[\"default\"].CreateElement(\"g\");return SVG_1.SVGA.SetAttributes(o,{type:e.NodeName,t:n.StartTime.toFixed(TIME_PRECISION)}),this.CommandsToSVG(o,n.Commands,r,n.StartTime),o}return t.prototype.ToSVG.call(this,n,r)},e.NodeName=\"void\",e}(ChunkFactory);exports.VoidChunkFactory=VoidChunkFactory;var InstructionType;!function(t){t[t.Move=0]=\"Move\",t[t.Line=1]=\"Line\",t[t.Curve=2]=\"Curve\",t[t.Arc=3]=\"Arc\",t[t.Close=4]=\"Close\"}(InstructionType||(InstructionType={}));var InstructionFactory=function(){function t(t,e,n,r){this.letter=t,this.type=e,this.coordsCount=n,this.next=r}return t.prototype.Create=function(t){var e=t.shift();if(e===this.letter){for(var n=[],r=0;r<this.coordsCount;r++)n.push(this.CreateVector2(t.shift()));return{type:this.type,coords:n}}if(this.next)return t.unshift(e),this.next.Create(t);throw new Error(\"Unsupported instruction letter '\"+e+\"'\")},t.prototype.CreateVector2=function(t){var e=t.split(\",\");if(2!==e.length)throw new Error(\"Coordinates pair '\"+t+\"' is not valid\");return new Vector_1[\"default\"](Number(e[0]),Number(e[1]))},t}(),ArcFactory=function(t){function e(e){t.call(this,\"A\",InstructionType.Arc,3,e)}return __extends(e,t),e.prototype.Create=function(t){var e=t.shift();if(e===this.letter){var n=[];return n.push(this.CreateVector2(t.shift())),t.shift(),n.push(this.CreateVector2(t.shift())),n.push(this.CreateVector2(t.shift())),{type:this.type,coords:n}}if(this.next)return t.unshift(e),this.next.Create(t);throw new Error(\"Unsupported instruction letter '\"+e+\"'\")},e}(InstructionFactory),PathChunkFactory=function(t){function e(e){t.call(this,e),this.next=e,this.instructionFactory=new InstructionFactory(\"C\",InstructionType.Curve,3,new InstructionFactory(\"L\",InstructionType.Line,1,new InstructionFactory(\"M\",InstructionType.Move,1,new ArcFactory)))}return __extends(e,t),e.prototype.FromSVG=function(n,r,o){if(SVG_1.SVGA.attr(r,\"type\")===e.NodeName){if(0===r.childElementCount)throw new Error(\"Path chunk no child elements.\");var i=r.firstElementChild;if(\"path\"!==i.localName)throw new Error(\"Path chunk must begin with a <path> element, but \"+i.localName+\" found instead\");var a=new Chunk_1.PathChunk(this.SVGNodeToPath(n,i),SVG_1.SVGA.numAttr(r,\"t\"),0);return s=ChunkFactory.GetCommands(i.nextElementSibling,o,a.StartTime),a.InitCommands=s[0],a.Commands=s[1],a}return t.prototype.FromSVG.call(this,n,r,o);var s},e.prototype.ToSVG=function(n,r){if(n instanceof Chunk_1.PathChunk){var o=SVG_1[\"default\"].CreateElement(\"g\");return SVG_1.SVGA.SetAttributes(o,{type:e.NodeName,t:n.StartTime.toFixed(TIME_PRECISION)}),o.appendChild(this.PathToSVGNode(n.Path)),this.CommandsToSVG(o,n.Commands,r,n.StartTime),o}return t.prototype.ToSVG.call(this,n,r)},e.prototype.SVGNodeToPath=function(t,e){var n=SVG_1[\"default\"].attr(e,\"fill\"),r=new Path_1[\"default\"](t,!0,n),o=SVG_1[\"default\"].attr(e,\"d\");e=null;for(var i=o.split(\" \").filter(function(t){return t.length>0}),a=[];i.length>0;)a.push(this.instructionFactory.Create(i));i=null,o=null;var s=a.length-1;if(!(a.length>=2&&a[0].type===InstructionType.Move&&a[s].type===InstructionType.Arc))throw new Error(\"Only \"+a.length+\" valid instructions recognized in a path string\");if(r.Segments.push(new Segments_1.ZeroLengthSegment(a[s-1].coords[0],a[0].coords[0])),a.pop(),a.pop(),a.shift(),1===a.length){var u=r.Segments[0].Right,h=a[0].coords[2];return r.Segments=[new Segments_1.ZeroLengthSegment(u,h)],r}s=a.length-1;for(var l=r.Segments[0],c=0;c<Math.floor(a.length/2);c++)if(a[c].type===InstructionType.Line){var d=new Segments_1.QuadrilateralSegment(a[c].coords[0],a[s-c].coords[0]);r.Segments.push(d),l instanceof Segments_1.CurvedSegment&&(l.Left=a[s-c].coords[0].clone()),l=d}else{if(a[c].type!==InstructionType.Curve)throw new Error(\"Unsupported path segment type \"+a[c].type+\" \");var m=new Spline_1.BezierCurveSegment(null,a[c].coords[0],a[c].coords[2],a[c].coords[1]),f=new Spline_1.BezierCurveSegment(a[s-c].coords[2],a[s-c].coords[1],null,a[s-c].coords[0]),p=new Segments_1.CurvedSegment(f,m);l&&l instanceof Segments_1.CurvedSegment?(l.Left=p.LeftBezier.Start.clone(),p.RightBezier.Start=l.RightBezier.End.clone()):l&&l instanceof Segments_1.QuadrilateralSegment&&(p.RightBezier.Start=l.Right.clone()),r.Segments.push(p),l=p}return l&&l instanceof Segments_1.CurvedSegment&&(l.Left=a[Math.floor(a.length/2)].coords[2].clone()),r},e.prototype.PathToSVGNode=function(t){for(var e=t.Segments,n=e[0],r=n.Right.pointInBetween(n.Left),o=n.Left.clone().subtract(r),i=n.Right.clone().subtract(r),a=SVG_1[\"default\"].ArcString(n.Right,r.distanceTo(n.Right),Path_1[\"default\"].angle(o)),s=\"\",u=\" \"+a,h=0;h<e.length;h++){var n=e[h];if(n instanceof Segments_1.ZeroLengthSegment)s+=SVG_1[\"default\"].MoveToString(n.Right)+\" \",u=SVG_1[\"default\"].MoveToString(n.Left)+\" \"+u;else if(n instanceof Segments_1.CurvedSegment)s+=SVG_1[\"default\"].CurveToString(n.RightBezier.StartCP,n.RightBezier.EndCP,n.RightBezier.End)+\" \",u=SVG_1[\"default\"].CurveToString(n.LeftBezier.EndCP,n.LeftBezier.StartCP,n.LeftBezier.Start)+\" \"+u;else{if(!(n instanceof Segments_1.QuadrilateralSegment))throw new Error(\"Unsupported segment type \"+typeof n);s+=SVG_1[\"default\"].LineToString(n.Right)+\" \",u=SVG_1[\"default\"].LineToString(n.Left)+\" \"+u}}n=e[e.length-1],r=n.Right.pointInBetween(n.Left),o=n.Right.clone().subtract(r),i=n.Left.clone().subtract(r);var l=SVG_1[\"default\"].ArcString(n.Left,r.distanceTo(n.Left),Path_1[\"default\"].angle(o))+\" \";return SVG_1[\"default\"].CreateElement(\"path\",{fill:t.Color,d:s+l+u})},e.NodeName=\"path\",e}(ChunkFactory);exports.PathChunkFactory=PathChunkFactory;var EraseChunkFactory=function(t){function e(){t.apply(this,arguments),this.Width=0,this.Height=0}return __extends(e,t),e.prototype.FromSVG=function(n,r,o){if(SVG_1.SVGA.attr(r,\"type\")===e.NodeName){if(0===r.childElementCount)throw new Error(\"Erase chunk no child elements.\");var i=r.firstElementChild;if(\"rect\"!==i.localName)throw new Error(\"Erase chunk must begin with a <rect> element, but \"+i.localName+\" found instead\");var a=new Chunk_1.EraseChunk(new Color_1[\"default\"](SVG_1[\"default\"].attr(i,\"fill\")),SVG_1.SVGA.numAttr(r,\"t\"),0);return s=ChunkFactory.GetCommands(i.nextElementSibling,o,a.StartTime),a.InitCommands=s[0],a.Commands=s[1],a}return t.prototype.FromSVG.call(this,n,r,o);var s},e.prototype.ToSVG=function(n,r){if(n instanceof Chunk_1.EraseChunk){var o=SVG_1[\"default\"].CreateElement(\"g\");return SVG_1.SVGA.SetAttributes(o,{type:e.NodeName,t:n.StartTime.toFixed(TIME_PRECISION)}),o.appendChild(SVG_1[\"default\"].CreateElement(\"rect\",{fill:n.Color.CssValue,width:this.Width,height:this.Height})),this.CommandsToSVG(o,n.Commands,r,n.StartTime),o}return t.prototype.ToSVG.call(this,n,r)},e.NodeName=\"erase\",e}(ChunkFactory);exports.EraseChunkFactory=EraseChunkFactory;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var __extends=function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Command_1=__webpack_require__(10),SVG_1=__webpack_require__(3),HelperFunctions_1=__webpack_require__(6),Color_1=__webpack_require__(7),Brush_1=__webpack_require__(20),TIME_PRECISION=2,COORDS_PRECISION=3,PRESSURE_PRECISION=4,CommandFactory=function(){function e(e){this.next=e}return e.prototype.FromSVG=function(e,t){if(this.next)return this.next.FromSVG(e,t);throw new Error(\"Command loading failed: Unsupported node \"+e.nodeName+\".\")},e.prototype.getCmdTime=function(e,t){return SVG_1.SVGA.numAttr(e,\"t\",0)+t},e.prototype.ToSVG=function(e,t){if(this.next)return this.next.ToSVG(e,t);throw new Error(\"Command export failed: Unsupported command \"+typeof e+\".\")},e.prototype.storeTime=function(e,t){t>0&&SVG_1.SVGA.SetAttributes(e,{t:HelperFunctions_1.precise(t,TIME_PRECISION)})},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=CommandFactory;var MoveCursorFactory=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.FromSVG=function(o,r){return o.localName===t.NodeName?new Command_1.MoveCursor(SVG_1.SVGA.numAttr(o,\"x\"),SVG_1.SVGA.numAttr(o,\"y\"),SVG_1.SVGA.numAttr(o,\"p\",0),e.prototype.getCmdTime.call(this,o,r)):e.prototype.FromSVG.call(this,o,r)},t.prototype.ToSVG=function(o,r){if(o instanceof Command_1.MoveCursor){var n={x:HelperFunctions_1.precise(o.X),y:HelperFunctions_1.precise(o.Y)};o.P>0&&(n.p=HelperFunctions_1.precise(o.P,PRESSURE_PRECISION));var a=SVG_1.SVGA.CreateElement(t.NodeName,n);return e.prototype.storeTime.call(this,a,o.Time-r),a}return e.prototype.ToSVG.call(this,o,r)},t.NodeName=\"m\",t}(CommandFactory);exports.MoveCursorFactory=MoveCursorFactory;var DrawSegmentFactory=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.FromSVG=function(o,r){return o.localName===t.NodeName?new Command_1.DrawNextSegment(e.prototype.getCmdTime.call(this,o,r)):e.prototype.FromSVG.call(this,o,r)},t.prototype.ToSVG=function(o,r){if(o instanceof Command_1.DrawNextSegment){var n=SVG_1.SVGA.CreateElement(t.NodeName);return e.prototype.storeTime.call(this,n,o.Time-r),n}return e.prototype.ToSVG.call(this,o,r)},t.NodeName=\"d\",t}(CommandFactory);exports.DrawSegmentFactory=DrawSegmentFactory;var ChangeBrushColorFactory=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.FromSVG=function(o,r){return o.localName===t.NodeName?new Command_1.ChangeBrushColor(new Color_1[\"default\"](SVG_1.SVGA.attr(o,\"c\")),e.prototype.getCmdTime.call(this,o,r)):e.prototype.FromSVG.call(this,o,r)},t.prototype.ToSVG=function(o,r){if(o instanceof Command_1.ChangeBrushColor){var n=SVG_1.SVGA.CreateElement(t.NodeName,{c:o.Color.CssValue});return e.prototype.storeTime.call(this,n,o.Time-r),n}return e.prototype.ToSVG.call(this,o,r)},t.NodeName=\"c\",t}(CommandFactory);exports.ChangeBrushColorFactory=ChangeBrushColorFactory;var ChangeBrushSizeFactory=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.FromSVG=function(o,r){return o.localName===t.NodeName?new Command_1.ChangeBrushSize(new Brush_1[\"default\"](SVG_1.SVGA.numAttr(o,\"w\")),e.prototype.getCmdTime.call(this,o,r)):e.prototype.FromSVG.call(this,o,r)},t.prototype.ToSVG=function(o,r){if(o instanceof Command_1.ChangeBrushSize){var n=SVG_1.SVGA.CreateElement(t.NodeName,{w:o.Size.Size});return e.prototype.storeTime.call(this,n,o.Time-r),n}return e.prototype.ToSVG.call(this,o,r)},t.NodeName=\"s\",t}(CommandFactory);exports.ChangeBrushSizeFactory=ChangeBrushSizeFactory;var ClearCanvasFactory=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.FromSVG=function(o,r){return o.localName===t.NodeName?new Command_1.ClearCanvas(new Color_1[\"default\"](SVG_1.SVGA.attr(o,\"c\")),e.prototype.getCmdTime.call(this,o,r)):e.prototype.FromSVG.call(this,o,r)},t.prototype.ToSVG=function(o,r){if(o instanceof Command_1.ClearCanvas){var n=SVG_1.SVGA.CreateElement(t.NodeName,{c:o.Color.CssValue});return e.prototype.storeTime.call(this,n,o.Time-r),n}return e.prototype.ToSVG.call(this,o,r)},t.NodeName=\"e\",t}(CommandFactory);exports.ClearCanvasFactory=ClearCanvasFactory;\n\t//# sourceMappingURL=out.map.js\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";var Metadata_1=__webpack_require__(21),SVG_1=__webpack_require__(3),AudioPlayer_1=__webpack_require__(11),MetadataFactory=function(){function e(){}return e.prototype.FromSVG=function(e){var t=new Metadata_1[\"default\"];if(\"metadata\"!==e.localName)throw new Error(\"MetadataFactory error parsing SVG: Wrong metadata element \"+e.localName);var r=e.firstElementChild;if(\"length\"!==r.localName)throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\"+r.nodeName+\"'\");t.Length=Number(r.textContent);var a=r.nextElementSibling;if(r=null,\"width\"!==a.localName)throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\"+a.nodeName+\"'\");t.Width=Number(a.textContent);var n=a.nextElementSibling;if(a=null,\"height\"!==n.localName)throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\"+n.nodeName+\"'\");t.Height=Number(n.textContent),t.AudioTracks=[];for(var o=n.nextElementSibling,l=o.firstElementChild;l;){var i=AudioPlayer_1.AudioSource.StringToType(SVG_1.SVGA.attr(l,\"type\"));t.AudioTracks.push(new AudioPlayer_1.AudioSource(SVG_1.SVGA.attr(l,\"src\"),i)),l=l.nextElementSibling}return t},e.prototype.ToSVG=function(e){var t=SVG_1[\"default\"].CreateElement(\"metadata\"),r=SVG_1.SVGA.CreateElement(\"length\");r.textContent=e.Length.toFixed(3),t.appendChild(r),r=null;var a=SVG_1.SVGA.CreateElement(\"width\");a.textContent=e.Width.toFixed(0),t.appendChild(a),a=null;var n=SVG_1.SVGA.CreateElement(\"height\");n.textContent=e.Height.toFixed(0),t.appendChild(n),n=null;for(var o=SVG_1.SVGA.CreateElement(\"audio\"),l=0;l<e.AudioTracks.length;l++){var i=e.AudioTracks[l],d=SVG_1.SVGA.CreateElement(\"source\",{type:i.MimeType,src:i.Url});o.appendChild(d),d=null}return t.appendChild(o),t},e}();Object.defineProperty(exports,\"__esModule\",{value:!0}),exports[\"default\"]=MetadataFactory;\n\t//# sourceMappingURL=out.map.js\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** common.js\n **/"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId])\n \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n \t\twhile(callbacks.length)\n \t\t\tcallbacks.shift().call(null, __webpack_require__);\n \t\tif(moreModules[0]) {\n \t\t\tinstalledModules[0] = 0;\n \t\t\treturn __webpack_require__(0);\n \t\t}\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// \"0\" means \"already loaded\"\n \t// Array means \"loading\", array contains callbacks\n \tvar installedChunks = {\n \t\t0:0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] === 0)\n \t\t\treturn callback.call(null, __webpack_require__);\n\n \t\t// an array means \"currently loading\".\n \t\tif(installedChunks[chunkId] !== undefined) {\n \t\t\tinstalledChunks[chunkId].push(callback);\n \t\t} else {\n \t\t\t// start chunk loading\n \t\t\tinstalledChunks[chunkId] = [callback];\n \t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\tvar script = document.createElement('script');\n \t\t\tscript.type = 'text/javascript';\n \t\t\tscript.charset = 'utf-8';\n \t\t\tscript.async = true;\n\n \t\t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + ({\"1\":\"recorder\",\"2\":\"player\"}[chunkId]||chunkId) + \".js\";\n \t\t\thead.appendChild(script);\n \t\t}\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 56dd51c725712315ca2b\n **/","/**\n * Event Aggregator object.\n * @author Šimon Rozsíval\n */\n\"use strict\";\n\n(function (VideoEventType) {\n    VideoEventType[VideoEventType[\"Start\"] = 0] = \"Start\";\n    VideoEventType[VideoEventType[\"Pause\"] = 1] = \"Pause\";\n    VideoEventType[VideoEventType[\"ReachEnd\"] = 2] = \"ReachEnd\";\n    VideoEventType[VideoEventType[\"JumpTo\"] = 3] = \"JumpTo\";\n    VideoEventType[VideoEventType[\"VideoInfoLoaded\"] = 4] = \"VideoInfoLoaded\";\n    VideoEventType[VideoEventType[\"BufferStatus\"] = 5] = \"BufferStatus\";\n    VideoEventType[VideoEventType[\"CursorState\"] = 6] = \"CursorState\";\n    VideoEventType[VideoEventType[\"ChangeColor\"] = 7] = \"ChangeColor\";\n    VideoEventType[VideoEventType[\"ChangeBrushSize\"] = 8] = \"ChangeBrushSize\";\n    VideoEventType[VideoEventType[\"StartPath\"] = 9] = \"StartPath\";\n    VideoEventType[VideoEventType[\"DrawSegment\"] = 10] = \"DrawSegment\";\n    VideoEventType[VideoEventType[\"DrawPath\"] = 11] = \"DrawPath\";\n    VideoEventType[VideoEventType[\"ClearCanvas\"] = 12] = \"ClearCanvas\";\n    VideoEventType[VideoEventType[\"RedrawCanvas\"] = 13] = \"RedrawCanvas\";\n    VideoEventType[VideoEventType[\"CanvasSize\"] = 14] = \"CanvasSize\";\n    VideoEventType[VideoEventType[\"CanvasScalingFactor\"] = 15] = \"CanvasScalingFactor\";\n    VideoEventType[VideoEventType[\"CursorOffset\"] = 16] = \"CursorOffset\";\n    VideoEventType[VideoEventType[\"RegisterRecordingTool\"] = 17] = \"RegisterRecordingTool\";\n    VideoEventType[VideoEventType[\"RecordingToolFinished\"] = 18] = \"RecordingToolFinished\";\n    VideoEventType[VideoEventType[\"MuteAudioRecording\"] = 19] = \"MuteAudioRecording\";\n    VideoEventType[VideoEventType[\"AudioRecordingAvailable\"] = 20] = \"AudioRecordingAvailable\";\n    VideoEventType[VideoEventType[\"AudioRecordingUnavailable\"] = 21] = \"AudioRecordingUnavailable\";\n    VideoEventType[VideoEventType[\"StartUpload\"] = 22] = \"StartUpload\";\n    VideoEventType[VideoEventType[\"DownloadData\"] = 23] = \"DownloadData\";\n    VideoEventType[VideoEventType[\"VolumeUp\"] = 24] = \"VolumeUp\";\n    VideoEventType[VideoEventType[\"VolumeDown\"] = 25] = \"VolumeDown\";\n    VideoEventType[VideoEventType[\"Mute\"] = 26] = \"Mute\";\n    VideoEventType[VideoEventType[\"Busy\"] = 27] = \"Busy\";\n    VideoEventType[VideoEventType[\"Ready\"] = 28] = \"Ready\";\n    VideoEventType[VideoEventType[\"length\"] = 29] = \"length\";\n})(exports.VideoEventType || (exports.VideoEventType = {}));\nvar VideoEventType = exports.VideoEventType;\nvar VideoEvent = (function () {\n    function VideoEvent(type) {\n        this.type = type;\n        this.listeners = new Array(0);\n    }\n    Object.defineProperty(VideoEvent.prototype, \"Type\", {\n        get: function get() {\n            return this.type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    VideoEvent.prototype.on = function (command) {\n        this.listeners.push(command);\n    };\n    VideoEvent.prototype.off = function (command) {\n        var index = this.listeners.indexOf(command);\n        if (index >= 0) {\n            this.listeners.splice(index, 1);\n        }\n    };\n    VideoEvent.prototype.trigger = function (args) {\n        for (var i = 0; i < this.listeners.length; i++) {\n            var cmd = this.listeners[i];\n            cmd.apply(this, args);\n        }\n    };\n    return VideoEvent;\n})();\nvar VideoEvents = (function () {\n    function VideoEvents() {\n        this.events = new Array(VideoEventType.length);\n    }\n    VideoEvents.prototype.on = function (type, command) {\n        if (!this.events[type]) {\n            this.events[type] = new VideoEvent(type);\n        }\n        this.events[type].on(command);\n    };\n    VideoEvents.prototype.off = function (type, command) {\n        if (!!this.events[type]) {\n            this.events[type].off(command);\n        }\n    };\n    VideoEvents.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var e = this.events[type];\n        if (!!e) {\n            e.trigger(args);\n        }\n    };\n    return VideoEvents;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = VideoEvents;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/VideoEvents.ts\n **/","/// <references path=\"../VectorScreencast\" />\n\"use strict\";\n\nvar HTML = (function () {\n    function HTML() {}\n    HTML.CreateElement = function (name, attributes, children) {\n        var el = document.createElement(name);\n        if (!!attributes) {\n            HTML.SetAttributes(el, attributes);\n        }\n        if (!!children && Array.isArray(children)) {\n            for (var i in children) {\n                el.appendChild(children[i]);\n            }\n        }\n        return el;\n    };\n    HTML.SetAttributes = function (el, attributes) {\n        for (var attr in attributes) {\n            el.setAttribute(attr, attributes[attr]);\n        }\n    };\n    return HTML;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = HTML;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/HTML.ts\n **/","\"use strict\";\n\nvar HelperFunctions_1 = require('./HelperFunctions');\nvar SVG = (function () {\n    function SVG() {}\n    Object.defineProperty(SVG, \"Namespace\", {\n        get: function get() {\n            return this.namespace;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SVG.CreateDot = function (center, radius, color) {\n        return this.CreateElement(\"circle\", {\n            cx: HelperFunctions_1.precise(center.X),\n            cy: HelperFunctions_1.precise(center.Y),\n            r: HelperFunctions_1.precise(radius),\n            fill: color,\n            stroke: \"transparent\"\n        });\n    };\n    SVG.CreateCircle = function (center, radius, color) {\n        if (radius > 0) {\n            return this.CreateElement(\"circle\", {\n                cx: HelperFunctions_1.precise(center.X),\n                cy: HelperFunctions_1.precise(center.Y),\n                r: HelperFunctions_1.precise(radius),\n                stroke: color,\n                fill: \"transparent\",\n                \"stroke-width\": 1\n            });\n        }\n        return null;\n    };\n    SVG.CreateLine = function (start, end, width, color) {\n        if (width > 0) {\n            return this.CreateElement(\"path\", {\n                fill: \"transparent\",\n                stroke: color,\n                \"stroke-width\": HelperFunctions_1.precise(width),\n                d: this.MoveToString(start) + \" \" + this.LineToString(end)\n            });\n        }\n        return null;\n    };\n    SVG.CreateElement = function (name, attributes) {\n        var el = document.createElementNS(this.namespace, name);\n        if (!!attributes) {\n            this.SetAttributes(el, attributes);\n        }\n        return el;\n    };\n    SVG.SetAttributes = function (el, attributes) {\n        if (!el) {\n            console.log(attributes);\n        }\n        for (var attr in attributes) {\n            el.setAttributeNS(null, attr, attributes[attr]);\n        }\n    };\n    SVG.MoveToString = function (a) {\n        return \"M \" + HelperFunctions_1.precise(a.X) + \",\" + HelperFunctions_1.precise(a.Y);\n    };\n    SVG.LineToString = function (a) {\n        return \"L \" + HelperFunctions_1.precise(a.X) + \",\" + HelperFunctions_1.precise(a.Y);\n    };\n    SVG.CurveToString = function (a, b, c) {\n        return \"C \" + HelperFunctions_1.precise(a.X) + \",\" + HelperFunctions_1.precise(a.Y) + \" \" + HelperFunctions_1.precise(b.X) + \",\" + HelperFunctions_1.precise(b.Y) + \" \" + HelperFunctions_1.precise(c.X) + \",\" + HelperFunctions_1.precise(c.Y);\n    };\n    SVG.ArcString = function (end, radius, startAngle) {\n        return \"A \" + HelperFunctions_1.precise(radius) + \",\" + HelperFunctions_1.precise(radius) + \" \" + startAngle + \" 0,0 \" + HelperFunctions_1.precise(end.X) + \",\" + HelperFunctions_1.precise(end.Y);\n    };\n    SVG.attr = function (node, name) {\n        var attr = node.attributes.getNamedItemNS(null, name);\n        if (!!attr) {\n            return attr.textContent;\n        }\n        throw new Error(\"Attribute \" + name + \" is missing in \" + node.localName);\n    };\n    SVG.numAttr = function (node, name) {\n        return Number(node.attributes.getNamedItemNS(null, name).textContent);\n    };\n    SVG.namespace = \"http://www.w3.org/2000/svg\";\n    return SVG;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = SVG;\nvar SVGA = (function () {\n    function SVGA() {}\n    Object.defineProperty(SVGA, \"Namespace\", {\n        get: function get() {\n            return this.namespace;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SVGA.CreateElement = function (name, attributes) {\n        var el = document.createElementNS(this.namespace, \"a:\" + name);\n        if (!!attributes) {\n            this.SetAttributes(el, attributes);\n        }\n        return el;\n    };\n    SVGA.SetAttributes = function (el, attributes) {\n        if (!el) {\n            console.log(attributes);\n        }\n        for (var attr in attributes) {\n            var a = document.createAttributeNS(this.namespace, \"a:\" + attr);\n            a.textContent = attributes[attr];\n            el.attributes.setNamedItemNS(a);\n        }\n    };\n    SVGA.attr = function (node, name, defaultValue) {\n        var attr = node.attributes.getNamedItemNS(this.Namespace, name);\n        if (!!attr) {\n            return attr.textContent;\n        }\n        if (!!defaultValue) {\n            return defaultValue;\n        }\n        throw new Error(\"Attribute \" + name + \" is missing in \" + node.localName);\n    };\n    SVGA.numAttr = function (node, name, defaultValue) {\n        return Number(SVGA.attr(node, name, defaultValue !== undefined ? defaultValue.toString() : undefined));\n    };\n    SVGA.namespace = \"http://www.rozsival.com/2015/vector-screencast\";\n    return SVGA;\n})();\nexports.SVGA = SVGA;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/SVG.ts\n **/","\"use strict\";\n\nvar Vector2 = (function () {\n    function Vector2(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    Object.defineProperty(Vector2.prototype, \"X\", {\n        get: function get() {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector2.prototype, \"Y\", {\n        get: function get() {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Vector2.prototype.isEqualTo = function (b) {\n        return this.X === b.X && this.Y === b.Y;\n    };\n    Vector2.prototype.getSize = function () {\n        return Math.sqrt(this.getSizeSq());\n    };\n    ;\n    Vector2.prototype.getSizeSq = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Vector2.prototype.distanceTo = function (b) {\n        var dx = this.x - b.X;\n        var dy = this.y - b.Y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    ;\n    Vector2.prototype.normalize = function () {\n        var size = this.getSize();\n        if (size === 0) {\n            throw new Error(\"Can't normalize zero vector.\");\n        }\n        this.scale(1 / size);\n        return this;\n    };\n    ;\n    Vector2.prototype.getNormal = function () {\n        return new Vector2(-this.y, this.x).normalize();\n    };\n    ;\n    Vector2.prototype.add = function (b) {\n        this.x += b.X;\n        this.y += b.Y;\n        return this;\n    };\n    ;\n    Vector2.prototype.subtract = function (b) {\n        this.x -= b.X;\n        this.y -= b.Y;\n        return this;\n    };\n    ;\n    Vector2.prototype.scale = function (c) {\n        this.x *= c;\n        this.y *= c;\n        return this;\n    };\n    ;\n    Vector2.prototype.pointInBetween = function (b) {\n        return new Vector2((this.x + b.X) / 2, (this.y + b.Y) / 2);\n    };\n    Vector2.prototype.clone = function () {\n        return new Vector2(this.x, this.y);\n    };\n    ;\n    return Vector2;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Vector2;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/Vector.ts\n **/","/// <reference path=\"../Helpers/HTML\" />\n\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar HTML_1 = require('../Helpers/HTML');\nvar SimpleElement = (function () {\n    function SimpleElement(tag, content) {\n        if (tag instanceof HTMLElement) {\n            this.element = tag;\n        } else {\n            this.element = HTML_1[\"default\"].CreateElement(tag);\n        }\n        if (!!content) {\n            this.element.textContent = content;\n        }\n    }\n    SimpleElement.prototype.GetHTML = function () {\n        return this.element;\n    };\n    SimpleElement.prototype.HasClass = function (className) {\n        return this.GetHTML().classList.contains(className);\n    };\n    SimpleElement.prototype.AddClass = function (className) {\n        return this.AddClasses(className);\n    };\n    SimpleElement.prototype.AddClasses = function () {\n        var classes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            classes[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < classes.length; i++) {\n            this.GetHTML().classList.add(classes[i]);\n        }\n        return this;\n    };\n    SimpleElement.prototype.RemoveClass = function (className) {\n        return this.RemoveClasses(className);\n    };\n    SimpleElement.prototype.RemoveClasses = function () {\n        var classes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            classes[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < classes.length; i++) {\n            this.GetHTML().classList.remove(classes[i]);\n        }\n        return this;\n    };\n    return SimpleElement;\n})();\nexports.SimpleElement = SimpleElement;\nvar Button = (function (_super) {\n    __extends(Button, _super);\n    function Button(text, onClick) {\n        _super.call(this, \"button\");\n        this.AddClass(\"ui-button\");\n        this.content = new SimpleElement(\"span\", text);\n        this.GetHTML().appendChild(this.content.GetHTML());\n        if (!!onClick) {\n            this.GetHTML().onclick = onClick;\n        }\n    }\n    Button.prototype.ChangeContent = function (content) {\n        this.content.GetHTML().innerHTML = content;\n        return this;\n    };\n    return Button;\n})(SimpleElement);\nexports.Button = Button;\nvar IconButton = (function (_super) {\n    __extends(IconButton, _super);\n    function IconButton(iconClass, content, onClick) {\n        _super.call(this, content, onClick);\n        this.iconClass = iconClass;\n        this.icon = new SimpleElement(\"span\", \"\").AddClasses(\"icon\", iconClass);\n        this.AddClass(\"has-icon\");\n        this.GetHTML().appendChild(this.icon.GetHTML());\n    }\n    IconButton.prototype.ChangeIcon = function (iconClass) {\n        this.icon.RemoveClass(this.iconClass).AddClass(iconClass);\n        this.iconClass = iconClass;\n        return this;\n    };\n    return IconButton;\n})(Button);\nexports.IconButton = IconButton;\nvar IconOnlyButton = (function (_super) {\n    __extends(IconOnlyButton, _super);\n    function IconOnlyButton(iconClass, title, onClick) {\n        _super.call(this, iconClass, \"\", onClick);\n        this.ChangeContent(title);\n        this.AddClass(\"icon-only-button\");\n    }\n    IconOnlyButton.prototype.ChangeContent = function (content) {\n        HTML_1[\"default\"].SetAttributes(this.GetHTML(), { title: content });\n        return this;\n    };\n    return IconOnlyButton;\n})(IconButton);\nexports.IconOnlyButton = IconOnlyButton;\nvar Heading = (function (_super) {\n    __extends(Heading, _super);\n    function Heading(level, text) {\n        _super.call(this, \"h\" + level, text);\n    }\n    return Heading;\n})(SimpleElement);\nexports.Heading = Heading;\nvar H2 = (function (_super) {\n    __extends(H2, _super);\n    function H2(text) {\n        _super.call(this, 2, text);\n    }\n    return H2;\n})(Heading);\nexports.H2 = H2;\nvar Panel = (function () {\n    function Panel(tag, id) {\n        this.element = HTML_1[\"default\"].CreateElement(tag);\n        if (!!id) {\n            HTML_1[\"default\"].SetAttributes(this.element, { id: id });\n        }\n        this.elements = [];\n    }\n    Object.defineProperty(Panel.prototype, \"Children\", {\n        get: function get() {\n            return this.elements;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Panel.prototype.AddChild = function (el) {\n        return this.AddChildren(el);\n    };\n    Panel.prototype.AddChildren = function () {\n        var elements = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            elements[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < elements.length; i++) {\n            this.elements.push(elements[i]);\n            this.GetHTML().appendChild(elements[i].GetHTML());\n        }\n        return this;\n    };\n    Panel.prototype.GetHTML = function () {\n        return this.element;\n    };\n    Panel.prototype.HasClass = function (className) {\n        return this.GetHTML().classList.contains(className);\n    };\n    Panel.prototype.AddClass = function (className) {\n        return this.AddClasses(className);\n    };\n    Panel.prototype.AddClasses = function () {\n        var classes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            classes[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < classes.length; i++) {\n            this.GetHTML().classList.add(classes[i]);\n        }\n        return this;\n    };\n    Panel.prototype.RemoveClass = function (className) {\n        return this.RemoveClasses(className);\n    };\n    Panel.prototype.RemoveClasses = function () {\n        var classes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            classes[_i - 0] = arguments[_i];\n        }\n        for (var i = 0; i < classes.length; i++) {\n            this.GetHTML().classList.remove(classes[i]);\n        }\n        return this;\n    };\n    return Panel;\n})();\nexports.Panel = Panel;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/BasicElements.ts\n **/","//namespace VectorScreencast.Helpers {\n\"use strict\";\n\nvar COORDS_PRECISION = 3;\nfunction maxDecPlaces(n, precision) {\n    if (precision === void 0) {\n        precision = COORDS_PRECISION;\n    }\n    return Number(n.toFixed(precision));\n}\nexports.maxDecPlaces = maxDecPlaces;\nfunction precise(n, precision) {\n    if (precision === void 0) {\n        precision = COORDS_PRECISION;\n    }\n    return maxDecPlaces(n, precision).toString();\n}\nexports.precise = precise;\nfunction secondsToString(s) {\n    var time;\n    var minutes = Math.floor(s / 60);\n    time = minutes + \":\";\n    var seconds = Math.floor(s % 60);\n    if (seconds <= 9) {\n        time += \"0\" + seconds.toString(10);\n    } else {\n        time += seconds.toString(10);\n    }\n    return time;\n}\nexports.secondsToString = secondsToString;\n;\nfunction millisecondsToString(ms) {\n    return secondsToString(Math.floor(ms / 1000));\n}\nexports.millisecondsToString = millisecondsToString;\n;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/HelperFunctions.ts\n **/","//namespace VectorScreencast.UI {\n\"use strict\";\n\nvar Color = (function () {\n    function Color(cssValue) {\n        this.cssValue = cssValue;\n    }\n    Object.defineProperty(Color.prototype, \"CssValue\", {\n        get: function get() {\n            return this.cssValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Color, \"BackgroundColor\", {\n        get: function get() {\n            return new Color(this.backgroundPrototype.CssValue);\n        },\n        set: function set(c) {\n            this.backgroundPrototype = c;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Color, \"ForegroundColor\", {\n        get: function get() {\n            return new Color(this.foregroundPrototype.CssValue);\n        },\n        set: function set(c) {\n            this.foregroundPrototype = c;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Color.backgroundPrototype = new Color(\"#111\");\n    Color.foregroundPrototype = new Color(\"#fff\");\n    return Color;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Color;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/Color.ts\n **/","//namespace VectorScreencast.Helpers {\n\"use strict\";\n\n(function (ErrorType) {\n    ErrorType[ErrorType[\"Warning\"] = 0] = \"Warning\";\n    ErrorType[ErrorType[\"Fatal\"] = 1] = \"Fatal\";\n})(exports.ErrorType || (exports.ErrorType = {}));\nvar ErrorType = exports.ErrorType;\nvar Errors = (function () {\n    function Errors() {}\n    Errors.TurnOn = function () {\n        this.doLog = true;\n    };\n    Errors.TurnOff = function () {\n        this.doLog = false;\n    };\n    Errors.SetLogFunction = function (f) {\n        this.LogFunction = f;\n    };\n    Errors.Report = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (this.doLog) {\n            this.LogFunction(type, args);\n        }\n    };\n    Errors.ErrorTypeName = function (e) {\n        switch (e) {\n            case ErrorType.Warning:\n                return \"Warning\";\n            case ErrorType.Fatal:\n                return \"Fatal error\";\n            default:\n                return \"Unknown error type\";\n        }\n    };\n    Errors.doLog = true;\n    Errors.LogFunction = function (type, args) {\n        if (type === ErrorType.Fatal) {\n            throw new Error(\"Fatal Error: \" + args.join(\"; \"));\n        } else {\n            console.log(Errors.ErrorTypeName(type), args);\n        }\n    };\n    return Errors;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Errors;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/Errors.ts\n **/","\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Chunk = (function () {\n    function Chunk(time, lastErase) {\n        this.time = time;\n        this.lastErase = lastErase;\n        this.initCommands = [];\n        this.commands = [];\n        this.cmdIterator = 0;\n    }\n    Object.defineProperty(Chunk.prototype, \"StartTime\", {\n        get: function get() {\n            return this.time;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chunk.prototype, \"LastErase\", {\n        get: function get() {\n            return this.lastErase;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chunk.prototype, \"CurrentCommand\", {\n        get: function get() {\n            return this.commands[this.cmdIterator];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chunk.prototype.PeekNextCommand = function () {\n        return this.commands[this.cmdIterator + 1];\n    };\n    Chunk.prototype.MoveNextCommand = function () {\n        this.cmdIterator++;\n    };\n    Chunk.prototype.Rewind = function () {\n        this.cmdIterator = 0;\n    };\n    Chunk.prototype.ExecuteInitCommands = function (events) {\n        for (var i = 0; i < this.initCommands.length; i++) {\n            this.initCommands[i].Execute(events);\n        }\n    };\n    Chunk.prototype.GetCommand = function (i) {\n        return i < this.commands.length ? this.commands[i] : null;\n    };\n    Chunk.prototype.PushCommand = function (cmd) {\n        this.commands.push(cmd);\n    };\n    Object.defineProperty(Chunk.prototype, \"Commands\", {\n        get: function get() {\n            return this.commands;\n        },\n        set: function set(value) {\n            this.commands = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chunk.prototype, \"InitCommands\", {\n        get: function get() {\n            return this.initCommands;\n        },\n        set: function set(initCmds) {\n            this.initCommands = initCmds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chunk.prototype.Render = function (events) {\n        throw new Error(\"Not implemented\");\n    };\n    return Chunk;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Chunk;\nvar VoidChunk = (function (_super) {\n    __extends(VoidChunk, _super);\n    function VoidChunk() {\n        _super.apply(this, arguments);\n    }\n    VoidChunk.prototype.Render = function () {};\n    return VoidChunk;\n})(Chunk);\nexports.VoidChunk = VoidChunk;\nvar PathChunk = (function (_super) {\n    __extends(PathChunk, _super);\n    function PathChunk(path, time, lastErase) {\n        _super.call(this, time, lastErase);\n        this.path = path;\n    }\n    Object.defineProperty(PathChunk.prototype, \"Path\", {\n        get: function get() {\n            return this.path;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PathChunk.prototype.Render = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.DrawPath);\n    };\n    return PathChunk;\n})(Chunk);\nexports.PathChunk = PathChunk;\nvar EraseChunk = (function (_super) {\n    __extends(EraseChunk, _super);\n    function EraseChunk(color, time, lastErase) {\n        _super.call(this, time, lastErase);\n        this.color = color;\n    }\n    Object.defineProperty(EraseChunk.prototype, \"Color\", {\n        get: function get() {\n            return this.color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EraseChunk.prototype.ExecuteInitCommands = function (events) {\n        this.Render(events);\n        _super.prototype.ExecuteInitCommands.call(this, events);\n    };\n    EraseChunk.prototype.Render = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.ClearCanvas, this.color);\n    };\n    return EraseChunk;\n})(Chunk);\nexports.EraseChunk = EraseChunk;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Chunk.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar State_1 = require('../Helpers/State');\nvar Command = (function () {\n    function Command(time) {\n        this.time = time;\n    }\n    Object.defineProperty(Command.prototype, \"Time\", {\n        get: function get() {\n            return this.time;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Command.prototype.Execute = function (events) {\n        throw new Error(\"Not implemented\");\n    };\n    Command.prototype.Clone = function () {\n        throw new Error(\"Not implemented\");\n    };\n    return Command;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Command;\nvar MoveCursor = (function (_super) {\n    __extends(MoveCursor, _super);\n    function MoveCursor(x, y, p, time) {\n        _super.call(this, time);\n        this.x = x;\n        this.y = y;\n        this.p = p;\n    }\n    Object.defineProperty(MoveCursor.prototype, \"X\", {\n        get: function get() {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MoveCursor.prototype, \"Y\", {\n        get: function get() {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MoveCursor.prototype, \"P\", {\n        get: function get() {\n            return this.p;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MoveCursor.prototype.Execute = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.CursorState, new State_1.CursorState(this.Time, this.x, this.y, this.p));\n    };\n    MoveCursor.prototype.Clone = function () {\n        return new MoveCursor(this.x, this.y, this.p, this.Time);\n    };\n    return MoveCursor;\n})(Command);\nexports.MoveCursor = MoveCursor;\nvar DrawNextSegment = (function (_super) {\n    __extends(DrawNextSegment, _super);\n    function DrawNextSegment() {\n        _super.apply(this, arguments);\n    }\n    DrawNextSegment.prototype.Execute = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.DrawSegment);\n    };\n    DrawNextSegment.prototype.Clone = function () {\n        return new DrawNextSegment(this.Time);\n    };\n    return DrawNextSegment;\n})(Command);\nexports.DrawNextSegment = DrawNextSegment;\nvar ChangeBrushColor = (function (_super) {\n    __extends(ChangeBrushColor, _super);\n    function ChangeBrushColor(color, time) {\n        _super.call(this, time);\n        this.color = color;\n    }\n    Object.defineProperty(ChangeBrushColor.prototype, \"Color\", {\n        get: function get() {\n            return this.color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ChangeBrushColor.prototype.Execute = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.ChangeColor, this.color);\n    };\n    ChangeBrushColor.prototype.Clone = function () {\n        return new ChangeBrushColor(this.color, this.Time);\n    };\n    return ChangeBrushColor;\n})(Command);\nexports.ChangeBrushColor = ChangeBrushColor;\nvar ChangeBrushSize = (function (_super) {\n    __extends(ChangeBrushSize, _super);\n    function ChangeBrushSize(size, time) {\n        _super.call(this, time);\n        this.size = size;\n    }\n    Object.defineProperty(ChangeBrushSize.prototype, \"Size\", {\n        get: function get() {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ChangeBrushSize.prototype.Execute = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.ChangeBrushSize, this.size);\n    };\n    ChangeBrushSize.prototype.Clone = function () {\n        return new ChangeBrushSize(this.size, this.Time);\n    };\n    return ChangeBrushSize;\n})(Command);\nexports.ChangeBrushSize = ChangeBrushSize;\nvar ClearCanvas = (function (_super) {\n    __extends(ClearCanvas, _super);\n    function ClearCanvas(color, time) {\n        _super.call(this, time);\n        this.color = color;\n    }\n    Object.defineProperty(ClearCanvas.prototype, \"Color\", {\n        get: function get() {\n            return this.color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ClearCanvas.prototype.Execute = function (events) {\n        events.trigger(VideoEvents_1.VideoEventType.ClearCanvas, this.color);\n    };\n    ClearCanvas.prototype.Clone = function () {\n        return new ClearCanvas(this.color, this.Time);\n    };\n    return ClearCanvas;\n})(Command);\nexports.ClearCanvas = ClearCanvas;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Command.ts\n **/","/// <reference path=\"audio.d.ts\" />\n/// <reference path=\"../Helpers\" />\n'use strict';\n\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Errors_1 = require('../Helpers/Errors');\nvar HTML_1 = require('../Helpers/HTML');\n(function (AudioSourceType) {\n    AudioSourceType[AudioSourceType[\"MP3\"] = 0] = \"MP3\";\n    AudioSourceType[AudioSourceType[\"OGG\"] = 1] = \"OGG\";\n    AudioSourceType[AudioSourceType[\"WAV\"] = 2] = \"WAV\";\n})(exports.AudioSourceType || (exports.AudioSourceType = {}));\nvar AudioSourceType = exports.AudioSourceType;\nvar AudioSource = (function () {\n    function AudioSource(url, type) {\n        this.url = url;\n        this.type = type;\n    }\n    Object.defineProperty(AudioSource.prototype, \"Url\", {\n        get: function get() {\n            return this.url;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AudioSource.prototype, \"Type\", {\n        get: function get() {\n            return this.type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AudioSource.prototype, \"MimeType\", {\n        get: function get() {\n            switch (this.type) {\n                case AudioSourceType.MP3:\n                    return \"audio/mp3\";\n                case AudioSourceType.OGG:\n                    return \"audio/ogg\";\n                case AudioSourceType.WAV:\n                    return \"audio/wav\";\n                default:\n                    return null;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AudioSource.StringToType = function (type) {\n        switch (type) {\n            case \"audio/mp3\":\n                return AudioSourceType.MP3;\n            case \"audio/wav\":\n                return AudioSourceType.WAV;\n            case \"audio/ogg\":\n                return AudioSourceType.OGG;\n            default:\n                throw new Error(\"Unknown audio type \" + type);\n        }\n    };\n    return AudioSource;\n})();\nexports.AudioSource = AudioSource;\nvar AudioPlayer = (function () {\n    function AudioPlayer(events, sources) {\n        this.events = events;\n        this.audio = this.CreateAudio(sources);\n        if (this.audio === null) {\n            this.isReady = false;\n        } else {\n            this.playing = false;\n            this.reachedEnd = false;\n            this.InitAudio();\n            this.isReady = true;\n            document.documentElement.appendChild(this.audio);\n            console.log(\"Audio is available.\");\n        }\n    }\n    Object.defineProperty(AudioPlayer.prototype, \"IsReady\", {\n        get: function get() {\n            return this.isReady;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AudioPlayer.prototype.CreateAudio = function (sources) {\n        try {\n            var audio = new Audio();\n            if (!audio.canPlayType) {\n                Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"AudioPlayer: browser does not support HTML5 audio\");\n                return null;\n            }\n            var canPlayAtLeastOne = false;\n            for (var i = 0; i < sources.length; i++) {\n                var element = sources[i];\n                if (audio.canPlayType(element.MimeType) === \"probably\") {\n                    var source = HTML_1['default'].CreateElement(\"source\", {\n                        src: element.Url,\n                        type: element.MimeType\n                    });\n                    audio.appendChild(source);\n                    canPlayAtLeastOne = true;\n                }\n            }\n            if (canPlayAtLeastOne === false) {\n                for (var i = 0; i < sources.length; i++) {\n                    var element = sources[i];\n                    if (audio.canPlayType(element.MimeType) === \"maybe\") {\n                        var source = HTML_1['default'].CreateElement(\"source\", {\n                            src: element.Url,\n                            type: element.MimeType\n                        });\n                        audio.appendChild(source);\n                        canPlayAtLeastOne = true;\n                    }\n                }\n            }\n            if (canPlayAtLeastOne === false) {\n                Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"Browser can't play any of available audio sources.\", sources);\n                return null;\n            }\n            return audio;\n        } catch (e) {\n            Errors_1['default'].Report(Errors_1.ErrorType.Warning, \"AudioPlayer: can't create audio element\", e);\n            return null;\n        }\n    };\n    AudioPlayer.prototype.InitAudio = function () {\n        var _this = this;\n        this.audio.onended = function () {\n            return _this.events.trigger(VideoEvents_1.VideoEventType.ReachEnd);\n        };\n        this.audio.onwaiting = function () {\n            return _this.Busy();\n        };\n        this.audio.oncanplay = function () {\n            return _this.Ready();\n        };\n        this.events.on(VideoEvents_1.VideoEventType.Mute, function () {\n            return _this.Mute();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.VolumeUp, function () {\n            return _this.VolumeUp();\n        });\n        this.events.on(VideoEvents_1.VideoEventType.VolumeDown, function () {\n            return _this.VolumeDown();\n        });\n        this.MonitorBufferingAsync();\n    };\n    ;\n    AudioPlayer.prototype.Busy = function () {\n        if (this.playing) {\n            this.triggeredBusyState = true;\n            this.events.trigger(VideoEvents_1.VideoEventType.Pause);\n        }\n    };\n    AudioPlayer.prototype.Ready = function () {\n        if (this.triggeredBusyState) {\n            this.events.trigger(VideoEvents_1.VideoEventType.Ready);\n            this.triggeredBusyState = false;\n        }\n    };\n    AudioPlayer.prototype.Play = function () {\n        if (this.isReady) {\n            if (this.reachedEnd == true) {\n                this.Rewind();\n            }\n            this.audio.play();\n        }\n    };\n    AudioPlayer.prototype.InitiatePlay = function () {\n        this.events.trigger(VideoEvents_1.VideoEventType.Start);\n    };\n    AudioPlayer.prototype.Pause = function () {\n        if (this.isReady) {\n            this.audio.pause();\n        }\n    };\n    AudioPlayer.prototype.ReachedEnd = function () {\n        this.reachedEnd = true;\n        this.Pause();\n    };\n    AudioPlayer.prototype.Replay = function () {\n        this.Rewind();\n        this.Play();\n    };\n    AudioPlayer.prototype.Rewind = function () {\n        if (this.isReady) {\n            this.audio.pause();\n            this.audio.currentTime = 0;\n            this.reachedEnd = false;\n        }\n    };\n    AudioPlayer.prototype.MonitorBufferingAsync = function () {\n        var _this = this;\n        var lastEnd = 0;\n        this.checkPreloaded = setInterval(function () {\n            var end = _this.audio.buffered.end(_this.audio.buffered.length - 1);\n            if (end !== lastEnd) {\n                _this.events.trigger(VideoEvents_1.VideoEventType.BufferStatus, end);\n                lastEnd = end;\n            }\n            if (end === _this.audio.duration) {\n                clearInterval(_this.checkPreloaded);\n            }\n        }, 300);\n    };\n    AudioPlayer.prototype.JumpTo = function (progress) {\n        if (!this.isReady) return;\n        this.reachedEnd = false;\n        var time = this.audio.duration * progress;\n        this.ChangePosition(time);\n        clearInterval(this.checkPreloaded);\n        this.MonitorBufferingAsync();\n    };\n    AudioPlayer.prototype.ChangePosition = function (seconds) {\n        this.audio.currentTime = seconds;\n    };\n    AudioPlayer.prototype.Mute = function () {\n        this.audio.muted = !this.audio.muted;\n    };\n    AudioPlayer.prototype.VolumeUp = function () {\n        this.audio.volume = Math.min(1, this.audio.volume + 0.1);\n    };\n    AudioPlayer.prototype.VolumeDown = function () {\n        this.audio.volume = Math.max(0, this.audio.volume - 0.1);\n    };\n    return AudioPlayer;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = AudioPlayer;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/AudioData/AudioPlayer.ts\n **/","/// <reference path=\"../Helpers/Vector\" />\n/// <reference path=\"../Helpers/SVG\" />\n/// <reference path=\"./Segments\" />\n'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar SVG_1 = require('../Helpers/SVG');\nvar Vector_1 = require('../Helpers/Vector');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar Spline_1 = require('../Helpers/Spline');\nvar Segments_1 = require('./Segments');\nvar Path = (function () {\n    function Path(events, curved, color, wireframe) {\n        this.events = events;\n        this.curved = curved;\n        this.color = color;\n        this.wireframe = wireframe;\n        if (this.wireframe === undefined) {\n            this.wireframe = false;\n        }\n        this.segments = [];\n        this.pathPoints = [];\n    }\n    Object.defineProperty(Path.prototype, \"Segments\", {\n        get: function get() {\n            return this.segments;\n        },\n        set: function set(value) {\n            this.segments = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"LastDrawnSegment\", {\n        get: function get() {\n            return this.lastDrawnSegment;\n        },\n        set: function set(value) {\n            this.lastDrawnSegment = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"LastPoint\", {\n        get: function get() {\n            return this.pathPoints[this.iterator];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"LastButOnePoint\", {\n        get: function get() {\n            return this.pathPoints[Math.max(0, this.iterator - 1)];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"LastButTwoPoint\", {\n        get: function get() {\n            return this.pathPoints[Math.max(0, this.iterator - 2)];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"Color\", {\n        get: function get() {\n            return this.color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Path.prototype.StartPath = function (pt, radius) {\n        this.segments = [new Segments_1.ZeroLengthSegment(pt.clone().add(new Vector_1['default'](0, radius)), pt.clone().add(new Vector_1['default'](0, -radius)))];\n        this.startPosition = pt;\n        this.startRadius = radius;\n        this.iterator = -1;\n        this.DrawStartDot(pt, radius);\n        this.lastDrawnSegment = this.segments[0];\n    };\n    Path.prototype.DrawStartDot = function (pt, radius) {\n        throw new Error(\"Not impelmented\");\n    };\n    Path.prototype.InitPath = function (right, left) {\n        this.segments = [new Segments_1.ZeroLengthSegment(left, right)];\n        this.pathPoints.push({ Left: left, Right: right });\n        this.iterator = 0;\n    };\n    Path.prototype.StartDrawingPath = function (seg) {\n        this.DrawStartDot(seg.Left.pointInBetween(seg.Right), seg.Left.distanceTo(seg.Right) / 2);\n        this.lastDrawnSegment = seg;\n    };\n    Path.prototype.ExtendPath = function (right, left) {\n        var last = this.pathPoints[this.pathPoints.length - 1];\n        if (last.Left.isEqualTo(left) && last.Right.isEqualTo(right)) {\n            return;\n        }\n        var segment = this.CalculateSegment(right, left);\n        this.DrawSegment(segment);\n        this.events.trigger(VideoEvents_1.VideoEventType.DrawSegment, segment);\n        this.segments.push(segment);\n        this.pathPoints.push({ Left: left, Right: right });\n        this.iterator++;\n    };\n    Path.prototype.CalculateSegment = function (right, left) {\n        if (this.curved) {\n            return this.CalculateCurvedSegment(right, left);\n        }\n        return this.CalculateQuarilateralSegment(right, left);\n    };\n    Path.prototype.CalculateCurvedSegment = function (right, left) {\n        var leftBezier = Spline_1.Spline.catmullRomToBezier(this.LastButTwoPoint.Left, this.LastButOnePoint.Left, this.LastPoint.Left, left);\n        var rightBezier = Spline_1.Spline.catmullRomToBezier(this.LastButTwoPoint.Right, this.LastButOnePoint.Right, this.LastPoint.Right, right);\n        var segment = new Segments_1.CurvedSegment(leftBezier, rightBezier);\n        this.DrawCurvedSegment(segment);\n        return segment;\n    };\n    Path.prototype.DrawCurvedSegment = function (segment) {\n        throw new Error(\"Not implemented\");\n    };\n    Path.prototype.CalculateQuarilateralSegment = function (right, left) {\n        return new Segments_1.QuadrilateralSegment(left, right);\n    };\n    Path.prototype.DrawQuadrilateralSegment = function (segment) {\n        throw new Error(\"Not implemented\");\n    };\n    Path.prototype.Draw = function () {};\n    Path.prototype.DrawSegment = function (seg) {\n        if (seg instanceof Segments_1.CurvedSegment) {\n            this.DrawCurvedSegment(seg);\n        } else if (seg instanceof Segments_1.QuadrilateralSegment) {\n            this.DrawQuadrilateralSegment(seg);\n        }\n        this.lastDrawnSegment = seg;\n    };\n    Path.angle = function (vec) {\n        return Math.atan2(-vec.X, vec.Y) - Math.PI / 2;\n    };\n    Path.prototype.DrawWholePath = function () {\n        this.iterator = 0;\n        if (this.segments.length === 0) return;\n        var start = this.segments[0].Left.clone().add(this.segments[0].Right).scale(0.5);\n        var radius = start.distanceTo(this.segments[0].Left);\n        this.DrawStartDot(start, radius);\n        this.lastDrawnSegment = this.segments[0];\n        while (this.iterator < this.segments.length) {\n            this.DrawSegment(this.segments[this.iterator++]);\n        }\n        this.Draw();\n    };\n    return Path;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Path;\nvar SvgPath = (function (_super) {\n    __extends(SvgPath, _super);\n    function SvgPath(events, curved, color, canvas) {\n        _super.call(this, events, curved, color);\n        this.canvas = canvas;\n    }\n    SvgPath.prototype.DrawStartDot = function (position, radius) {\n        this.path = this.CreatePathElement();\n        var left = new Vector_1['default'](position.X - radius, position.Y);\n        var right = new Vector_1['default'](position.X + radius, position.Y);\n        var center = right.pointInBetween(left);\n        var startDirection = left.clone().subtract(center);\n        var endDirection = right.clone().subtract(center);\n        var arc = SVG_1['default'].ArcString(right, center.distanceTo(right), Path.angle(startDirection));\n        this.right = SVG_1['default'].MoveToString(right);\n        this.left = SVG_1['default'].LineToString(left) + \" \" + arc;\n        this.cap = SVG_1['default'].ArcString(left, center.distanceTo(left), Path.angle(endDirection));\n        SVG_1['default'].SetAttributes(this.path, { d: this.right + this.cap + this.left });\n        this.canvas.appendChild(this.path);\n    };\n    SvgPath.prototype.InitPath = function (right, left) {\n        _super.prototype.InitPath.call(this, right, left);\n        this.StartDrawingPath(this.segments[0]);\n    };\n    SvgPath.prototype.CreatePathElement = function () {\n        var options;\n        if (this.wireframe) {\n            options = {\n                \"stroke\": this.color,\n                \"stroke-width\": 1\n            };\n        } else {\n            options = {\n                \"fill\": this.color\n            };\n        }\n        return SVG_1['default'].CreateElement(\"path\", options);\n    };\n    SvgPath.prototype.DrawCurvedSegment = function (segment) {\n        this.right += SVG_1['default'].CurveToString(segment.RightBezier.StartCP, segment.RightBezier.EndCP, segment.RightBezier.End);\n        this.left = SVG_1['default'].CurveToString(segment.LeftBezier.EndCP, segment.LeftBezier.StartCP, segment.LeftBezier.Start) + \" \" + this.left;\n        var center = segment.Right.pointInBetween(segment.Left);\n        var startDirection = segment.Right.clone().subtract(center);\n        this.cap = SVG_1['default'].ArcString(segment.Left, center.distanceTo(segment.Left), Path.angle(startDirection));\n    };\n    SvgPath.prototype.DrawQuadrilateralSegment = function (segment) {\n        this.right += SVG_1['default'].LineToString(segment.Right);\n        this.left = SVG_1['default'].LineToString(this.lastDrawnSegment.Left) + \" \" + this.left;\n        var center = segment.Right.pointInBetween(segment.Left);\n        var startDirection = segment.Right.clone().subtract(center);\n        this.cap = SVG_1['default'].ArcString(segment.Left, center.distanceTo(segment.Left), Path.angle(startDirection));\n    };\n    SvgPath.prototype.GetPathString = function () {\n        return this.right + this.cap + this.left;\n    };\n    SvgPath.prototype.Draw = function () {\n        SVG_1['default'].SetAttributes(this.path, {\n            d: this.GetPathString()\n        });\n    };\n    return SvgPath;\n})(Path);\nexports.SvgPath = SvgPath;\nvar CanvasPath = (function (_super) {\n    __extends(CanvasPath, _super);\n    function CanvasPath(events, curved, color, context) {\n        _super.call(this, events, curved, color);\n        this.context = context;\n        this.context.fillStyle = this.color;\n    }\n    CanvasPath.prototype.DrawStartDot = function (position, radius) {\n        this.context.beginPath();\n        this.DrawDot(position, radius);\n        this.Draw();\n    };\n    CanvasPath.prototype.DrawDot = function (c, r) {\n        this.context.arc(c.X, c.Y, r, 0, 2 * Math.PI, true);\n    };\n    CanvasPath.prototype.DrawQuadrilateralSegment = function (segment) {\n        this.context.moveTo(this.lastDrawnSegment.Right.X, this.lastDrawnSegment.Right.Y);\n        this.context.lineTo(this.lastDrawnSegment.Left.X, this.lastDrawnSegment.Left.Y);\n        this.context.lineTo(segment.Left.X, segment.Left.Y);\n        var center = segment.Left.pointInBetween(segment.Right);\n        var startDirection = segment.Right.clone().subtract(center);\n        var endDirection = segment.Left.clone().subtract(center);\n        this.context.arc(center.X, center.Y, center.distanceTo(segment.Left), Path.angle(startDirection), Path.angle(endDirection), false);\n    };\n    CanvasPath.prototype.DrawCurvedSegment = function (segment) {\n        this.context.moveTo(segment.RightBezier.Start.X, segment.RightBezier.Start.Y);\n        this.context.lineTo(segment.LeftBezier.Start.X, segment.LeftBezier.Start.Y);\n        this.context.bezierCurveTo(segment.LeftBezier.StartCP.X, segment.LeftBezier.StartCP.Y, segment.LeftBezier.EndCP.X, segment.LeftBezier.EndCP.Y, segment.LeftBezier.End.X, segment.LeftBezier.End.Y);\n        var center = segment.RightBezier.End.pointInBetween(segment.LeftBezier.End);\n        var startDirection = segment.RightBezier.End.clone().subtract(center);\n        var endDirection = segment.LeftBezier.End.clone().subtract(center);\n        this.context.arc(center.X, center.Y, center.distanceTo(segment.LeftBezier.End), Path.angle(startDirection), Path.angle(endDirection), false);\n        this.context.bezierCurveTo(segment.RightBezier.EndCP.X, segment.RightBezier.EndCP.Y, segment.RightBezier.StartCP.X, segment.RightBezier.StartCP.Y, segment.RightBezier.Start.X, segment.RightBezier.Start.Y);\n    };\n    CanvasPath.prototype.Draw = function () {\n        this.context.closePath();\n        this.context.fill();\n        this.context.beginPath();\n    };\n    return CanvasPath;\n})(Path);\nexports.CanvasPath = CanvasPath;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Drawing/Path.ts\n **/","/// <reference path=\"../Helpers\" />\n\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Segment = (function () {\n    function Segment() {}\n    Object.defineProperty(Segment.prototype, \"Left\", {\n        get: function get() {\n            throw new Error(\"Not implemented\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Segment.prototype, \"Right\", {\n        get: function get() {\n            throw new Error(\"Not implemented\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Segment;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Segment;\nvar QuadrilateralSegment = (function (_super) {\n    __extends(QuadrilateralSegment, _super);\n    function QuadrilateralSegment(left, right) {\n        _super.call(this);\n        this.left = left;\n        this.right = right;\n    }\n    Object.defineProperty(QuadrilateralSegment.prototype, \"Left\", {\n        get: function get() {\n            return this.left;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuadrilateralSegment.prototype, \"Right\", {\n        get: function get() {\n            return this.right;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return QuadrilateralSegment;\n})(Segment);\nexports.QuadrilateralSegment = QuadrilateralSegment;\nvar ZeroLengthSegment = (function (_super) {\n    __extends(ZeroLengthSegment, _super);\n    function ZeroLengthSegment(left, right) {\n        _super.call(this, left, right);\n    }\n    return ZeroLengthSegment;\n})(QuadrilateralSegment);\nexports.ZeroLengthSegment = ZeroLengthSegment;\nvar CurvedSegment = (function (_super) {\n    __extends(CurvedSegment, _super);\n    function CurvedSegment(left, right) {\n        _super.call(this);\n        this.left = left;\n        this.right = right;\n    }\n    Object.defineProperty(CurvedSegment.prototype, \"Left\", {\n        get: function get() {\n            return this.left.End;\n        },\n        set: function set(vec) {\n            this.left.End = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CurvedSegment.prototype, \"Right\", {\n        get: function get() {\n            return this.right.End;\n        },\n        set: function set(vec) {\n            this.right.End = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CurvedSegment.prototype, \"LeftBezier\", {\n        get: function get() {\n            return this.left;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CurvedSegment.prototype, \"RightBezier\", {\n        get: function get() {\n            return this.right;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CurvedSegment;\n})(Segment);\nexports.CurvedSegment = CurvedSegment;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Drawing/Segments.ts\n **/","\"use strict\";\n\nvar HTML_1 = require('./HTML');\nvar File = (function () {\n    function File() {}\n    File.Check = function (req, mimeType) {\n        return req.status === 200 && !!mimeType ? req.getResponseHeader(\"ContentType\") === mimeType : true;\n    };\n    File.Exists = function (url, mimeType) {\n        var req = new XMLHttpRequest();\n        req.open(\"HEAD\", url, false);\n        req.send();\n        return this.Check(req, mimeType);\n    };\n    File.ExistsAsync = function (url, success, error, mimeType) {\n        var _this = this;\n        var req = new XMLHttpRequest();\n        req.open(\"HEAD\", url, true);\n        req.onerror = error;\n        req.ontimeout = error;\n        req.onload = function (e) {\n            if (_this.Check(req, mimeType)) {\n                success(e);\n            } else {\n                error(e);\n            }\n        };\n        req.send();\n    };\n    File.ReadFileAsync = function (url, success, error) {\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", url, true);\n        req.onerror = function (e) {\n            return error(req.status);\n        };\n        req.ontimeout = function (e) {\n            return error(req.status);\n        };\n        req.onload = function (e) {\n            if (req.status === 200) {\n                success(!!req.responseXML ? req.responseXML : req.response);\n            } else {\n                error(req.status);\n            }\n        };\n        req.send();\n    };\n    File.ReadXmlAsync = function (url, success, error) {\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", url, true);\n        req.onerror = function (e) {\n            return error(req.status);\n        };\n        req.ontimeout = function (e) {\n            return error(req.status);\n        };\n        req.onload = function (e) {\n            if (req.status === 200) {\n                success(req.responseXML);\n            } else {\n                error(req.status);\n            }\n        };\n        req.send();\n    };\n    File.Download = function (blob, name) {\n        var a = HTML_1[\"default\"].CreateElement(\"a\", {\n            css: \"display: none\"\n        });\n        document.documentElement.appendChild(a);\n        var url = URL.createObjectURL(blob);\n        HTML_1[\"default\"].SetAttributes(a, {\n            href: url,\n            download: name\n        });\n        a.click();\n        URL.revokeObjectURL(url);\n    };\n    File.CurrentDateTime = function () {\n        var date = new Date();\n        return \"$(date.getMonth())-$(date.getDay())-$(date.getFullYear())_$(date.getHour())-$(date.getMinute())\";\n    };\n    File.StartDownloadingWav = function (blob) {\n        File.Download(blob, \"recording-\" + File.CurrentDateTime() + \".wav\");\n    };\n    File.StartDownloadingXml = function (text) {\n        var blob = new Blob([text], { type: \"text/xml\" });\n        File.Download(blob, \"data-\" + File.CurrentDateTime() + \".xml\");\n    };\n    return File;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = File;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/File.ts\n **/","///<reference path=\"./Vector.ts\" />\n\"use strict\";\n\nvar Vector_1 = require('./Vector');\nvar Spline = (function () {\n    function Spline() {}\n    Spline.catmullRomToBezier = function (a, b, c, d) {\n        return new BezierCurveSegment(b, new Vector_1[\"default\"](-1 / 6 * a.X + b.X + 1 / 6 * c.X, -1 / 6 * a.Y + b.Y + 1 / 6 * c.Y), c, new Vector_1[\"default\"](1 / 6 * b.X + c.X + -1 / 6 * d.X, 1 / 6 * b.Y + c.Y + -1 / 6 * d.Y));\n    };\n    return Spline;\n})();\nexports.Spline = Spline;\nvar BezierCurveSegment = (function () {\n    function BezierCurveSegment(start, startCP, end, endCP) {\n        this.start = start;\n        this.startCP = startCP;\n        this.end = end;\n        this.endCP = endCP;\n    }\n    Object.defineProperty(BezierCurveSegment.prototype, \"Start\", {\n        get: function get() {\n            return this.start;\n        },\n        set: function set(vec) {\n            this.start = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BezierCurveSegment.prototype, \"StartCP\", {\n        get: function get() {\n            return this.startCP;\n        },\n        set: function set(vec) {\n            this.startCP = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BezierCurveSegment.prototype, \"End\", {\n        get: function get() {\n            return this.end;\n        },\n        set: function set(vec) {\n            this.end = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BezierCurveSegment.prototype, \"EndCP\", {\n        get: function get() {\n            return this.endCP;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BezierCurveSegment.prototype, \"EndCp\", {\n        set: function set(vec) {\n            this.endCP = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return BezierCurveSegment;\n})();\nexports.BezierCurveSegment = BezierCurveSegment;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/Spline.ts\n **/","\"use strict\";\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Vector_1 = require('./Vector');\n(function (StateType) {\n    StateType[StateType[\"ChangeBrushSize\"] = 0] = \"ChangeBrushSize\";\n    StateType[StateType[\"ChangeColor\"] = 1] = \"ChangeColor\";\n    StateType[StateType[\"Cursor\"] = 2] = \"Cursor\";\n})(exports.StateType || (exports.StateType = {}));\nvar StateType = exports.StateType;\nvar State = (function () {\n    function State(type, time) {\n        this.type = type;\n        this.time = time;\n    }\n    State.prototype.GetType = function () {\n        return this.type;\n    };\n    State.prototype.GetTime = function () {\n        return this.time;\n    };\n    return State;\n})();\nexports.State = State;\nvar CursorState = (function (_super) {\n    __extends(CursorState, _super);\n    function CursorState(time, x, y, pressure) {\n        _super.call(this, StateType.Cursor, time);\n        this.x = x;\n        this.y = y;\n        this.pressure = pressure;\n    }\n    Object.defineProperty(CursorState.prototype, \"X\", {\n        get: function get() {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CursorState.prototype, \"Y\", {\n        get: function get() {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CursorState.prototype, \"Pressure\", {\n        get: function get() {\n            return this.pressure;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CursorState.prototype.getPosition = function () {\n        return new Vector_1[\"default\"](this.x, this.y);\n    };\n    return CursorState;\n})(State);\nexports.CursorState = CursorState;\nvar ColorState = (function (_super) {\n    __extends(ColorState, _super);\n    function ColorState(time, color) {\n        _super.call(this, StateType.ChangeColor, time);\n        this.color = color;\n    }\n    Object.defineProperty(ColorState.prototype, \"Color\", {\n        get: function get() {\n            return this.color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ColorState;\n})(State);\nexports.ColorState = ColorState;\nvar SizeState = (function (_super) {\n    __extends(SizeState, _super);\n    function SizeState(time, size) {\n        _super.call(this, StateType.ChangeBrushSize, time);\n        this.size = size;\n    }\n    Object.defineProperty(SizeState.prototype, \"Size\", {\n        get: function get() {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SizeState;\n})(State);\nexports.SizeState = SizeState;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/State.ts\n **/","\"use strict\";\n\nvar VideoTimer = (function () {\n    function VideoTimer(running) {\n        this.pauseTime = 0;\n        if (!window.performance) {\n            this.clock = Date;\n        } else {\n            this.clock = window.performance;\n        }\n        this.paused = !running;\n        this.Reset();\n    }\n    Object.defineProperty(VideoTimer.prototype, \"StartTime\", {\n        get: function get() {\n            return this.startTime;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    VideoTimer.prototype.CurrentTime = function () {\n        return !this.paused ? this.clock.now() - this.startTime : this.pauseTime;\n    };\n    VideoTimer.prototype.SetTime = function (milliseconds) {\n        if (this.paused) {\n            this.pauseTime = milliseconds;\n        } else {\n            this.startTime = this.clock.now() - milliseconds;\n        }\n    };\n    VideoTimer.prototype.Pause = function () {\n        this.pauseTime = this.CurrentTime();\n        this.paused = true;\n    };\n    VideoTimer.prototype.Resume = function () {\n        this.paused = false;\n        this.Reset();\n        this.SetTime(this.pauseTime);\n    };\n    VideoTimer.prototype.Reset = function () {\n        this.startTime = this.clock.now();\n    };\n    return VideoTimer;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = VideoTimer;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/Helpers/VideoTimer.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar HTML_1 = require('../Helpers/HTML');\nvar BasicElements_1 = require('./BasicElements');\nvar Cursor_1 = require('./Cursor');\nvar Board = (function (_super) {\n    __extends(Board, _super);\n    function Board(id, events) {\n        var _this = this;\n        _super.call(this, \"div\", id);\n        this.events = events;\n        HTML_1['default'].SetAttributes(this.GetHTML(), { 'class': \"vector-video-board\" });\n        this.cursor = new Cursor_1['default'](events);\n        this.AddChild(this.cursor);\n        HTML_1['default'].SetAttributes(this.GetHTML(), { position: \"relative\" });\n        events.on(VideoEvents_1.VideoEventType.CursorState, function (state) {\n            return _this.UpdateCursorPosition(state);\n        });\n        events.on(VideoEvents_1.VideoEventType.CursorState, function (state) {\n            return _this.UpdateCursorPosition(state);\n        });\n        events.on(VideoEvents_1.VideoEventType.ChangeBrushSize, function (state) {\n            return _this.UpdateCursorSize(state);\n        });\n        events.on(VideoEvents_1.VideoEventType.ChangeColor, function (state) {\n            return _this.UpdateCursorColor(state);\n        });\n        events.on(VideoEvents_1.VideoEventType.ChangeColor, function (state) {\n            return _this.UpdateCursorColor(state);\n        });\n        events.on(VideoEvents_1.VideoEventType.CanvasScalingFactor, function (scalingFactor) {\n            return _this.UpdateCursorScale(scalingFactor);\n        });\n        events.on(VideoEvents_1.VideoEventType.CursorOffset, function (offset) {\n            return _this.cursor.Offset = offset;\n        });\n    }\n    Object.defineProperty(Board.prototype, \"Width\", {\n        get: function get() {\n            return this.GetHTML().clientWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"Height\", {\n        get: function get() {\n            return this.GetHTML().clientHeight;\n        },\n        set: function set(height) {\n            this.GetHTML().clientHeight = height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"IsRecording\", {\n        set: function set(isRecording) {\n            isRecording ? this.GetHTML().classList.add(\"recording\") : this.GetHTML().classList.remove(\"recording\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Board.prototype.UpdateCursorPosition = function (state) {\n        this.cursor.MoveTo(state.X, state.Y);\n    };\n    Board.prototype.UpdateCursorSize = function (size) {\n        this.cursor.ChangeSize(size);\n    };\n    Board.prototype.UpdateCursorColor = function (color) {\n        this.cursor.ChangeColor(color);\n    };\n    Board.prototype.UpdateCursorScale = function (scalingFactor) {\n        this.cursor.SetScalingFactor(scalingFactor);\n    };\n    return Board;\n})(BasicElements_1.Panel);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Board;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/Board.ts\n **/","//namespace VectorScreencast.UI {\n\"use strict\";\n\nvar BrushSize = (function () {\n    function BrushSize(size) {\n        this.size = size;\n    }\n    Object.defineProperty(BrushSize.prototype, \"Size\", {\n        get: function get() {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushSize.prototype, \"Unit\", {\n        get: function get() {\n            return \"px\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BrushSize.prototype, \"CssValue\", {\n        get: function get() {\n            return \"\" + this.Size + this.Unit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return BrushSize;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = BrushSize;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/Brush.ts\n **/","\"use strict\";\n\nvar Metadata = (function () {\n    function Metadata() {}\n    return Metadata;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Metadata;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Metadata.ts\n **/","\"use strict\";\n\nvar Video = (function () {\n    function Video() {\n        this.chunks = [];\n    }\n    Object.defineProperty(Video.prototype, \"Metadata\", {\n        get: function get() {\n            return this.metadata;\n        },\n        set: function set(value) {\n            this.metadata = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Video.prototype, \"CurrentChunk\", {\n        get: function get() {\n            return this.chunks[this.currentChunk];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Video.prototype, \"CurrentChunkNumber\", {\n        get: function get() {\n            return this.currentChunk;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Video.prototype, \"SetCurrentChunkNumber\", {\n        set: function set(n) {\n            this.currentChunk = n;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Video.prototype.PeekNextChunk = function () {\n        return this.chunks[this.currentChunk + 1];\n    };\n    Video.prototype.MoveNextChunk = function () {\n        this.currentChunk++;\n        if (!!this.CurrentChunk) {\n            this.CurrentChunk.Rewind();\n        }\n    };\n    Video.prototype.PushChunk = function (chunk) {\n        this.currentChunk = this.chunks.push(chunk) - 1;\n        return this.currentChunk;\n    };\n    Video.prototype.Rewind = function () {\n        this.currentChunk = 0;\n    };\n    Video.prototype.RewindMinusOne = function () {\n        this.currentChunk = -1;\n    };\n    Video.prototype.FastforwardErasedChunksUntil = function (time) {\n        var c = this.FindChunk(time, +1);\n        return Math.max(this.currentChunk, this.chunks[c].LastErase);\n    };\n    Video.prototype.RewindToLastEraseBefore = function (time) {\n        var c = this.FindChunk(time, -1);\n        return this.chunks[c].LastErase;\n    };\n    Video.prototype.FindChunk = function (time, directionHint) {\n        var foundChunk = Math.min(this.currentChunk, this.chunks.length - 2);\n        while (!!this.chunks[foundChunk] && !!this.chunks[foundChunk + 1] && (this.chunks[foundChunk].StartTime <= time && this.chunks[foundChunk + 1].StartTime >= time) === false) {\n            foundChunk += directionHint;\n        }\n        if (foundChunk < 0) {\n            return 0;\n        }\n        return foundChunk;\n    };\n    return Video;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports[\"default\"] = Video;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoData/Video.ts\n **/","'use strict';\n\nvar Video_1 = require('../../VideoData/Video');\nvar Chunk_1 = require('../../VideoData/Chunk');\nvar ChunkFactories_1 = require('./ChunkFactories');\nvar CommandFactories_1 = require('./CommandFactories');\nvar MetadataFactory_1 = require('./MetadataFactory');\nvar SVG_1 = require('../../Helpers/SVG');\nvar IO = (function () {\n    function IO() {\n        this.VideoChunksLayerType = \"video-chunks\";\n        this.commandFactory = new CommandFactories_1.MoveCursorFactory(new CommandFactories_1.DrawSegmentFactory(new CommandFactories_1.ChangeBrushColorFactory(new CommandFactories_1.ChangeBrushSizeFactory(new CommandFactories_1.ClearCanvasFactory()))));\n        this.eraseChunkFactory = new ChunkFactories_1.EraseChunkFactory();\n        this.chunkFactory = new ChunkFactories_1.VoidChunkFactory(new ChunkFactories_1.PathChunkFactory(this.eraseChunkFactory));\n        this.metadataFactory = new MetadataFactory_1['default']();\n    }\n    IO.prototype.SaveVideo = function (data) {\n        var type = document.implementation.createDocumentType('svg:svg', '-//W3C//DTD SVG 1.1//EN', 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd');\n        var doc = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg', type);\n        doc.documentElement.setAttributeNS('http://www.w3.org/2000/xmlns/', \"xmlns:a\", SVG_1.SVGA.Namespace);\n        SVG_1['default'].SetAttributes(doc.rootElement, {\n            width: data.Metadata.Width,\n            height: data.Metadata.Height,\n            viewBox: \"0 0 \" + data.Metadata.Width + \" \" + data.Metadata.Height\n        });\n        doc.rootElement.appendChild(this.metadataFactory.ToSVG(data.Metadata));\n        this.eraseChunkFactory.Width = data.Metadata.Width;\n        this.eraseChunkFactory.Height = data.Metadata.Height;\n        var chunks = SVG_1['default'].CreateElement(\"g\");\n        SVG_1.SVGA.SetAttributes(chunks, { \"type\": this.VideoChunksLayerType });\n        data.Rewind();\n        while (!!data.CurrentChunk) {\n            chunks.appendChild(this.chunkFactory.ToSVG(data.CurrentChunk, this.commandFactory));\n            data.MoveNextChunk();\n        }\n        doc.rootElement.appendChild(chunks);\n        var serializer = new XMLSerializer();\n        return new Blob([serializer.serializeToString(doc)], { type: \"application/svg+xml\" });\n    };\n    IO.prototype.LoadVideo = function (events, doc) {\n        if (doc instanceof Document === false) {\n            throw new Error(\"SVGAnimation IO parsing error: Document must be an XML document\");\n        }\n        var xml = doc;\n        if (xml.documentElement.childElementCount !== 2) {\n            throw new Error(\"SVGAnimation document root element must have exactely two children nodes, but has \" + xml.documentElement.childNodes.length + \" instead\");\n        }\n        var video = new Video_1['default']();\n        var metaNode = xml.documentElement.firstElementChild;\n        video.Metadata = this.metadataFactory.FromSVG(metaNode);\n        var chunksLayer = metaNode.nextElementSibling;\n        if (chunksLayer.localName !== \"g\" || SVG_1.SVGA.attr(chunksLayer, \"type\") !== this.VideoChunksLayerType) {\n            throw new Error('SVGAnimation IO parsing error: chunks layer must be a SVG <g> node with a:type=\\'' + this.VideoChunksLayerType + \"',\" + (\" got <\" + chunksLayer.localName + \"> with a:type='\" + SVG_1.SVGA.attr(chunksLayer, \"type\") + \"'\"));\n        }\n        var lastErase = 0;\n        var i = 0;\n        var chunk = chunksLayer.firstElementChild;\n        while (!!chunk) {\n            var next = this.chunkFactory.FromSVG(events, chunk, this.commandFactory);\n            next.LastErase = lastErase;\n            video.PushChunk(next);\n            if (next instanceof Chunk_1.EraseChunk) {\n                lastErase = i;\n            }\n            chunk = chunk.nextElementSibling;\n            i++;\n        }\n        video.Rewind();\n        return video;\n    };\n    IO.prototype.GetExtension = function () {\n        return \"svg\";\n    };\n    IO.prototype.GetMimeType = function () {\n        return \"application/svg+xml\";\n    };\n    return IO;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = IO;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoFormat/SVGAnimation/IO.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Vector_1 = require('../Helpers/Vector');\nvar BasicElements_1 = require('./BasicElements');\nvar VideoEvents_1 = require('../Helpers/VideoEvents');\nvar SVG_1 = require('../Helpers/SVG');\nvar Color_1 = require('./Color');\nvar Cursor = (function (_super) {\n    __extends(Cursor, _super);\n    function Cursor(events) {\n        _super.call(this, \"div\");\n        this.events = events;\n        this.radius = 20;\n        this.stroke = 3;\n        this.position = new Vector_1['default'](0, 0);\n        this.offset = new Vector_1['default'](0, 0);\n        this.CreateHTML();\n        this.scalingFactor = 1;\n        this.size = null;\n    }\n    Object.defineProperty(Cursor.prototype, \"Offset\", {\n        set: function set(val) {\n            this.offset = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Cursor.prototype.CreateHTML = function () {\n        var _this = this;\n        this.svg = SVG_1['default'].CreateElement(\"svg\", {\n            width: 2 * this.radius,\n            height: 2 * this.radius\n        });\n        this.GetHTML().appendChild(this.svg);\n        this.bgColor = Color_1['default'].BackgroundColor;\n        this.color = Color_1['default'].ForegroundColor;\n        this.dot = SVG_1['default'].CreateDot(new Vector_1['default'](this.radius, this.radius), this.radius - this.stroke, this.bgColor.CssValue);\n        SVG_1['default'].SetAttributes(this.dot, {\n            \"stroke\": this.color.CssValue,\n            \"stroke-width\": this.stroke\n        });\n        this.svg.appendChild(this.dot);\n        this.GetHTML().style.position = \"absolute\";\n        this.GetHTML().style.background = \"transparent\";\n        this.GetHTML().style.lineHeight = \"0\";\n        this.events.on(VideoEvents_1.VideoEventType.ClearCanvas, function (color) {\n            _this.bgColor = color;\n            SVG_1['default'].SetAttributes(_this.dot, { fill: _this.bgColor.CssValue });\n            _this.ChangeColor(_this.color);\n        });\n    };\n    Cursor.prototype.MoveTo = function (x, y) {\n        this.GetHTML().style.left = x * this.scalingFactor - this.radius - this.stroke + this.offset.X + \"px\";\n        this.GetHTML().style.top = y * this.scalingFactor - this.radius - this.stroke + this.offset.Y + \"px\";\n        this.position = new Vector_1['default'](x, y);\n    };\n    Cursor.prototype.ChangeColor = function (color) {\n        if (color.CssValue === this.bgColor.CssValue) {\n            color = color.CssValue === Color_1['default'].ForegroundColor.CssValue ? Color_1['default'].BackgroundColor : Color_1['default'].ForegroundColor;\n        }\n        SVG_1['default'].SetAttributes(this.dot, {\n            stroke: color.CssValue\n        });\n        this.color = color;\n    };\n    Cursor.prototype.ChangeSize = function (size) {\n        this.size = size;\n        var originalRadius = this.radius;\n        this.radius = size.Size * this.scalingFactor / 2 - 2;\n        var calculatedSize = 2 * (this.radius + this.stroke);\n        SVG_1['default'].SetAttributes(this.svg, {\n            width: calculatedSize,\n            height: calculatedSize\n        });\n        var shift = originalRadius - this.radius;\n        this.MoveTo(this.position.X + shift, this.position.Y + shift);\n        SVG_1['default'].SetAttributes(this.dot, {\n            cx: calculatedSize / 2,\n            cy: calculatedSize / 2,\n            r: Math.max(1, this.radius - this.stroke)\n        });\n    };\n    Cursor.prototype.SetScalingFactor = function (sf) {\n        this.scalingFactor = sf;\n        if (!!this.size) {\n            this.ChangeSize(this.size);\n        }\n    };\n    return Cursor;\n})(BasicElements_1.SimpleElement);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = Cursor;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/UI/Cursor.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar SVG_1 = require('../../Helpers/SVG');\nvar Vector_1 = require('../../Helpers/Vector');\nvar Chunk_1 = require('../../VideoData/Chunk');\nvar Command_1 = require('../../VideoData/Command');\nvar Path_1 = require('../../Drawing/Path');\nvar Segments_1 = require('../../Drawing/Segments');\nvar Color_1 = require('../../UI/Color');\nvar Spline_1 = require('../../Helpers/Spline');\nvar TIME_PRECISION = 2;\nvar ChunkFactory = (function () {\n    function ChunkFactory(next) {\n        this.next = next;\n    }\n    ChunkFactory.prototype.FromSVG = function (events, node, cmdFactory) {\n        if (!!this.next) {\n            return this.next.FromSVG(events, node, cmdFactory);\n        }\n        throw new Error(\"Chunk loading failed: Unsupported node \" + node.nodeName + \".\");\n    };\n    ChunkFactory.prototype.ToSVG = function (chunk, cmdFactory) {\n        if (!!this.next) {\n            return this.next.ToSVG(chunk, cmdFactory);\n        }\n        throw new Error(\"Chunk export failed: Unsupported command \" + typeof chunk + \".\");\n    };\n    ChunkFactory.prototype.CommandsToSVG = function (node, cmds, cmdFactory, chunkStart) {\n        for (var i = 0; i < cmds.length; i++) {\n            node.appendChild(cmdFactory.ToSVG(cmds[i], chunkStart));\n        }\n        return node;\n    };\n    ChunkFactory.GetCommands = function (cmd, cmdFactory, chunkStart) {\n        var initCommands = this.initCmds.filter(function (v) {\n            return v !== null;\n        }).map(function (v) {\n            return v.Clone();\n        });\n        var cmds = [];\n        while (!!cmd) {\n            var loadedCmd = cmdFactory.FromSVG(cmd, chunkStart);\n            cmds.push(loadedCmd);\n            cmd = cmd.nextElementSibling;\n            if (loadedCmd instanceof Command_1.MoveCursor) {\n                this.initCmds[0] = loadedCmd;\n            } else if (loadedCmd instanceof Command_1.ChangeBrushColor) {\n                this.initCmds[1] = loadedCmd;\n            } else if (loadedCmd instanceof Command_1.ChangeBrushSize) {\n                this.initCmds[2] = loadedCmd;\n            }\n        }\n        return [initCommands, cmds];\n    };\n    ChunkFactory.initCmds = [null, null, null];\n    return ChunkFactory;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = ChunkFactory;\nvar VoidChunkFactory = (function (_super) {\n    __extends(VoidChunkFactory, _super);\n    function VoidChunkFactory() {\n        _super.apply(this, arguments);\n    }\n    VoidChunkFactory.prototype.FromSVG = function (events, node, cmdFactory) {\n        if (SVG_1.SVGA.attr(node, \"type\") === VoidChunkFactory.NodeName) {\n            var chunk = new Chunk_1.VoidChunk(SVG_1.SVGA.numAttr(node, \"t\"), 0);\n            _a = ChunkFactory.GetCommands(node.firstElementChild, cmdFactory, chunk.StartTime), chunk.InitCommands = _a[0], chunk.Commands = _a[1];\n            return chunk;\n        }\n        return _super.prototype.FromSVG.call(this, events, node, cmdFactory);\n        var _a;\n    };\n    VoidChunkFactory.prototype.ToSVG = function (chunk, cmdFactory) {\n        if (chunk instanceof Chunk_1.VoidChunk) {\n            var node = SVG_1['default'].CreateElement(\"g\");\n            SVG_1.SVGA.SetAttributes(node, {\n                \"type\": VoidChunkFactory.NodeName,\n                \"t\": chunk.StartTime.toFixed(TIME_PRECISION)\n            });\n            this.CommandsToSVG(node, chunk.Commands, cmdFactory, chunk.StartTime);\n            return node;\n        }\n        return _super.prototype.ToSVG.call(this, chunk, cmdFactory);\n    };\n    VoidChunkFactory.NodeName = \"void\";\n    return VoidChunkFactory;\n})(ChunkFactory);\nexports.VoidChunkFactory = VoidChunkFactory;\nvar InstructionType;\n(function (InstructionType) {\n    InstructionType[InstructionType[\"Move\"] = 0] = \"Move\";\n    InstructionType[InstructionType[\"Line\"] = 1] = \"Line\";\n    InstructionType[InstructionType[\"Curve\"] = 2] = \"Curve\";\n    InstructionType[InstructionType[\"Arc\"] = 3] = \"Arc\";\n    InstructionType[InstructionType[\"Close\"] = 4] = \"Close\";\n})(InstructionType || (InstructionType = {}));\nvar InstructionFactory = (function () {\n    function InstructionFactory(letter, type, coordsCount, next) {\n        this.letter = letter;\n        this.type = type;\n        this.coordsCount = coordsCount;\n        this.next = next;\n    }\n    InstructionFactory.prototype.Create = function (c) {\n        var letter = c.shift();\n        if (letter === this.letter) {\n            var coords = [];\n            for (var i = 0; i < this.coordsCount; i++) {\n                coords.push(this.CreateVector2(c.shift()));\n            }\n            return {\n                type: this.type,\n                coords: coords\n            };\n        } else {\n            if (!!this.next) {\n                c.unshift(letter);\n                return this.next.Create(c);\n            }\n            throw new Error(\"Unsupported instruction letter '\" + letter + \"'\");\n        }\n    };\n    InstructionFactory.prototype.CreateVector2 = function (pair) {\n        var coords = pair.split(\",\");\n        if (coords.length !== 2) {\n            throw new Error(\"Coordinates pair '\" + pair + \"' is not valid\");\n        }\n        return new Vector_1['default'](Number(coords[0]), Number(coords[1]));\n    };\n    return InstructionFactory;\n})();\nvar ArcFactory = (function (_super) {\n    __extends(ArcFactory, _super);\n    function ArcFactory(next) {\n        _super.call(this, \"A\", InstructionType.Arc, 3, next);\n    }\n    ArcFactory.prototype.Create = function (c) {\n        var letter = c.shift();\n        if (letter === this.letter) {\n            var coords = [];\n            coords.push(this.CreateVector2(c.shift()));\n            c.shift();\n            coords.push(this.CreateVector2(c.shift()));\n            coords.push(this.CreateVector2(c.shift()));\n            return {\n                type: this.type,\n                coords: coords\n            };\n        } else {\n            if (!!this.next) {\n                c.unshift(letter);\n                return this.next.Create(c);\n            }\n            throw new Error(\"Unsupported instruction letter '\" + letter + \"'\");\n        }\n    };\n    return ArcFactory;\n})(InstructionFactory);\nvar PathChunkFactory = (function (_super) {\n    __extends(PathChunkFactory, _super);\n    function PathChunkFactory(next) {\n        _super.call(this, next);\n        this.next = next;\n        this.instructionFactory = new InstructionFactory(\"C\", InstructionType.Curve, 3, new InstructionFactory(\"L\", InstructionType.Line, 1, new InstructionFactory(\"M\", InstructionType.Move, 1, new ArcFactory())));\n    }\n    PathChunkFactory.prototype.FromSVG = function (events, node, cmdFactory) {\n        if (SVG_1.SVGA.attr(node, \"type\") === PathChunkFactory.NodeName) {\n            if (node.childElementCount === 0) {\n                throw new Error(\"Path chunk no child elements.\");\n            }\n            var pathNode = node.firstElementChild;\n            if (pathNode.localName !== \"path\") {\n                throw new Error(\"Path chunk must begin with a <path> element, but \" + pathNode.localName + \" found instead\");\n            }\n            var chunk = new Chunk_1.PathChunk(this.SVGNodeToPath(events, pathNode), SVG_1.SVGA.numAttr(node, \"t\"), 0);\n            _a = ChunkFactory.GetCommands(pathNode.nextElementSibling, cmdFactory, chunk.StartTime), chunk.InitCommands = _a[0], chunk.Commands = _a[1];\n            return chunk;\n        }\n        return _super.prototype.FromSVG.call(this, events, node, cmdFactory);\n        var _a;\n    };\n    PathChunkFactory.prototype.ToSVG = function (chunk, cmdFactory) {\n        if (chunk instanceof Chunk_1.PathChunk) {\n            var node = SVG_1['default'].CreateElement(\"g\");\n            SVG_1.SVGA.SetAttributes(node, {\n                \"type\": PathChunkFactory.NodeName,\n                \"t\": chunk.StartTime.toFixed(TIME_PRECISION)\n            });\n            node.appendChild(this.PathToSVGNode(chunk.Path));\n            this.CommandsToSVG(node, chunk.Commands, cmdFactory, chunk.StartTime);\n            return node;\n        }\n        return _super.prototype.ToSVG.call(this, chunk, cmdFactory);\n    };\n    PathChunkFactory.prototype.SVGNodeToPath = function (events, node) {\n        var color = SVG_1['default'].attr(node, \"fill\");\n        var path = new Path_1['default'](events, true, color);\n        var d = SVG_1['default'].attr(node, \"d\");\n        node = null;\n        var c = d.split(\" \").filter(function (val) {\n            return val.length > 0;\n        });\n        var instructions = [];\n        while (c.length > 0) {\n            instructions.push(this.instructionFactory.Create(c));\n        }\n        c = null;\n        d = null;\n        var l = instructions.length - 1;\n        if (instructions.length >= 2 && instructions[0].type === InstructionType.Move && instructions[l].type === InstructionType.Arc) {\n            path.Segments.push(new Segments_1.ZeroLengthSegment(instructions[l - 1].coords[0], instructions[0].coords[0]));\n            instructions.pop();\n            instructions.pop();\n            instructions.shift();\n        } else {\n            throw new Error(\"Only \" + instructions.length + \" valid instructions recognized in a path string\");\n        }\n        if (instructions.length === 1) {\n            var start = path.Segments[0].Right;\n            var end = instructions[0].coords[2];\n            path.Segments = [new Segments_1.ZeroLengthSegment(start, end)];\n            return path;\n        }\n        l = instructions.length - 1;\n        var prevSegment = path.Segments[0];\n        for (var i = 0; i < Math.floor(instructions.length / 2); i++) {\n            if (instructions[i].type === InstructionType.Line) {\n                var qseg = new Segments_1.QuadrilateralSegment(instructions[i].coords[0], instructions[l - i].coords[0]);\n                path.Segments.push(qseg);\n                if (prevSegment instanceof Segments_1.CurvedSegment) {\n                    prevSegment.Left = instructions[l - i].coords[0].clone();\n                }\n                prevSegment = qseg;\n            } else if (instructions[i].type === InstructionType.Curve) {\n                var right = new Spline_1.BezierCurveSegment(null, instructions[i].coords[0], instructions[i].coords[2], instructions[i].coords[1]);\n                var left = new Spline_1.BezierCurveSegment(instructions[l - i].coords[2], instructions[l - i].coords[1], null, instructions[l - i].coords[0]);\n                var seg = new Segments_1.CurvedSegment(left, right);\n                if (!!prevSegment && prevSegment instanceof Segments_1.CurvedSegment) {\n                    prevSegment.Left = seg.LeftBezier.Start.clone();\n                    seg.RightBezier.Start = prevSegment.RightBezier.End.clone();\n                } else if (!!prevSegment && prevSegment instanceof Segments_1.QuadrilateralSegment) {\n                    seg.RightBezier.Start = prevSegment.Right.clone();\n                }\n                path.Segments.push(seg);\n                prevSegment = seg;\n            } else {\n                throw new Error(\"Unsupported path segment type \" + instructions[i].type + \" \");\n            }\n        }\n        if (!!prevSegment && prevSegment instanceof Segments_1.CurvedSegment) {\n            prevSegment.Left = instructions[Math.floor(instructions.length / 2)].coords[2].clone();\n        }\n        return path;\n    };\n    PathChunkFactory.prototype.PathToSVGNode = function (path) {\n        var segments = path.Segments;\n        var seg = segments[0];\n        var center = seg.Right.pointInBetween(seg.Left);\n        var startDirection = seg.Left.clone().subtract(center);\n        var endDirection = seg.Right.clone().subtract(center);\n        var arc = SVG_1['default'].ArcString(seg.Right, center.distanceTo(seg.Right), Path_1['default'].angle(startDirection));\n        var right = \"\";\n        var left = \" \" + arc;\n        for (var i = 0; i < segments.length; i++) {\n            var seg = segments[i];\n            if (seg instanceof Segments_1.ZeroLengthSegment) {\n                right += SVG_1['default'].MoveToString(seg.Right) + \" \";\n                left = SVG_1['default'].MoveToString(seg.Left) + \" \" + left;\n            } else if (seg instanceof Segments_1.CurvedSegment) {\n                right += SVG_1['default'].CurveToString(seg.RightBezier.StartCP, seg.RightBezier.EndCP, seg.RightBezier.End) + \" \";\n                left = SVG_1['default'].CurveToString(seg.LeftBezier.EndCP, seg.LeftBezier.StartCP, seg.LeftBezier.Start) + \" \" + left;\n            } else if (seg instanceof Segments_1.QuadrilateralSegment) {\n                right += SVG_1['default'].LineToString(seg.Right) + \" \";\n                left = SVG_1['default'].LineToString(seg.Left) + \" \" + left;\n            } else {\n                throw new Error(\"Unsupported segment type \" + typeof seg);\n            }\n        }\n        seg = segments[segments.length - 1];\n        center = seg.Right.pointInBetween(seg.Left);\n        startDirection = seg.Right.clone().subtract(center);\n        endDirection = seg.Left.clone().subtract(center);\n        var cap = SVG_1['default'].ArcString(seg.Left, center.distanceTo(seg.Left), Path_1['default'].angle(startDirection)) + \" \";\n        return SVG_1['default'].CreateElement(\"path\", {\n            \"fill\": path.Color,\n            \"d\": right + cap + left\n        });\n    };\n    PathChunkFactory.NodeName = \"path\";\n    return PathChunkFactory;\n})(ChunkFactory);\nexports.PathChunkFactory = PathChunkFactory;\nvar EraseChunkFactory = (function (_super) {\n    __extends(EraseChunkFactory, _super);\n    function EraseChunkFactory() {\n        _super.apply(this, arguments);\n        this.Width = 0;\n        this.Height = 0;\n    }\n    EraseChunkFactory.prototype.FromSVG = function (events, node, cmdFactory) {\n        if (SVG_1.SVGA.attr(node, \"type\") === EraseChunkFactory.NodeName) {\n            if (node.childElementCount === 0) {\n                throw new Error(\"Erase chunk no child elements.\");\n            }\n            var rectNode = node.firstElementChild;\n            if (rectNode.localName !== \"rect\") {\n                throw new Error(\"Erase chunk must begin with a <rect> element, but \" + rectNode.localName + \" found instead\");\n            }\n            var chunk = new Chunk_1.EraseChunk(new Color_1['default'](SVG_1['default'].attr(rectNode, \"fill\")), SVG_1.SVGA.numAttr(node, \"t\"), 0);\n            _a = ChunkFactory.GetCommands(rectNode.nextElementSibling, cmdFactory, chunk.StartTime), chunk.InitCommands = _a[0], chunk.Commands = _a[1];\n            return chunk;\n        }\n        return _super.prototype.FromSVG.call(this, events, node, cmdFactory);\n        var _a;\n    };\n    EraseChunkFactory.prototype.ToSVG = function (chunk, cmdFactory) {\n        if (chunk instanceof Chunk_1.EraseChunk) {\n            var node = SVG_1['default'].CreateElement(\"g\");\n            SVG_1.SVGA.SetAttributes(node, {\n                \"type\": EraseChunkFactory.NodeName,\n                \"t\": chunk.StartTime.toFixed(TIME_PRECISION)\n            });\n            node.appendChild(SVG_1['default'].CreateElement(\"rect\", { \"fill\": chunk.Color.CssValue, width: this.Width, height: this.Height }));\n            this.CommandsToSVG(node, chunk.Commands, cmdFactory, chunk.StartTime);\n            return node;\n        }\n        return _super.prototype.ToSVG.call(this, chunk, cmdFactory);\n    };\n    EraseChunkFactory.NodeName = \"erase\";\n    return EraseChunkFactory;\n})(ChunkFactory);\nexports.EraseChunkFactory = EraseChunkFactory;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoFormat/SVGAnimation/ChunkFactories.ts\n **/","'use strict';\n\nvar __extends = undefined && undefined.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Command_1 = require('../../VideoData/Command');\nvar SVG_1 = require('../../Helpers/SVG');\nvar HelperFunctions_1 = require('../../Helpers/HelperFunctions');\nvar Color_1 = require('../../UI/Color');\nvar Brush_1 = require('../../UI/Brush');\nvar TIME_PRECISION = 2;\nvar COORDS_PRECISION = 3;\nvar PRESSURE_PRECISION = 4;\nvar CommandFactory = (function () {\n    function CommandFactory(next) {\n        this.next = next;\n    }\n    CommandFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (!!this.next) {\n            return this.next.FromSVG(node, chunkStart);\n        }\n        throw new Error(\"Command loading failed: Unsupported node \" + node.nodeName + \".\");\n    };\n    CommandFactory.prototype.getCmdTime = function (el, chunkStart) {\n        return SVG_1.SVGA.numAttr(el, \"t\", 0) + chunkStart;\n    };\n    CommandFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (!!this.next) {\n            return this.next.ToSVG(cmd, chunkStart);\n        }\n        throw new Error(\"Command export failed: Unsupported command \" + typeof cmd + \".\");\n    };\n    CommandFactory.prototype.storeTime = function (el, time) {\n        if (time > 0) {\n            SVG_1.SVGA.SetAttributes(el, { \"t\": HelperFunctions_1.precise(time, TIME_PRECISION) });\n        }\n    };\n    return CommandFactory;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = CommandFactory;\nvar MoveCursorFactory = (function (_super) {\n    __extends(MoveCursorFactory, _super);\n    function MoveCursorFactory() {\n        _super.apply(this, arguments);\n    }\n    MoveCursorFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (node.localName === MoveCursorFactory.NodeName) {\n            return new Command_1.MoveCursor(SVG_1.SVGA.numAttr(node, \"x\"), SVG_1.SVGA.numAttr(node, \"y\"), SVG_1.SVGA.numAttr(node, \"p\", 0), _super.prototype.getCmdTime.call(this, node, chunkStart));\n        }\n        return _super.prototype.FromSVG.call(this, node, chunkStart);\n    };\n    MoveCursorFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (cmd instanceof Command_1.MoveCursor) {\n            var options = {\n                \"x\": HelperFunctions_1.precise(cmd.X),\n                \"y\": HelperFunctions_1.precise(cmd.Y)\n            };\n            if (cmd.P > 0) {\n                options[\"p\"] = HelperFunctions_1.precise(cmd.P, PRESSURE_PRECISION);\n            }\n            var cmdEl = SVG_1.SVGA.CreateElement(MoveCursorFactory.NodeName, options);\n            _super.prototype.storeTime.call(this, cmdEl, cmd.Time - chunkStart);\n            return cmdEl;\n        }\n        return _super.prototype.ToSVG.call(this, cmd, chunkStart);\n    };\n    MoveCursorFactory.NodeName = \"m\";\n    return MoveCursorFactory;\n})(CommandFactory);\nexports.MoveCursorFactory = MoveCursorFactory;\nvar DrawSegmentFactory = (function (_super) {\n    __extends(DrawSegmentFactory, _super);\n    function DrawSegmentFactory() {\n        _super.apply(this, arguments);\n    }\n    DrawSegmentFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (node.localName === DrawSegmentFactory.NodeName) {\n            return new Command_1.DrawNextSegment(_super.prototype.getCmdTime.call(this, node, chunkStart));\n        }\n        return _super.prototype.FromSVG.call(this, node, chunkStart);\n    };\n    DrawSegmentFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (cmd instanceof Command_1.DrawNextSegment) {\n            var cmdEl = SVG_1.SVGA.CreateElement(DrawSegmentFactory.NodeName);\n            _super.prototype.storeTime.call(this, cmdEl, cmd.Time - chunkStart);\n            return cmdEl;\n        }\n        return _super.prototype.ToSVG.call(this, cmd, chunkStart);\n    };\n    DrawSegmentFactory.NodeName = \"d\";\n    return DrawSegmentFactory;\n})(CommandFactory);\nexports.DrawSegmentFactory = DrawSegmentFactory;\nvar ChangeBrushColorFactory = (function (_super) {\n    __extends(ChangeBrushColorFactory, _super);\n    function ChangeBrushColorFactory() {\n        _super.apply(this, arguments);\n    }\n    ChangeBrushColorFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (node.localName === ChangeBrushColorFactory.NodeName) {\n            return new Command_1.ChangeBrushColor(new Color_1['default'](SVG_1.SVGA.attr(node, \"c\")), _super.prototype.getCmdTime.call(this, node, chunkStart));\n        }\n        return _super.prototype.FromSVG.call(this, node, chunkStart);\n    };\n    ChangeBrushColorFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (cmd instanceof Command_1.ChangeBrushColor) {\n            var cmdEl = SVG_1.SVGA.CreateElement(ChangeBrushColorFactory.NodeName, {\n                \"c\": cmd.Color.CssValue\n            });\n            _super.prototype.storeTime.call(this, cmdEl, cmd.Time - chunkStart);\n            return cmdEl;\n        }\n        return _super.prototype.ToSVG.call(this, cmd, chunkStart);\n    };\n    ChangeBrushColorFactory.NodeName = \"c\";\n    return ChangeBrushColorFactory;\n})(CommandFactory);\nexports.ChangeBrushColorFactory = ChangeBrushColorFactory;\nvar ChangeBrushSizeFactory = (function (_super) {\n    __extends(ChangeBrushSizeFactory, _super);\n    function ChangeBrushSizeFactory() {\n        _super.apply(this, arguments);\n    }\n    ChangeBrushSizeFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (node.localName === ChangeBrushSizeFactory.NodeName) {\n            return new Command_1.ChangeBrushSize(new Brush_1['default'](SVG_1.SVGA.numAttr(node, \"w\")), _super.prototype.getCmdTime.call(this, node, chunkStart));\n        }\n        return _super.prototype.FromSVG.call(this, node, chunkStart);\n    };\n    ChangeBrushSizeFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (cmd instanceof Command_1.ChangeBrushSize) {\n            var cmdEl = SVG_1.SVGA.CreateElement(ChangeBrushSizeFactory.NodeName, {\n                \"w\": cmd.Size.Size\n            });\n            _super.prototype.storeTime.call(this, cmdEl, cmd.Time - chunkStart);\n            return cmdEl;\n        }\n        return _super.prototype.ToSVG.call(this, cmd, chunkStart);\n    };\n    ChangeBrushSizeFactory.NodeName = \"s\";\n    return ChangeBrushSizeFactory;\n})(CommandFactory);\nexports.ChangeBrushSizeFactory = ChangeBrushSizeFactory;\nvar ClearCanvasFactory = (function (_super) {\n    __extends(ClearCanvasFactory, _super);\n    function ClearCanvasFactory() {\n        _super.apply(this, arguments);\n    }\n    ClearCanvasFactory.prototype.FromSVG = function (node, chunkStart) {\n        if (node.localName === ClearCanvasFactory.NodeName) {\n            return new Command_1.ClearCanvas(new Color_1['default'](SVG_1.SVGA.attr(node, \"c\")), _super.prototype.getCmdTime.call(this, node, chunkStart));\n        }\n        return _super.prototype.FromSVG.call(this, node, chunkStart);\n    };\n    ClearCanvasFactory.prototype.ToSVG = function (cmd, chunkStart) {\n        if (cmd instanceof Command_1.ClearCanvas) {\n            var cmdEl = SVG_1.SVGA.CreateElement(ClearCanvasFactory.NodeName, {\n                \"c\": cmd.Color.CssValue\n            });\n            _super.prototype.storeTime.call(this, cmdEl, cmd.Time - chunkStart);\n            return cmdEl;\n        }\n        return _super.prototype.ToSVG.call(this, cmd, chunkStart);\n    };\n    ClearCanvasFactory.NodeName = \"e\";\n    return ClearCanvasFactory;\n})(CommandFactory);\nexports.ClearCanvasFactory = ClearCanvasFactory;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoFormat/SVGAnimation/CommandFactories.ts\n **/","'use strict';\n\nvar Metadata_1 = require('../../VideoData/Metadata');\nvar SVG_1 = require('../../Helpers/SVG');\nvar AudioPlayer_1 = require('../../AudioData/AudioPlayer');\nvar MetadataFactory = (function () {\n    function MetadataFactory() {}\n    MetadataFactory.prototype.FromSVG = function (rootNode) {\n        var meta = new Metadata_1['default']();\n        if (rootNode.localName !== \"metadata\") {\n            throw new Error(\"MetadataFactory error parsing SVG: Wrong metadata element \" + rootNode.localName);\n        }\n        var length = rootNode.firstElementChild;\n        if (length.localName !== \"length\") {\n            throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\" + length.nodeName + \"'\");\n        }\n        meta.Length = Number(length.textContent);\n        var width = length.nextElementSibling;\n        length = null;\n        if (width.localName !== \"width\") {\n            throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\" + width.nodeName + \"'\");\n        }\n        meta.Width = Number(width.textContent);\n        var height = width.nextElementSibling;\n        width = null;\n        if (height.localName !== \"height\") {\n            throw new Error(\"MetadataFactory error parsing SVG: Expected 'length', found '\" + height.nodeName + \"'\");\n        }\n        meta.Height = Number(height.textContent);\n        meta.AudioTracks = [];\n        var audioElement = height.nextElementSibling;\n        var audioSource = audioElement.firstElementChild;\n        while (!!audioSource) {\n            var type = AudioPlayer_1.AudioSource.StringToType(SVG_1.SVGA.attr(audioSource, \"type\"));\n            meta.AudioTracks.push(new AudioPlayer_1.AudioSource(SVG_1.SVGA.attr(audioSource, \"src\"), type));\n            audioSource = audioSource.nextElementSibling;\n        }\n        return meta;\n    };\n    MetadataFactory.prototype.ToSVG = function (data) {\n        var meta = SVG_1['default'].CreateElement(\"metadata\");\n        var length = SVG_1.SVGA.CreateElement(\"length\");\n        length.textContent = data.Length.toFixed(3);\n        meta.appendChild(length);\n        length = null;\n        var width = SVG_1.SVGA.CreateElement(\"width\");\n        width.textContent = data.Width.toFixed(0);\n        meta.appendChild(width);\n        width = null;\n        var height = SVG_1.SVGA.CreateElement(\"height\");\n        height.textContent = data.Height.toFixed(0);\n        meta.appendChild(height);\n        height = null;\n        var audioElement = SVG_1.SVGA.CreateElement(\"audio\");\n        for (var i = 0; i < data.AudioTracks.length; i++) {\n            var audioSource = data.AudioTracks[i];\n            var source = SVG_1.SVGA.CreateElement(\"source\", {\n                \"type\": audioSource.MimeType,\n                \"src\": audioSource.Url\n            });\n            audioElement.appendChild(source);\n            source = null;\n        }\n        meta.appendChild(audioElement);\n        return meta;\n    };\n    return MetadataFactory;\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports['default'] = MetadataFactory;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader!./~/ts-loader!./src/VectorScreencast/VideoFormat/SVGAnimation/MetadataFactory.ts\n **/"],"sourceRoot":""}