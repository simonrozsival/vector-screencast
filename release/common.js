!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,a){for(var u,s,c=0,h=[];c<i.length;c++)s=i[c],o[s]&&h.push.apply(h,o[s]),o[s]=0;for(u in a)t[u]=a[u];for(n&&n(i,a);h.length;)h.shift().call(null,e);return a[0]?(r[0]=0,e(0)):void 0};var r={},o={0:0};e.e=function(t,n){if(0===o[t])return n.call(null,e);if(void 0!==o[t])o[t].push(n);else{o[t]=[n];var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=e.p+""+t+"."+({1:"recorder",2:"player"}[t]||t)+".js",r.appendChild(i)}},e.m=t,e.c=r,e.p=""}([,function(t,e){"use strict";!function(t){t[t.Start=0]="Start",t[t.Pause=1]="Pause",t[t.ReachEnd=2]="ReachEnd",t[t.JumpTo=3]="JumpTo",t[t.VideoInfoLoaded=4]="VideoInfoLoaded",t[t.BufferStatus=5]="BufferStatus",t[t.CursorState=6]="CursorState",t[t.ChangeColor=7]="ChangeColor",t[t.ChangeBrushSize=8]="ChangeBrushSize",t[t.StartPath=9]="StartPath",t[t.DrawSegment=10]="DrawSegment",t[t.DrawPath=11]="DrawPath",t[t.ClearCanvas=12]="ClearCanvas",t[t.RedrawCanvas=13]="RedrawCanvas",t[t.CanvasSize=14]="CanvasSize",t[t.CanvasScalingFactor=15]="CanvasScalingFactor",t[t.CursorOffset=16]="CursorOffset",t[t.RegisterRecordingTool=17]="RegisterRecordingTool",t[t.RecordingToolFinished=18]="RecordingToolFinished",t[t.MuteAudioRecording=19]="MuteAudioRecording",t[t.AudioRecordingAvailable=20]="AudioRecordingAvailable",t[t.AudioRecordingUnavailable=21]="AudioRecordingUnavailable",t[t.StartUpload=22]="StartUpload",t[t.DownloadData=23]="DownloadData",t[t.VolumeUp=24]="VolumeUp",t[t.VolumeDown=25]="VolumeDown",t[t.Mute=26]="Mute",t[t.Busy=27]="Busy",t[t.Ready=28]="Ready",t[t.length=29]="length"}(e.VideoEventType||(e.VideoEventType={}));var n=e.VideoEventType,r=function(){function t(t){this.type=t,this.listeners=new Array(0)}return Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),t.prototype.on=function(t){this.listeners.push(t)},t.prototype.off=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.trigger=function(t){for(var e=0;e<this.listeners.length;e++){var n=this.listeners[e];n.apply(this,t)}},t}(),o=function(){function t(){this.events=new Array(n.length)}return t.prototype.on=function(t,e){this.events[t]||(this.events[t]=new r(t)),this.events[t].on(e)},t.prototype.off=function(t,e){this.events[t]&&this.events[t].off(e)},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.events[t];r&&r.trigger(e)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o},function(t,e){"use strict";var n=function(){function t(){}return t.CreateElement=function(e,n,r){var o=document.createElement(e);if(n&&t.SetAttributes(o,n),r&&Array.isArray(r))for(var i in r)o.appendChild(r[i]);return o},t.SetAttributes=function(t,e){for(var n in e)t.setAttribute(n,e[n])},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=n(6),o=function(){function t(){}return Object.defineProperty(t,"Namespace",{get:function(){return this.namespace},enumerable:!0,configurable:!0}),t.CreateDot=function(t,e,n){return this.CreateElement("circle",{cx:r.precise(t.X),cy:r.precise(t.Y),r:r.precise(e),fill:n,stroke:"transparent"})},t.CreateCircle=function(t,e,n){return e>0?this.CreateElement("circle",{cx:r.precise(t.X),cy:r.precise(t.Y),r:r.precise(e),stroke:n,fill:"transparent","stroke-width":1}):null},t.CreateLine=function(t,e,n,o){return n>0?this.CreateElement("path",{fill:"transparent",stroke:o,"stroke-width":r.precise(n),d:this.MoveToString(t)+" "+this.LineToString(e)}):null},t.CreateElement=function(t,e){var n=document.createElementNS(this.namespace,t);return e&&this.SetAttributes(n,e),n},t.SetAttributes=function(t,e){t||console.log(e);for(var n in e)t.setAttributeNS(null,n,e[n])},t.MoveToString=function(t){return"M "+r.precise(t.X)+","+r.precise(t.Y)},t.LineToString=function(t){return"L "+r.precise(t.X)+","+r.precise(t.Y)},t.CurveToString=function(t,e,n){return"C "+r.precise(t.X)+","+r.precise(t.Y)+" "+r.precise(e.X)+","+r.precise(e.Y)+" "+r.precise(n.X)+","+r.precise(n.Y)},t.ArcString=function(t,e,n){return"A "+r.precise(e)+","+r.precise(e)+" "+n+" 0,0 "+r.precise(t.X)+","+r.precise(t.Y)},t.attr=function(t,e){var n=t.attributes.getNamedItemNS(null,e);if(n)return n.textContent;throw new Error("Attribute "+e+" is missing in "+t.localName)},t.numAttr=function(t,e){return Number(t.attributes.getNamedItemNS(null,e).textContent)},t.namespace="http://www.w3.org/2000/svg",t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=function(){function t(){}return Object.defineProperty(t,"Namespace",{get:function(){return this.namespace},enumerable:!0,configurable:!0}),t.CreateElement=function(t,e){var n=document.createElementNS(this.namespace,"a:"+t);return e&&this.SetAttributes(n,e),n},t.SetAttributes=function(t,e){t||console.log(e);for(var n in e){var r=document.createAttributeNS(this.namespace,"a:"+n);r.textContent=e[n],t.attributes.setNamedItemNS(r)}},t.attr=function(t,e,n){var r=t.attributes.getNamedItemNS(this.Namespace,e);if(r)return r.textContent;if(n)return n;throw new Error("Attribute "+e+" is missing in "+t.localName)},t.numAttr=function(e,n,r){return Number(t.attr(e,n,void 0!==r?r.toString():void 0))},t.namespace="http://www.rozsival.com/2015/vector-screencast",t}();e.SVGA=i},function(t,e){"use strict";var n=function(){function t(t,e){this.x=t,this.y=e}return Object.defineProperty(t.prototype,"X",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Y",{get:function(){return this.y},enumerable:!0,configurable:!0}),t.prototype.isEqualTo=function(t){return this.X===t.X&&this.Y===t.Y},t.prototype.getSize=function(){return Math.sqrt(this.getSizeSq())},t.prototype.getSizeSq=function(){return this.x*this.x+this.y*this.y},t.prototype.distanceTo=function(t){var e=this.x-t.X,n=this.y-t.Y;return Math.sqrt(e*e+n*n)},t.prototype.normalize=function(){var t=this.getSize();if(0===t)throw new Error("Can't normalize zero vector.");return this.scale(1/t),this},t.prototype.getNormal=function(){return new t(-this.y,this.x).normalize()},t.prototype.add=function(t){return this.x+=t.X,this.y+=t.Y,this},t.prototype.subtract=function(t){return this.x-=t.X,this.y-=t.Y,this},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.prototype.pointInBetween=function(e){return new t((this.x+e.X)/2,(this.y+e.Y)/2)},t.prototype.clone=function(){return new t(this.x,this.y)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(2),i=function(){function t(t,e){t instanceof HTMLElement?this.element=t:this.element=o["default"].CreateElement(t),e&&(this.element.textContent=e)}return t.prototype.GetHTML=function(){return this.element},t.prototype.HasClass=function(t){return this.GetHTML().classList.contains(t)},t.prototype.AddClass=function(t){return this.AddClasses(t)},t.prototype.AddClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.add(t[n]);return this},t.prototype.RemoveClass=function(t){return this.RemoveClasses(t)},t.prototype.RemoveClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.remove(t[n]);return this},t}();e.SimpleElement=i;var a=function(t){function e(e,n){t.call(this,"button"),this.AddClass("ui-button"),this.content=new i("span",e),this.GetHTML().appendChild(this.content.GetHTML()),n&&(this.GetHTML().onclick=n)}return r(e,t),e.prototype.ChangeContent=function(t){return this.content.GetHTML().innerHTML=t,this},e}(i);e.Button=a;var u=function(t){function e(e,n,r){t.call(this,n,r),this.iconClass=e,this.icon=new i("span","").AddClasses("icon",e),this.AddClass("has-icon"),this.GetHTML().appendChild(this.icon.GetHTML())}return r(e,t),e.prototype.ChangeIcon=function(t){return this.icon.RemoveClass(this.iconClass).AddClass(t),this.iconClass=t,this},e}(a);e.IconButton=u;var s=function(t){function e(e,n,r){t.call(this,e,"",r),this.ChangeContent(n),this.AddClass("icon-only-button")}return r(e,t),e.prototype.ChangeContent=function(t){return o["default"].SetAttributes(this.GetHTML(),{title:t}),this},e}(u);e.IconOnlyButton=s;var c=function(t){function e(e,n){t.call(this,"h"+e,n)}return r(e,t),e}(i);e.Heading=c;var h=function(t){function e(e){t.call(this,2,e)}return r(e,t),e}(c);e.H2=h;var l=function(){function t(t,e){this.element=o["default"].CreateElement(t),e&&o["default"].SetAttributes(this.element,{id:e}),this.elements=[]}return Object.defineProperty(t.prototype,"Children",{get:function(){return this.elements},enumerable:!0,configurable:!0}),t.prototype.AddChild=function(t){return this.AddChildren(t)},t.prototype.AddChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.elements.push(t[n]),this.GetHTML().appendChild(t[n].GetHTML());return this},t.prototype.GetHTML=function(){return this.element},t.prototype.HasClass=function(t){return this.GetHTML().classList.contains(t)},t.prototype.AddClass=function(t){return this.AddClasses(t)},t.prototype.AddClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.add(t[n]);return this},t.prototype.RemoveClass=function(t){return this.RemoveClasses(t)},t.prototype.RemoveClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0;n<t.length;n++)this.GetHTML().classList.remove(t[n]);return this},t}();e.Panel=l},function(t,e){"use strict";function n(t,e){return void 0===e&&(e=a),Number(t.toFixed(e))}function r(t,e){return void 0===e&&(e=a),n(t,e).toString()}function o(t){var e,n=Math.floor(t/60);e=n+":";var r=Math.floor(t%60);return e+=9>=r?"0"+r.toString(10):r.toString(10)}function i(t){return o(Math.floor(t/1e3))}var a=3;e.maxDecPlaces=n,e.precise=r,e.secondsToString=o,e.millisecondsToString=i},function(t,e){"use strict";var n=function(){function t(t){this.cssValue=t}return Object.defineProperty(t.prototype,"CssValue",{get:function(){return this.cssValue},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BackgroundColor",{get:function(){return new t(this.backgroundPrototype.CssValue)},set:function(t){this.backgroundPrototype=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ForegroundColor",{get:function(){return new t(this.foregroundPrototype.CssValue)},set:function(t){this.foregroundPrototype=t},enumerable:!0,configurable:!0}),t.backgroundPrototype=new t("#111"),t.foregroundPrototype=new t("#fff"),t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";!function(t){t[t.Warning=0]="Warning",t[t.Fatal=1]="Fatal"}(e.ErrorType||(e.ErrorType={}));var n=e.ErrorType,r=function(){function t(){}return t.TurnOn=function(){this.doLog=!0},t.TurnOff=function(){this.doLog=!1},t.SetLogFunction=function(t){this.LogFunction=t},t.Report=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.doLog&&this.LogFunction(t,e)},t.ErrorTypeName=function(t){switch(t){case n.Warning:return"Warning";case n.Fatal:return"Fatal error";default:return"Unknown error type"}},t.doLog=!0,t.LogFunction=function(e,r){if(e===n.Fatal)throw new Error("Fatal Error: "+r.join("; "));console.log(t.ErrorTypeName(e),r)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(1),i=function(){function t(t,e){this.time=t,this.lastErase=e,this.initCommands=[],this.commands=[],this.cmdIterator=0}return Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastErase",{get:function(){return this.lastErase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentCommand",{get:function(){return this.commands[this.cmdIterator]},enumerable:!0,configurable:!0}),t.prototype.PeekNextCommand=function(){return this.commands[this.cmdIterator+1]},t.prototype.MoveNextCommand=function(){this.cmdIterator++},t.prototype.Rewind=function(){this.cmdIterator=0},t.prototype.ExecuteInitCommands=function(t){for(var e=0;e<this.initCommands.length;e++)this.initCommands[e].Execute(t)},t.prototype.GetCommand=function(t){return t<this.commands.length?this.commands[t]:null},t.prototype.PushCommand=function(t){this.commands.push(t)},Object.defineProperty(t.prototype,"Commands",{get:function(){return this.commands},set:function(t){this.commands=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InitCommands",{get:function(){return this.initCommands},set:function(t){this.initCommands=t},enumerable:!0,configurable:!0}),t.prototype.Render=function(t){throw new Error("Not implemented")},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.Render=function(){},e}(i);e.VoidChunk=a;var u=function(t){function e(e,n,r){t.call(this,n,r),this.path=e}return r(e,t),Object.defineProperty(e.prototype,"Path",{get:function(){return this.path},enumerable:!0,configurable:!0}),e.prototype.Render=function(t){t.trigger(o.VideoEventType.DrawPath)},e}(i);e.PathChunk=u;var s=function(t){function e(e,n,r){t.call(this,n,r),this.color=e}return r(e,t),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),e.prototype.ExecuteInitCommands=function(e){this.Render(e),t.prototype.ExecuteInitCommands.call(this,e)},e.prototype.Render=function(t){t.trigger(o.VideoEventType.ClearCanvas,this.color)},e}(i);e.EraseChunk=s},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(1),i=n(17),a=function(){function t(t){this.time=t}return Object.defineProperty(t.prototype,"Time",{get:function(){return this.time},enumerable:!0,configurable:!0}),t.prototype.Execute=function(t){throw new Error("Not implemented")},t.prototype.Clone=function(){throw new Error("Not implemented")},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var u=function(t){function e(e,n,r,o){t.call(this,o),this.x=e,this.y=n,this.p=r}return r(e,t),Object.defineProperty(e.prototype,"X",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"P",{get:function(){return this.p},enumerable:!0,configurable:!0}),e.prototype.Execute=function(t){t.trigger(o.VideoEventType.CursorState,new i.CursorState(this.Time,this.x,this.y,this.p))},e.prototype.Clone=function(){return new e(this.x,this.y,this.p,this.Time)},e}(a);e.MoveCursor=u;var s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.Execute=function(t){t.trigger(o.VideoEventType.DrawSegment)},e.prototype.Clone=function(){return new e(this.Time)},e}(a);e.DrawNextSegment=s;var c=function(t){function e(e,n){t.call(this,n),this.color=e}return r(e,t),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),e.prototype.Execute=function(t){t.trigger(o.VideoEventType.ChangeColor,this.color)},e.prototype.Clone=function(){return new e(this.color,this.Time)},e}(a);e.ChangeBrushColor=c;var h=function(t){function e(e,n){t.call(this,n),this.size=e}return r(e,t),Object.defineProperty(e.prototype,"Size",{get:function(){return this.size},enumerable:!0,configurable:!0}),e.prototype.Execute=function(t){t.trigger(o.VideoEventType.ChangeBrushSize,this.size)},e.prototype.Clone=function(){return new e(this.size,this.Time)},e}(a);e.ChangeBrushSize=h;var l=function(t){function e(e,n){t.call(this,n),this.color=e}return r(e,t),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),e.prototype.Execute=function(t){t.trigger(o.VideoEventType.ClearCanvas,this.color)},e.prototype.Clone=function(){return new e(this.color,this.Time)},e}(a);e.ClearCanvas=l},function(t,e,n){"use strict";var r=n(1),o=n(8),i=n(2);!function(t){t[t.MP3=0]="MP3",t[t.OGG=1]="OGG",t[t.WAV=2]="WAV"}(e.AudioSourceType||(e.AudioSourceType={}));var a=e.AudioSourceType,u=function(){function t(t,e){this.url=t,this.type=e}return Object.defineProperty(t.prototype,"Url",{get:function(){return this.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MimeType",{get:function(){switch(this.type){case a.MP3:return"audio/mp3";case a.OGG:return"audio/ogg";case a.WAV:return"audio/wav";default:return null}},enumerable:!0,configurable:!0}),t.StringToType=function(t){switch(t){case"audio/mp3":return a.MP3;case"audio/wav":return a.WAV;case"audio/ogg":return a.OGG;default:throw new Error("Unknown audio type "+t)}},t}();e.AudioSource=u;var s=function(){function t(t,e){this.events=t,this.audio=this.CreateAudio(e),null===this.audio?this.isReady=!1:(this.playing=!1,this.reachedEnd=!1,this.InitAudio(),this.isReady=!0,document.documentElement.appendChild(this.audio),console.log("Audio is available."))}return Object.defineProperty(t.prototype,"IsReady",{get:function(){return this.isReady},enumerable:!0,configurable:!0}),t.prototype.CreateAudio=function(t){try{var e=new Audio;if(!e.canPlayType)return o["default"].Report(o.ErrorType.Warning,"AudioPlayer: browser does not support HTML5 audio"),null;for(var n=!1,r=0;r<t.length;r++){var a=t[r];if("probably"===e.canPlayType(a.MimeType)){var u=i["default"].CreateElement("source",{src:a.Url,type:a.MimeType});e.appendChild(u),n=!0}}if(n===!1)for(var r=0;r<t.length;r++){var a=t[r];if("maybe"===e.canPlayType(a.MimeType)){var u=i["default"].CreateElement("source",{src:a.Url,type:a.MimeType});e.appendChild(u),n=!0}}return n===!1?(o["default"].Report(o.ErrorType.Warning,"Browser can't play any of available audio sources.",t),null):e}catch(s){return o["default"].Report(o.ErrorType.Warning,"AudioPlayer: can't create audio element",s),null}},t.prototype.InitAudio=function(){var t=this;this.audio.onended=function(){return t.events.trigger(r.VideoEventType.ReachEnd)},this.audio.onwaiting=function(){return t.Busy()},this.audio.oncanplay=function(){return t.Ready()},this.events.on(r.VideoEventType.Mute,function(){return t.Mute()}),this.events.on(r.VideoEventType.VolumeUp,function(){return t.VolumeUp()}),this.events.on(r.VideoEventType.VolumeDown,function(){return t.VolumeDown()}),this.MonitorBufferingAsync()},t.prototype.Busy=function(){this.playing&&(this.triggeredBusyState=!0,this.events.trigger(r.VideoEventType.Pause))},t.prototype.Ready=function(){this.triggeredBusyState&&(this.events.trigger(r.VideoEventType.Ready),this.triggeredBusyState=!1)},t.prototype.Play=function(){this.isReady&&(1==this.reachedEnd&&this.Rewind(),this.audio.play())},t.prototype.InitiatePlay=function(){this.events.trigger(r.VideoEventType.Start)},t.prototype.Pause=function(){this.isReady&&this.audio.pause()},t.prototype.ReachedEnd=function(){this.reachedEnd=!0,this.Pause()},t.prototype.Replay=function(){this.Rewind(),this.Play()},t.prototype.Rewind=function(){this.isReady&&(this.audio.pause(),this.audio.currentTime=0,this.reachedEnd=!1)},t.prototype.MonitorBufferingAsync=function(){var t=this,e=0;this.checkPreloaded=setInterval(function(){var n=t.audio.buffered.end(t.audio.buffered.length-1);n!==e&&(t.events.trigger(r.VideoEventType.BufferStatus,n),e=n),n===t.audio.duration&&clearInterval(t.checkPreloaded)},300)},t.prototype.JumpTo=function(t){if(this.isReady){this.reachedEnd=!1;var e=this.audio.duration*t;this.ChangePosition(e),clearInterval(this.checkPreloaded),this.MonitorBufferingAsync()}},t.prototype.ChangePosition=function(t){this.audio.currentTime=t},t.prototype.Mute=function(){this.audio.muted=!this.audio.muted},t.prototype.VolumeUp=function(){this.audio.volume=Math.min(1,this.audio.volume+.1)},t.prototype.VolumeDown=function(){this.audio.volume=Math.max(0,this.audio.volume-.1)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(3),i=n(4),a=n(1),u=n(16),s=n(14),c=function(){function t(t,e,n,r){this.events=t,this.curved=e,this.color=n,this.wireframe=r,void 0===this.wireframe&&(this.wireframe=!1),this.segments=[],this.pathPoints=[]}return Object.defineProperty(t.prototype,"Segments",{get:function(){return this.segments},set:function(t){this.segments=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastDrawnSegment",{get:function(){return this.lastDrawnSegment},set:function(t){this.lastDrawnSegment=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastPoint",{get:function(){return this.pathPoints[this.iterator]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastButOnePoint",{get:function(){return this.pathPoints[Math.max(0,this.iterator-1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastButTwoPoint",{get:function(){return this.pathPoints[Math.max(0,this.iterator-2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),t.prototype.StartPath=function(t,e){this.segments=[new s.ZeroLengthSegment(t.clone().add(new i["default"](0,e)),t.clone().add(new i["default"](0,-e)))],this.startPosition=t,this.startRadius=e,this.iterator=-1,this.DrawStartDot(t,e),this.lastDrawnSegment=this.segments[0]},t.prototype.DrawStartDot=function(t,e){throw new Error("Not impelmented")},t.prototype.InitPath=function(t,e){this.segments=[new s.ZeroLengthSegment(e,t)],this.pathPoints.push({Left:e,Right:t}),this.iterator=0},t.prototype.StartDrawingPath=function(t){this.DrawStartDot(t.Left.pointInBetween(t.Right),t.Left.distanceTo(t.Right)/2),this.lastDrawnSegment=t},t.prototype.ExtendPath=function(t,e){var n=this.pathPoints[this.pathPoints.length-1];if(!n.Left.isEqualTo(e)||!n.Right.isEqualTo(t)){var r=this.CalculateSegment(t,e);this.DrawSegment(r),this.events.trigger(a.VideoEventType.DrawSegment,r),this.segments.push(r),this.pathPoints.push({Left:e,Right:t}),this.iterator++}},t.prototype.CalculateSegment=function(t,e){return this.curved?this.CalculateCurvedSegment(t,e):this.CalculateQuarilateralSegment(t,e)},t.prototype.CalculateCurvedSegment=function(t,e){var n=u.Spline.catmullRomToBezier(this.LastButTwoPoint.Left,this.LastButOnePoint.Left,this.LastPoint.Left,e),r=u.Spline.catmullRomToBezier(this.LastButTwoPoint.Right,this.LastButOnePoint.Right,this.LastPoint.Right,t),o=new s.CurvedSegment(n,r);return this.DrawCurvedSegment(o),o},t.prototype.DrawCurvedSegment=function(t){throw new Error("Not implemented")},t.prototype.CalculateQuarilateralSegment=function(t,e){return new s.QuadrilateralSegment(e,t)},t.prototype.DrawQuadrilateralSegment=function(t){throw new Error("Not implemented")},t.prototype.Draw=function(){},t.prototype.DrawSegment=function(t){t instanceof s.CurvedSegment?this.DrawCurvedSegment(t):t instanceof s.QuadrilateralSegment&&this.DrawQuadrilateralSegment(t),this.lastDrawnSegment=t},t.angle=function(t){return Math.atan2(-t.X,t.Y)-Math.PI/2},t.prototype.DrawWholePath=function(){if(this.iterator=0,0!==this.segments.length){var t=this.segments[0].Left.clone().add(this.segments[0].Right).scale(.5),e=t.distanceTo(this.segments[0].Left);for(this.DrawStartDot(t,e),this.lastDrawnSegment=this.segments[0];this.iterator<this.segments.length;)this.DrawSegment(this.segments[this.iterator++]);this.Draw()}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c;var h=function(t){function e(e,n,r,o){t.call(this,e,n,r),this.canvas=o}return r(e,t),e.prototype.DrawStartDot=function(t,e){this.path=this.CreatePathElement();var n=new i["default"](t.X-e,t.Y),r=new i["default"](t.X+e,t.Y),a=r.pointInBetween(n),u=n.clone().subtract(a),s=r.clone().subtract(a),h=o["default"].ArcString(r,a.distanceTo(r),c.angle(u));this.right=o["default"].MoveToString(r),this.left=o["default"].LineToString(n)+" "+h,this.cap=o["default"].ArcString(n,a.distanceTo(n),c.angle(s)),o["default"].SetAttributes(this.path,{d:this.right+this.cap+this.left}),this.canvas.appendChild(this.path)},e.prototype.InitPath=function(e,n){t.prototype.InitPath.call(this,e,n),this.StartDrawingPath(this.segments[0])},e.prototype.CreatePathElement=function(){var t;return t=this.wireframe?{stroke:this.color,"stroke-width":1}:{fill:this.color},o["default"].CreateElement("path",t)},e.prototype.DrawCurvedSegment=function(t){this.right+=o["default"].CurveToString(t.RightBezier.StartCP,t.RightBezier.EndCP,t.RightBezier.End),this.left=o["default"].CurveToString(t.LeftBezier.EndCP,t.LeftBezier.StartCP,t.LeftBezier.Start)+" "+this.left;var e=t.Right.pointInBetween(t.Left),n=t.Right.clone().subtract(e);this.cap=o["default"].ArcString(t.Left,e.distanceTo(t.Left),c.angle(n))},e.prototype.DrawQuadrilateralSegment=function(t){this.right+=o["default"].LineToString(t.Right),this.left=o["default"].LineToString(this.lastDrawnSegment.Left)+" "+this.left;var e=t.Right.pointInBetween(t.Left),n=t.Right.clone().subtract(e);this.cap=o["default"].ArcString(t.Left,e.distanceTo(t.Left),c.angle(n))},e.prototype.GetPathString=function(){return this.right+this.cap+this.left},e.prototype.Draw=function(){o["default"].SetAttributes(this.path,{d:this.GetPathString()})},e}(c);e.SvgPath=h;var l=function(t){function e(e,n,r,o){t.call(this,e,n,r),this.context=o,this.context.fillStyle=this.color}return r(e,t),e.prototype.DrawStartDot=function(t,e){this.context.beginPath(),this.DrawDot(t,e),this.Draw()},e.prototype.DrawDot=function(t,e){this.context.arc(t.X,t.Y,e,0,2*Math.PI,!0)},e.prototype.DrawQuadrilateralSegment=function(t){this.context.moveTo(this.lastDrawnSegment.Right.X,this.lastDrawnSegment.Right.Y),this.context.lineTo(this.lastDrawnSegment.Left.X,this.lastDrawnSegment.Left.Y),this.context.lineTo(t.Left.X,t.Left.Y);var e=t.Left.pointInBetween(t.Right),n=t.Right.clone().subtract(e),r=t.Left.clone().subtract(e);this.context.arc(e.X,e.Y,e.distanceTo(t.Left),c.angle(n),c.angle(r),!1)},e.prototype.DrawCurvedSegment=function(t){this.context.moveTo(t.RightBezier.Start.X,t.RightBezier.Start.Y),this.context.lineTo(t.LeftBezier.Start.X,t.LeftBezier.Start.Y),this.context.bezierCurveTo(t.LeftBezier.StartCP.X,t.LeftBezier.StartCP.Y,t.LeftBezier.EndCP.X,t.LeftBezier.EndCP.Y,t.LeftBezier.End.X,t.LeftBezier.End.Y);var e=t.RightBezier.End.pointInBetween(t.LeftBezier.End),n=t.RightBezier.End.clone().subtract(e),r=t.LeftBezier.End.clone().subtract(e);this.context.arc(e.X,e.Y,e.distanceTo(t.LeftBezier.End),c.angle(n),c.angle(r),!1),this.context.bezierCurveTo(t.RightBezier.EndCP.X,t.RightBezier.EndCP.Y,t.RightBezier.StartCP.X,t.RightBezier.StartCP.Y,t.RightBezier.Start.X,t.RightBezier.Start.Y)},e.prototype.Draw=function(){this.context.closePath(),this.context.fill(),this.context.beginPath()},e}(c);e.CanvasPath=l},,function(t,e){"use strict";var n=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(){function t(){}return Object.defineProperty(t.prototype,"Left",{get:function(){throw new Error("Not implemented")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Right",{get:function(){throw new Error("Not implemented")},enumerable:!0,configurable:!0}),t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=function(t){function e(e,n){t.call(this),this.left=e,this.right=n}return n(e,t),Object.defineProperty(e.prototype,"Left",{get:function(){return this.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Right",{get:function(){return this.right},enumerable:!0,configurable:!0}),e}(r);e.QuadrilateralSegment=o;var i=function(t){function e(e,n){t.call(this,e,n)}return n(e,t),e}(o);e.ZeroLengthSegment=i;var a=function(t){function e(e,n){t.call(this),this.left=e,this.right=n}return n(e,t),Object.defineProperty(e.prototype,"Left",{get:function(){return this.left.End},set:function(t){this.left.End=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Right",{get:function(){return this.right.End},set:function(t){this.right.End=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeftBezier",{get:function(){return this.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RightBezier",{get:function(){return this.right},enumerable:!0,configurable:!0}),e}(r);e.CurvedSegment=a},function(t,e,n){"use strict";var r=n(2),o=function(){function t(){}return t.Check=function(t,e){return 200===t.status&&e?t.getResponseHeader("ContentType")===e:!0},t.Exists=function(t,e){var n=new XMLHttpRequest;return n.open("HEAD",t,!1),n.send(),this.Check(n,e)},t.ExistsAsync=function(t,e,n,r){var o=this,i=new XMLHttpRequest;i.open("HEAD",t,!0),i.onerror=n,i.ontimeout=n,i.onload=function(t){o.Check(i,r)?e(t):n(t)},i.send()},t.ReadFileAsync=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onerror=function(t){return n(r.status)},r.ontimeout=function(t){return n(r.status)},r.onload=function(t){200===r.status?e(r.responseXML?r.responseXML:r.response):n(r.status)},r.send()},t.ReadXmlAsync=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onerror=function(t){return n(r.status)},r.ontimeout=function(t){return n(r.status)},r.onload=function(t){200===r.status?e(r.responseXML):n(r.status)},r.send()},t.Download=function(t,e){var n=r["default"].CreateElement("a",{css:"display: none"});document.documentElement.appendChild(n);var o=URL.createObjectURL(t);r["default"].SetAttributes(n,{href:o,download:e}),n.click(),URL.revokeObjectURL(o)},t.CurrentDateTime=function(){return new Date,"$(date.getMonth())-$(date.getDay())-$(date.getFullYear())_$(date.getHour())-$(date.getMinute())"},t.StartDownloadingWav=function(e){t.Download(e,"recording-"+t.CurrentDateTime()+".wav")},t.StartDownloadingXml=function(e){var n=new Blob([e],{type:"text/xml"});t.Download(n,"data-"+t.CurrentDateTime()+".xml")},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o},function(t,e,n){"use strict";var r=n(4),o=function(){function t(){}return t.catmullRomToBezier=function(t,e,n,o){return new i(e,new r["default"](-1/6*t.X+e.X+1/6*n.X,-1/6*t.Y+e.Y+1/6*n.Y),n,new r["default"](1/6*e.X+n.X+-1/6*o.X,1/6*e.Y+n.Y+-1/6*o.Y))},t}();e.Spline=o;var i=function(){function t(t,e,n,r){this.start=t,this.startCP=e,this.end=n,this.endCP=r}return Object.defineProperty(t.prototype,"Start",{get:function(){return this.start},set:function(t){this.start=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartCP",{get:function(){return this.startCP},set:function(t){this.startCP=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"End",{get:function(){return this.end},set:function(t){this.end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndCP",{get:function(){return this.endCP},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndCp",{set:function(t){this.endCP=t},enumerable:!0,configurable:!0}),t}();e.BezierCurveSegment=i},function(t,e,n){"use strict";var r=function(t,e){function n(){
this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4);!function(t){t[t.ChangeBrushSize=0]="ChangeBrushSize",t[t.ChangeColor=1]="ChangeColor",t[t.Cursor=2]="Cursor"}(e.StateType||(e.StateType={}));var i=e.StateType,a=function(){function t(t,e){this.type=t,this.time=e}return t.prototype.GetType=function(){return this.type},t.prototype.GetTime=function(){return this.time},t}();e.State=a;var u=function(t){function e(e,n,r,o){t.call(this,i.Cursor,e),this.x=n,this.y=r,this.pressure=o}return r(e,t),Object.defineProperty(e.prototype,"X",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Pressure",{get:function(){return this.pressure},enumerable:!0,configurable:!0}),e.prototype.getPosition=function(){return new o["default"](this.x,this.y)},e}(a);e.CursorState=u;var s=function(t){function e(e,n){t.call(this,i.ChangeColor,e),this.color=n}return r(e,t),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),e}(a);e.ColorState=s;var c=function(t){function e(e,n){t.call(this,i.ChangeBrushSize,e),this.size=n}return r(e,t),Object.defineProperty(e.prototype,"Size",{get:function(){return this.size},enumerable:!0,configurable:!0}),e}(a);e.SizeState=c},function(t,e){"use strict";var n=function(){function t(t){this.pauseTime=0,window.performance?this.clock=window.performance:this.clock=Date,this.paused=!t,this.Reset()}return Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),t.prototype.CurrentTime=function(){return this.paused?this.pauseTime:this.clock.now()-this.startTime},t.prototype.SetTime=function(t){this.paused?this.pauseTime=t:this.startTime=this.clock.now()-t},t.prototype.Pause=function(){this.pauseTime=this.CurrentTime(),this.paused=!0},t.prototype.Resume=function(){this.paused=!1,this.Reset(),this.SetTime(this.pauseTime)},t.prototype.Reset=function(){this.startTime=this.clock.now()},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(1),i=n(2),a=n(5),u=n(31),s=function(t){function e(e,n){var r=this;t.call(this,"div",e),this.events=n,i["default"].SetAttributes(this.GetHTML(),{"class":"vector-video-board"}),this.cursor=new u["default"](n),this.AddChild(this.cursor),i["default"].SetAttributes(this.GetHTML(),{position:"relative"}),n.on(o.VideoEventType.CursorState,function(t){return r.UpdateCursorPosition(t)}),n.on(o.VideoEventType.CursorState,function(t){return r.UpdateCursorPosition(t)}),n.on(o.VideoEventType.ChangeBrushSize,function(t){return r.UpdateCursorSize(t)}),n.on(o.VideoEventType.ChangeColor,function(t){return r.UpdateCursorColor(t)}),n.on(o.VideoEventType.ChangeColor,function(t){return r.UpdateCursorColor(t)}),n.on(o.VideoEventType.CanvasScalingFactor,function(t){return r.UpdateCursorScale(t)}),n.on(o.VideoEventType.CursorOffset,function(t){return r.cursor.Offset=t})}return r(e,t),Object.defineProperty(e.prototype,"Width",{get:function(){return this.GetHTML().clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.GetHTML().clientHeight},set:function(t){this.GetHTML().clientHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsRecording",{set:function(t){t?this.GetHTML().classList.add("recording"):this.GetHTML().classList.remove("recording")},enumerable:!0,configurable:!0}),e.prototype.UpdateCursorPosition=function(t){this.cursor.MoveTo(t.X,t.Y)},e.prototype.UpdateCursorSize=function(t){this.cursor.ChangeSize(t)},e.prototype.UpdateCursorColor=function(t){this.cursor.ChangeColor(t)},e.prototype.UpdateCursorScale=function(t){this.cursor.SetScalingFactor(t)},e}(a.Panel);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e){"use strict";var n=function(){function t(t){this.size=t}return Object.defineProperty(t.prototype,"Size",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Unit",{get:function(){return"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CssValue",{get:function(){return""+this.Size+this.Unit},enumerable:!0,configurable:!0}),t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(){}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,function(t,e){"use strict";var n=function(){function t(){this.chunks=[]}return Object.defineProperty(t.prototype,"Metadata",{get:function(){return this.metadata},set:function(t){this.metadata=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentChunk",{get:function(){return this.chunks[this.currentChunk]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentChunkNumber",{get:function(){return this.currentChunk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SetCurrentChunkNumber",{set:function(t){this.currentChunk=t},enumerable:!0,configurable:!0}),t.prototype.PeekNextChunk=function(){return this.chunks[this.currentChunk+1]},t.prototype.MoveNextChunk=function(){this.currentChunk++,this.CurrentChunk&&this.CurrentChunk.Rewind()},t.prototype.PushChunk=function(t){return this.currentChunk=this.chunks.push(t)-1,this.currentChunk},t.prototype.Rewind=function(){this.currentChunk=0},t.prototype.RewindMinusOne=function(){this.currentChunk=-1},t.prototype.FastforwardErasedChunksUntil=function(t){var e=this.FindChunk(t,1);return Math.max(this.currentChunk,this.chunks[e].LastErase)},t.prototype.RewindToLastEraseBefore=function(t){var e=this.FindChunk(t,-1);return this.chunks[e].LastErase},t.prototype.FindChunk=function(t,e){for(var n=Math.min(this.currentChunk,this.chunks.length-2);this.chunks[n]&&this.chunks[n+1]&&0==(this.chunks[n].StartTime<=t&&this.chunks[n+1].StartTime>=t);)n+=e;return 0>n?0:n},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=n(24),o=n(9),i=n(38),a=n(39),u=n(40),s=n(3),c=function(){function t(){this.VideoChunksLayerType="video-chunks",this.commandFactory=new a.MoveCursorFactory(new a.DrawSegmentFactory(new a.ChangeBrushColorFactory(new a.ChangeBrushSizeFactory(new a.ClearCanvasFactory)))),this.eraseChunkFactory=new i.EraseChunkFactory,this.chunkFactory=new i.VoidChunkFactory(new i.PathChunkFactory(this.eraseChunkFactory)),this.metadataFactory=new u["default"]}return t.prototype.SaveVideo=function(t){var e=document.implementation.createDocumentType("svg:svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),n=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",e);n.documentElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:a",s.SVGA.Namespace),s["default"].SetAttributes(n.rootElement,{width:t.Metadata.Width,height:t.Metadata.Height,viewBox:"0 0 "+t.Metadata.Width+" "+t.Metadata.Height}),n.rootElement.appendChild(this.metadataFactory.ToSVG(t.Metadata)),this.eraseChunkFactory.Width=t.Metadata.Width,this.eraseChunkFactory.Height=t.Metadata.Height;var r=s["default"].CreateElement("g");for(s.SVGA.SetAttributes(r,{type:this.VideoChunksLayerType}),t.Rewind();t.CurrentChunk;)r.appendChild(this.chunkFactory.ToSVG(t.CurrentChunk,this.commandFactory)),t.MoveNextChunk();n.rootElement.appendChild(r);var o=new XMLSerializer;return new Blob([o.serializeToString(n)],{type:"application/svg+xml"})},t.prototype.LoadVideo=function(t,e){if(e instanceof Document==0)throw new Error("SVGAnimation IO parsing error: Document must be an XML document");var n=e;if(2!==n.documentElement.childElementCount)throw new Error("SVGAnimation document root element must have exactely two children nodes, but has "+n.documentElement.childNodes.length+" instead");var i=new r["default"],a=n.documentElement.firstElementChild;i.Metadata=this.metadataFactory.FromSVG(a);var u=a.nextElementSibling;if("g"!==u.localName||s.SVGA.attr(u,"type")!==this.VideoChunksLayerType)throw new Error("SVGAnimation IO parsing error: chunks layer must be a SVG <g> node with a:type='"+this.VideoChunksLayerType+"',"+(" got <"+u.localName+"> with a:type='"+s.SVGA.attr(u,"type")+"'"));for(var c=0,h=0,l=u.firstElementChild;l;){var p=this.chunkFactory.FromSVG(t,l,this.commandFactory);p.LastErase=c,i.PushChunk(p),p instanceof o.EraseChunk&&(c=h),l=l.nextElementSibling,h++}return i.Rewind(),i},t.prototype.GetExtension=function(){return"svg"},t.prototype.GetMimeType=function(){return"application/svg+xml"},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c},,,,,,function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),i=n(5),a=n(1),u=n(3),s=n(7),c=function(t){function e(e){t.call(this,"div"),this.events=e,this.radius=20,this.stroke=3,this.position=new o["default"](0,0),this.offset=new o["default"](0,0),this.CreateHTML(),this.scalingFactor=1,this.size=null}return r(e,t),Object.defineProperty(e.prototype,"Offset",{set:function(t){this.offset=t},enumerable:!0,configurable:!0}),e.prototype.CreateHTML=function(){var t=this;this.svg=u["default"].CreateElement("svg",{width:2*this.radius,height:2*this.radius}),this.GetHTML().appendChild(this.svg),this.bgColor=s["default"].BackgroundColor,this.color=s["default"].ForegroundColor,this.dot=u["default"].CreateDot(new o["default"](this.radius,this.radius),this.radius-this.stroke,this.bgColor.CssValue),u["default"].SetAttributes(this.dot,{stroke:this.color.CssValue,"stroke-width":this.stroke}),this.svg.appendChild(this.dot),this.GetHTML().style.position="absolute",this.GetHTML().style.background="transparent",this.GetHTML().style.lineHeight="0",this.events.on(a.VideoEventType.ClearCanvas,function(e){t.bgColor=e,u["default"].SetAttributes(t.dot,{fill:t.bgColor.CssValue}),t.ChangeColor(t.color)})},e.prototype.MoveTo=function(t,e){this.GetHTML().style.left=t*this.scalingFactor-this.radius-this.stroke+this.offset.X+"px",this.GetHTML().style.top=e*this.scalingFactor-this.radius-this.stroke+this.offset.Y+"px",this.position=new o["default"](t,e)},e.prototype.ChangeColor=function(t){t.CssValue===this.bgColor.CssValue&&(t=t.CssValue===s["default"].ForegroundColor.CssValue?s["default"].BackgroundColor:s["default"].ForegroundColor),u["default"].SetAttributes(this.dot,{stroke:t.CssValue}),this.color=t},e.prototype.ChangeSize=function(t){this.size=t;var e=this.radius;this.radius=t.Size*this.scalingFactor/2-2;var n=2*(this.radius+this.stroke);u["default"].SetAttributes(this.svg,{width:n,height:n});var r=e-this.radius;this.MoveTo(this.position.X+r,this.position.Y+r),u["default"].SetAttributes(this.dot,{cx:n/2,cy:n/2,r:Math.max(1,this.radius-this.stroke)})},e.prototype.SetScalingFactor=function(t){this.scalingFactor=t,this.size&&this.ChangeSize(this.size)},e}(i.SimpleElement);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c},,,,,,,function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(3),i=n(4),a=n(9),u=n(10),s=n(12),c=n(14),h=n(7),l=n(16),p=2,f=function(){function t(t){this.next=t}return t.prototype.FromSVG=function(t,e,n){if(this.next)return this.next.FromSVG(t,e,n);throw new Error("Chunk loading failed: Unsupported node "+e.nodeName+".")},t.prototype.ToSVG=function(t,e){if(this.next)return this.next.ToSVG(t,e);throw new Error("Chunk export failed: Unsupported command "+typeof t+".")},t.prototype.CommandsToSVG=function(t,e,n,r){for(var o=0;o<e.length;o++)t.appendChild(n.ToSVG(e[o],r));return t},t.GetCommands=function(t,e,n){for(var r=this.initCmds.filter(function(t){return null!==t}).map(function(t){return t.Clone()}),o=[];t;){var i=e.FromSVG(t,n);o.push(i),t=t.nextElementSibling,i instanceof u.MoveCursor?this.initCmds[0]=i:i instanceof u.ChangeBrushColor?this.initCmds[1]=i:i instanceof u.ChangeBrushSize&&(this.initCmds[2]=i)}return[r,o]},t.initCmds=[null,null,null],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=f;var d=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r,i){if(o.SVGA.attr(r,"type")===e.NodeName){var u=new a.VoidChunk(o.SVGA.numAttr(r,"t"),0);return s=f.GetCommands(r.firstElementChild,i,u.StartTime),u.InitCommands=s[0],u.Commands=s[1],u}return t.prototype.FromSVG.call(this,n,r,i);var s},e.prototype.ToSVG=function(n,r){if(n instanceof a.VoidChunk){var i=o["default"].CreateElement("g");return o.SVGA.SetAttributes(i,{type:e.NodeName,t:n.StartTime.toFixed(p)}),this.CommandsToSVG(i,n.Commands,r,n.StartTime),i}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="void",e}(f);e.VoidChunkFactory=d;var m;!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Curve=2]="Curve",t[t.Arc=3]="Arc",t[t.Close=4]="Close"}(m||(m={}));var g=function(){function t(t,e,n,r){this.letter=t,this.type=e,this.coordsCount=n,this.next=r}return t.prototype.Create=function(t){var e=t.shift();if(e===this.letter){for(var n=[],r=0;r<this.coordsCount;r++)n.push(this.CreateVector2(t.shift()));return{type:this.type,coords:n}}if(this.next)return t.unshift(e),this.next.Create(t);throw new Error("Unsupported instruction letter '"+e+"'")},t.prototype.CreateVector2=function(t){var e=t.split(",");if(2!==e.length)throw new Error("Coordinates pair '"+t+"' is not valid");return new i["default"](Number(e[0]),Number(e[1]))},t}(),y=function(t){function e(e){t.call(this,"A",m.Arc,3,e)}return r(e,t),e.prototype.Create=function(t){var e=t.shift();if(e===this.letter){var n=[];return n.push(this.CreateVector2(t.shift())),t.shift(),n.push(this.CreateVector2(t.shift())),n.push(this.CreateVector2(t.shift())),{type:this.type,coords:n}}if(this.next)return t.unshift(e),this.next.Create(t);throw new Error("Unsupported instruction letter '"+e+"'")},e}(g),C=function(t){function e(e){t.call(this,e),this.next=e,this.instructionFactory=new g("C",m.Curve,3,new g("L",m.Line,1,new g("M",m.Move,1,new y)))}return r(e,t),e.prototype.FromSVG=function(n,r,i){if(o.SVGA.attr(r,"type")===e.NodeName){if(0===r.childElementCount)throw new Error("Path chunk no child elements.");var u=r.firstElementChild;if("path"!==u.localName)throw new Error("Path chunk must begin with a <path> element, but "+u.localName+" found instead");var s=new a.PathChunk(this.SVGNodeToPath(n,u),o.SVGA.numAttr(r,"t"),0);return c=f.GetCommands(u.nextElementSibling,i,s.StartTime),s.InitCommands=c[0],s.Commands=c[1],s}return t.prototype.FromSVG.call(this,n,r,i);var c},e.prototype.ToSVG=function(n,r){if(n instanceof a.PathChunk){var i=o["default"].CreateElement("g");return o.SVGA.SetAttributes(i,{type:e.NodeName,t:n.StartTime.toFixed(p)}),i.appendChild(this.PathToSVGNode(n.Path)),this.CommandsToSVG(i,n.Commands,r,n.StartTime),i}return t.prototype.ToSVG.call(this,n,r)},e.prototype.SVGNodeToPath=function(t,e){var n=o["default"].attr(e,"fill"),r=new s["default"](t,!0,n),i=o["default"].attr(e,"d");e=null;for(var a=i.split(" ").filter(function(t){return t.length>0}),u=[];a.length>0;)u.push(this.instructionFactory.Create(a));a=null,i=null;var h=u.length-1;if(!(u.length>=2&&u[0].type===m.Move&&u[h].type===m.Arc))throw new Error("Only "+u.length+" valid instructions recognized in a path string");if(r.Segments.push(new c.ZeroLengthSegment(u[h-1].coords[0],u[0].coords[0])),u.pop(),u.pop(),u.shift(),1===u.length){var p=r.Segments[0].Right,f=u[0].coords[2];return r.Segments=[new c.ZeroLengthSegment(p,f)],r}h=u.length-1;for(var d=r.Segments[0],g=0;g<Math.floor(u.length/2);g++)if(u[g].type===m.Line){var y=new c.QuadrilateralSegment(u[g].coords[0],u[h-g].coords[0]);r.Segments.push(y),d instanceof c.CurvedSegment&&(d.Left=u[h-g].coords[0].clone()),d=y}else{if(u[g].type!==m.Curve)throw new Error("Unsupported path segment type "+u[g].type+" ");var C=new l.BezierCurveSegment(null,u[g].coords[0],u[g].coords[2],u[g].coords[1]),v=new l.BezierCurveSegment(u[h-g].coords[2],u[h-g].coords[1],null,u[h-g].coords[0]),S=new c.CurvedSegment(v,C);d&&d instanceof c.CurvedSegment?(d.Left=S.LeftBezier.Start.clone(),S.RightBezier.Start=d.RightBezier.End.clone()):d&&d instanceof c.QuadrilateralSegment&&(S.RightBezier.Start=d.Right.clone()),r.Segments.push(S),d=S}return d&&d instanceof c.CurvedSegment&&(d.Left=u[Math.floor(u.length/2)].coords[2].clone()),r},e.prototype.PathToSVGNode=function(t){for(var e=t.Segments,n=e[0],r=n.Right.pointInBetween(n.Left),i=n.Left.clone().subtract(r),a=n.Right.clone().subtract(r),u=o["default"].ArcString(n.Right,r.distanceTo(n.Right),s["default"].angle(i)),h="",l=" "+u,p=0;p<e.length;p++){var n=e[p];if(n instanceof c.ZeroLengthSegment)h+=o["default"].MoveToString(n.Right)+" ",l=o["default"].MoveToString(n.Left)+" "+l;else if(n instanceof c.CurvedSegment)h+=o["default"].CurveToString(n.RightBezier.StartCP,n.RightBezier.EndCP,n.RightBezier.End)+" ",l=o["default"].CurveToString(n.LeftBezier.EndCP,n.LeftBezier.StartCP,n.LeftBezier.Start)+" "+l;else{if(!(n instanceof c.QuadrilateralSegment))throw new Error("Unsupported segment type "+typeof n);h+=o["default"].LineToString(n.Right)+" ",l=o["default"].LineToString(n.Left)+" "+l}}n=e[e.length-1],r=n.Right.pointInBetween(n.Left),i=n.Right.clone().subtract(r),a=n.Left.clone().subtract(r);var f=o["default"].ArcString(n.Left,r.distanceTo(n.Left),s["default"].angle(i))+" ";return o["default"].CreateElement("path",{fill:t.Color,d:h+f+l})},e.NodeName="path",e}(f);e.PathChunkFactory=C;var v=function(t){function e(){t.apply(this,arguments),this.Width=0,this.Height=0}return r(e,t),e.prototype.FromSVG=function(n,r,i){if(o.SVGA.attr(r,"type")===e.NodeName){if(0===r.childElementCount)throw new Error("Erase chunk no child elements.");var u=r.firstElementChild;if("rect"!==u.localName)throw new Error("Erase chunk must begin with a <rect> element, but "+u.localName+" found instead");var s=new a.EraseChunk(new h["default"](o["default"].attr(u,"fill")),o.SVGA.numAttr(r,"t"),0);return c=f.GetCommands(u.nextElementSibling,i,s.StartTime),s.InitCommands=c[0],s.Commands=c[1],s}return t.prototype.FromSVG.call(this,n,r,i);var c},e.prototype.ToSVG=function(n,r){if(n instanceof a.EraseChunk){var i=o["default"].CreateElement("g");return o.SVGA.SetAttributes(i,{type:e.NodeName,t:n.StartTime.toFixed(p)}),i.appendChild(o["default"].CreateElement("rect",{fill:n.Color.CssValue,width:this.Width,height:this.Height})),this.CommandsToSVG(i,n.Commands,r,n.StartTime),i}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="erase",e}(f);e.EraseChunkFactory=v},function(t,e,n){"use strict";var r=function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(10),i=n(3),a=n(6),u=n(7),s=n(20),c=2,h=4,l=function(){function t(t){this.next=t}return t.prototype.FromSVG=function(t,e){if(this.next)return this.next.FromSVG(t,e);throw new Error("Command loading failed: Unsupported node "+t.nodeName+".")},t.prototype.getCmdTime=function(t,e){return i.SVGA.numAttr(t,"t",0)+e},t.prototype.ToSVG=function(t,e){if(this.next)return this.next.ToSVG(t,e);throw new Error("Command export failed: Unsupported command "+typeof t+".")},t.prototype.storeTime=function(t,e){e>0&&i.SVGA.SetAttributes(t,{t:a.precise(e,c)})},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=l;var p=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r){return n.localName===e.NodeName?new o.MoveCursor(i.SVGA.numAttr(n,"x"),i.SVGA.numAttr(n,"y"),i.SVGA.numAttr(n,"p",0),t.prototype.getCmdTime.call(this,n,r)):t.prototype.FromSVG.call(this,n,r)},e.prototype.ToSVG=function(n,r){if(n instanceof o.MoveCursor){var u={x:a.precise(n.X),y:a.precise(n.Y)};n.P>0&&(u.p=a.precise(n.P,h));var s=i.SVGA.CreateElement(e.NodeName,u);return t.prototype.storeTime.call(this,s,n.Time-r),s}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="m",e}(l);e.MoveCursorFactory=p;var f=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r){return n.localName===e.NodeName?new o.DrawNextSegment(t.prototype.getCmdTime.call(this,n,r)):t.prototype.FromSVG.call(this,n,r)},e.prototype.ToSVG=function(n,r){if(n instanceof o.DrawNextSegment){var a=i.SVGA.CreateElement(e.NodeName);return t.prototype.storeTime.call(this,a,n.Time-r),a}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="d",e}(l);e.DrawSegmentFactory=f;var d=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r){return n.localName===e.NodeName?new o.ChangeBrushColor(new u["default"](i.SVGA.attr(n,"c")),t.prototype.getCmdTime.call(this,n,r)):t.prototype.FromSVG.call(this,n,r)},e.prototype.ToSVG=function(n,r){if(n instanceof o.ChangeBrushColor){var a=i.SVGA.CreateElement(e.NodeName,{c:n.Color.CssValue});return t.prototype.storeTime.call(this,a,n.Time-r),a}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="c",e}(l);e.ChangeBrushColorFactory=d;var m=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r){return n.localName===e.NodeName?new o.ChangeBrushSize(new s["default"](i.SVGA.numAttr(n,"w")),t.prototype.getCmdTime.call(this,n,r)):t.prototype.FromSVG.call(this,n,r)},e.prototype.ToSVG=function(n,r){if(n instanceof o.ChangeBrushSize){var a=i.SVGA.CreateElement(e.NodeName,{w:n.Size.Size});return t.prototype.storeTime.call(this,a,n.Time-r),a}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="s",e}(l);e.ChangeBrushSizeFactory=m;var g=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.FromSVG=function(n,r){return n.localName===e.NodeName?new o.ClearCanvas(new u["default"](i.SVGA.attr(n,"c")),t.prototype.getCmdTime.call(this,n,r)):t.prototype.FromSVG.call(this,n,r)},e.prototype.ToSVG=function(n,r){if(n instanceof o.ClearCanvas){var a=i.SVGA.CreateElement(e.NodeName,{c:n.Color.CssValue});return t.prototype.storeTime.call(this,a,n.Time-r),a}return t.prototype.ToSVG.call(this,n,r)},e.NodeName="e",e}(l);e.ClearCanvasFactory=g},function(t,e,n){"use strict";var r=n(21),o=n(3),i=n(11),a=function(){function t(){}return t.prototype.FromSVG=function(t){var e=new r["default"];if("metadata"!==t.localName)throw new Error("MetadataFactory error parsing SVG: Wrong metadata element "+t.localName);var n=t.firstElementChild;if("length"!==n.localName)throw new Error("MetadataFactory error parsing SVG: Expected 'length', found '"+n.nodeName+"'");e.Length=Number(n.textContent);var a=n.nextElementSibling;if(n=null,"width"!==a.localName)throw new Error("MetadataFactory error parsing SVG: Expected 'length', found '"+a.nodeName+"'");e.Width=Number(a.textContent);var u=a.nextElementSibling;if(a=null,"height"!==u.localName)throw new Error("MetadataFactory error parsing SVG: Expected 'length', found '"+u.nodeName+"'");e.Height=Number(u.textContent),e.AudioTracks=[];for(var s=u.nextElementSibling,c=s.firstElementChild;c;){var h=i.AudioSource.StringToType(o.SVGA.attr(c,"type"));e.AudioTracks.push(new i.AudioSource(o.SVGA.attr(c,"src"),h)),c=c.nextElementSibling}return e},t.prototype.ToSVG=function(t){var e=o["default"].CreateElement("metadata"),n=o.SVGA.CreateElement("length");n.textContent=t.Length.toFixed(3),e.appendChild(n),n=null;var r=o.SVGA.CreateElement("width");r.textContent=t.Width.toFixed(0),e.appendChild(r),r=null;var i=o.SVGA.CreateElement("height");i.textContent=t.Height.toFixed(0),e.appendChild(i),i=null;for(var a=o.SVGA.CreateElement("audio"),u=0;u<t.AudioTracks.length;u++){var s=t.AudioTracks[u],c=o.SVGA.CreateElement("source",{type:s.MimeType,src:s.Url});a.appendChild(c),c=null}return e.appendChild(a),e},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a}]);
//# sourceMappingURL=common.js.map